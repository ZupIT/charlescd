---
# Source: charlescd/charts/ingress-nginx/templates/controller-serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: controller
  name: charlescd-ingress-nginx
---
# Source: charlescd/charts/keycloak/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: keycloak
  labels:
    helm.sh/chart: keycloak-9.8.1
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "11.0.2"
    app.kubernetes.io/managed-by: Helm
imagePullSecrets:
    []
---
# Source: charlescd/templates/service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  annotations:
  name: charlescd-octopipe
  namespace: charles
---
# Source: charlescd/charts/postgresql/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: charlescd-postgresql
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-10.2.2
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/managed-by: Helm
type: Opaque
data:
  postgresql-postgres-password: "ZjJqNGJpd0wwRQ=="
  postgresql-password: "UXRTeEpSd2NoZQ=="
---
# Source: charlescd/charts/redis/templates/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: charlescd-redis
  namespace: "charles"
  labels:
    app: redis
    chart: redis-12.6.0
    release: "charlescd"
    heritage: "Helm"
type: Opaque
data:
  redis-password: "aGIyRmo5TUdLakJrWjZ6Vg=="
---
# Source: charlescd/templates/charlescd-secrets.yaml
apiVersion: v1
data:
  encryption-key: QzYzOUE1NzJFMTRENTA3NUM1MjZGRERENDNFNEVDRjZCMDk1RUExNzc4M0QzMkVGM0QyNzEwQUY5RjM1OURENA==
kind: Secret
metadata:
  name: deploy-aes256-key
type: Opaque
---
# Source: charlescd/templates/charlescd-secrets.yaml
apiVersion: v1
data:
  encryption-key: NmRkZGU0MTAtM2YxYi0xMWViLWIzNzgtMDI0MmFjMTMwMDAy
kind: Secret
metadata:
  name: compass-aes256-key
type: Opaque
---
# Source: charlescd/templates/charlescd-secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: application-aes256-key
type: Opaque
data:
  encryption-key: OGVhMzY4OGYtYmUxOS00YWU2LTljNmMtZDFhNjAzNjAyYTJm
---
# Source: charlescd/charts/envoy/templates/envoy-conf.yml
apiVersion: v1
data:
  envoy.yaml: |-
    static_resources:
      listeners:
      - address:
          socket_address:
            address: 0.0.0.0
            port_value: 80
        filter_chains:
        - filters:
          - name: envoy.http_connection_manager
            typed_config:
              "@type": type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager
              codec_type: auto
              stat_prefix: ingress_http
              access_log:
              - name: envoy.access_loggers.file
                typed_config:
                  "@type": type.googleapis.com/envoy.extensions.access_loggers.file.v3.FileAccessLog
                  path: "/dev/stdout"
              route_config:
                name: local_route
                virtual_hosts:
                - name: backend
                  domains:
                  - "*"
                  
                  cors:
                    allow_origin_string_match:
                    allow_methods: "GET, POST, PUT, DELETE, PATCH, OPTIONS"
                    allow_headers: "Authorization,x-circle-id,x-workspace-id,DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range"
                  routes:
                  
                  - match:
                      prefix: "/moove/"
                    route:
                      prefix_rewrite: "/"
                      cluster: charlescd-moove
                  
                  - match:
                      prefix: "/octopipe/"
                    route:
                      prefix_rewrite: "/"
                      cluster: charlescd-octopipe
                  
                  - match:
                      prefix: "/charlescd-circle-matcher/"
                    route:
                      prefix_rewrite: "/"
                      cluster: charlescd-circle-matcher
                    typed_per_filter_config:
                      envoy.filters.http.lua:
                        "@type": type.googleapis.com/envoy.extensions.filters.http.lua.v3.LuaPerRoute
                        disabled: true
                  
                  - match:
                      prefix: "/keycloak"
                    route:
                      cluster: charlescd-keycloak-http
                    typed_per_filter_config:
                      envoy.filters.http.lua:
                        "@type": type.googleapis.com/envoy.extensions.filters.http.lua.v3.LuaPerRoute
                        disabled: true
                  
                  - match:
                      prefix: "/compass/"
                    route:
                      prefix_rewrite: "/"
                      cluster: charlescd-compass
                  
                  - match:
                      prefix: "/"
                    route:
                      cluster: charlescd-ui
                    typed_per_filter_config:
                      envoy.filters.http.lua:
                        "@type": type.googleapis.com/envoy.extensions.filters.http.lua.v3.LuaPerRoute
                        disabled: true
              http_filters:
              
              - name: envoy.filters.http.cors
                typed_config: {}
              - name: envoy.filters.http.lua
                typed_config:
                  "@type": type.googleapis.com/envoy.extensions.filters.http.lua.v3.Lua
                  inline_code: |
                    function envoy_on_request(request_handle)
                      local token = request_handle:headers():get("authorization")
                      local request = require("luajit-init")
                      local response = request.send(
                        "http://keycloak-http/keycloak/auth/realms/charlescd/protocol/openid-connect/userinfo",
                        {
                          headers = {
                            authorization = token
                          }
                        }
                      )
                      request_handle:logInfo("LUASCRIPT:CHECK_TOKEN")
                      request_handle:logInfo(response.code)
                      if response.code ~= 200 then
                        request_handle:respond({
                          [":status"] = response.code
                        }, response.body)
                      end
                    end
              - name: envoy.filters.http.router
                typed_config: {}

      clusters:
      
      - name: charlescd-ui
        connect_timeout: 0.25s
        type: strict_dns
        lb_policy: round_robin
        http_protocol_options: {}
        load_assignment:
          cluster_name: charlescd-ui
          endpoints:
          - lb_endpoints:
            - endpoint:
                address:
                  socket_address:
                    address: charlescd-ui
                    port_value: 3000
      
      - name: charlescd-moove
        connect_timeout: 0.25s
        type: strict_dns
        lb_policy: round_robin
        http_protocol_options: {}
        load_assignment:
          cluster_name: charlescd-moove
          endpoints:
          - lb_endpoints:
            - endpoint:
                address:
                  socket_address:
                    address: charlescd-moove
                    port_value: 8080
      
      - name: charlescd-octopipe
        connect_timeout: 0.25s
        type: strict_dns
        lb_policy: round_robin
        http_protocol_options: {}
        load_assignment:
          cluster_name: charlescd-octopipe
          endpoints:
          - lb_endpoints:
            - endpoint:
                address:
                  socket_address:
                    address: charlescd-octopipe
                    port_value: 8080
      
      - name: charlescd-circle-matcher
        connect_timeout: 0.25s
        type: strict_dns
        lb_policy: round_robin
        http_protocol_options: {}
        load_assignment:
          cluster_name: charlescd-circle-matcher
          endpoints:
          - lb_endpoints:
            - endpoint:
                address:
                  socket_address:
                    address: charlescd-circle-matcher
                    port_value: 8080
      - name: charlescd-keycloak-http
        connect_timeout: 2.00s
        type: strict_dns
        lb_policy: round_robin
        http_protocol_options: {}
        load_assignment:
          cluster_name: charlescd-keycloak-http
          endpoints:
          - lb_endpoints:
            - endpoint:
                address:
                  socket_address:
                    address: keycloak-http
                    port_value: 80
      
      - name: charlescd-compass
        connect_timeout: 0.25s
        type: strict_dns
        lb_policy: round_robin
        http_protocol_options: {}
        load_assignment:
          cluster_name: charlescd-compass
          endpoints:
          - lb_endpoints:
            - endpoint:
                address:
                  socket_address:
                    address: charlescd-compass
                    port_value: 8080
    admin:
      access_log_path: "/dev/stdout"
      address:
        socket_address:
          address: 0.0.0.0
          port_value: 8001
kind: ConfigMap
metadata:
  name: confenvoy
---
# Source: charlescd/charts/envoy/templates/lua-conf.yml
apiVersion: v1
data:
  luajit-init.lua: |-
    --[[
    LuaJIT-Request
    Lucien Greathouse
    Wrapper for LuaJIT-cURL for easy HTTP(S) requests.

    Copyright (c) 2016 Lucien Greathouse

    This software is provided 'as-is', without any express
    or implied warranty. In no event will the authors be held
    liable for any damages arising from the use of this software.

    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, andto alter it and redistribute it
    freely, subject to the following restrictions:

    1. The origin of this software must not be misrepresented; you must not
    claim that you wrote the original software. If you use this software
    in a product, an acknowledgment in the product documentation would be
    appreciated but is not required.

    2. Altered source versions must be plainly marked as such, and must
    not be misrepresented as being the original software.

    3. This notice may not be removed or altered from any source distribution.
    ]]

    local path = (...):gsub("%.init$", ""):match("%.?(.-)$") .. "."

    local ffi = require("ffi")
    local curl = require("luajit-curl")
    local request

    local function url_encode(str)
      if (str) then
        str = str:gsub("\n", "\r\n")
        str = str:gsub("([^%w %-%_%.%~])", function(c)
          return string.format ("%%%02X", string.byte(c))
        end)
        str = str:gsub(" ", "%%20")
      end
      return str
    end

    local function cookie_encode(str, name)
      str = str:gsub("[,;%s]", "")

      if (name) then
        str = str:gsub("=", "")
      end

      return str
    end

    local auth_map = {
      BASIC = ffi.cast("long", curl.CURLAUTH_BASIC),
      DIGEST = ffi.cast("long", curl.CURLAUTH_DIGEST),
      NEGOTIATE = ffi.cast("long", curl.CURLAUTH_NEGOTIATE)
    }

    local errors = {
      unknown = 0,
      timeout = 1,
      connect = 2,
      resolve_host = 3
    }

    local code_map = {
      [curl.CURLE_OPERATION_TIMEDOUT] = {
        errors.timeout, "Connection timed out"
      },
      [curl.CURLE_COULDNT_RESOLVE_HOST] = {
        errors.resolve_host, "Couldn't resolve host"
      },
      [curl.CURLE_COULDNT_CONNECT] = {
        errors.connect, "Couldn't connect to host"
      }
    }

    request = {
      error = errors,

      version = "2.4.0",
      version_major = 2,
      version_minor = 4,
      version_patch = 0,

      --[[
        Send an HTTP(S) request to the URL at 'url' using the HTTP method 'method'.
        Use the 'args' parameter to optionally configure the request:
          - method: HTTP method to use. Defaults to "GET", but can be any HTTP verb like "POST" or "PUT"
          - headers: Dictionary of additional HTTP headers to send with request
          - data: Dictionary or string to send as request body
          - cookies: Dictionary table of cookies to send
          - timeout: How long to wait for the connection to be made before giving up
          - allow_redirects: Whether or not to allow redirection. Defaults to true
          - body_stream_callback: A method to call with each piece of the response body.
          - header_stream_callback: A method to call with each piece of the resulting header.
          - transfer_info_callback: A method to call with transfer progress data.
          - auth_type: Authentication method to use. Defaults to "none", but can also be "basic", "digest" or "negotiate"
          - username: A username to use with authentication. 'auth_type' must also be specified.
          - password: A password to use with authentication. 'auth_type' must also be specified.
          - files: A dictionary of file names to their paths on disk to upload via stream.

        If both body_stream_callback and header_stream_callback are defined, a boolean true will be returned instead of the following object.

        The return object is a dictionary with the following members:
          - code: The HTTP status code the response gave. Will not exist if header_stream_callback is defined above.
          - body: The body of the response. Will not exist if body_stream_callback is defined above.
          - headers: A dictionary of headers and their values. Will not exist if header_stream_callback is defined above.
          - headers_raw: A raw string containing the actual headers the server sent back. Will not exist if header_stream_callback is defined above.
          - set_cookies: A dictionary of cookies given by the "Set-Cookie" header from the server. Will not exist if the server did not set any cookies.

        If an error occured, false will be returned along with a curl error code and a message.
      ]]
      send = function(url, args)
        local handle = curl.curl_easy_init()
        local header_chunk
        local out_buffer
        local headers_buffer
        args = args or {}

        local callbacks = {}
        local gc_handles = {}

        curl.curl_easy_setopt(handle, curl.CURLOPT_URL, url)
        curl.curl_easy_setopt(handle, curl.CURLOPT_SSL_VERIFYPEER, 1)
        curl.curl_easy_setopt(handle, curl.CURLOPT_SSL_VERIFYHOST, 2)

        if (args.data and type(args.data) ~= "table") then
          local default_content_type = "application/octet-stream"
          if (not args.headers) then
            args.headers = {
              ["content-type"] = default_content_type
            }
          else
            local has_content_type = false
            for header_name, _ in pairs(args.headers) do
              if header_name:lower() == "content-type" then
                has_content_type = true
                break
              end
            end
            if not has_content_type then
              args.headers["content-type"] = default_content_type
            end
          end
        end

        if (args.method) then
          local method = string.upper(tostring(args.method))

          if (method == "GET") then
            curl.curl_easy_setopt(handle, curl.CURLOPT_HTTPGET, 1)
          elseif (method == "POST") then
            curl.curl_easy_setopt(handle, curl.CURLOPT_POST, 1)
            args.data = args.data or "" -- https://github.com/curl/curl/issues/1625#issuecomment-312456910
          else
            curl.curl_easy_setopt(handle, curl.CURLOPT_CUSTOMREQUEST, method)
          end
        end

        if (args.headers) then
          for key, value in pairs(args.headers) do
            header_chunk = curl.curl_slist_append(header_chunk, tostring(key) .. ":" .. tostring(value))
          end

          curl.curl_easy_setopt(handle, curl.CURLOPT_HTTPHEADER, header_chunk)
        end

        if (args.auth_type) then
          local auth = string.upper(tostring(args.auth_type))

          if (auth_map[auth]) then
            curl.curl_easy_setopt(handle, curl.CURLOPT_HTTPAUTH, auth_map[auth])
            curl.curl_easy_setopt(handle, curl.CURLOPT_USERNAME, tostring(args.username))
            curl.curl_easy_setopt(handle, curl.CURLOPT_PASSWORD, tostring(args.password or ""))
          elseif (auth ~= "NONE") then
            error("Unsupported authentication type '" .. auth .. "'")
          end
        end

        if (args.body_stream_callback) then
          local callback = ffi.cast("curl_callback", function(data, size, nmeb, user)
            args.body_stream_callback(ffi.string(data, size * nmeb))
            return size * nmeb
          end)

          table.insert(callbacks, callback)

          curl.curl_easy_setopt(handle, curl.CURLOPT_WRITEFUNCTION, callback)
        else
          out_buffer = {}

          local callback = ffi.cast("curl_callback", function(data, size, nmeb, user)
            table.insert(out_buffer, ffi.string(data, size * nmeb))
            return size * nmeb
          end)

          table.insert(callbacks, callback)

          curl.curl_easy_setopt(handle, curl.CURLOPT_WRITEFUNCTION, callback)
        end

        if (args.header_stream_callback) then
          local callback = ffi.cast("curl_callback", function(data, size, nmeb, user)
            args.header_stream_callback(ffi.string(data, size * nmeb))
            return size * nmeb
          end)

          table.insert(callbacks, callback)

          curl.curl_easy_setopt(handle, curl.CURLOPT_HEADERFUNCTION, callback)
        else
          headers_buffer = {}

          local callback = ffi.cast("curl_callback", function(data, size, nmeb, user)
            table.insert(headers_buffer, ffi.string(data, size * nmeb))
            return size * nmeb
          end)

          table.insert(callbacks, callback)

          curl.curl_easy_setopt(handle, curl.CURLOPT_HEADERFUNCTION, callback)
        end

        if (args.transfer_info_callback) then
          local callback = ffi.cast("curl_xferinfo_callback", function(client, dltotal, dlnow, ultotal, ulnow)
            args.transfer_info_callback(tonumber(dltotal), tonumber(dlnow), tonumber(ultotal), tonumber(ulnow))
            return 0
          end)

          table.insert(callbacks, callback)

          curl.curl_easy_setopt(handle, curl.CURLOPT_NOPROGRESS, 0)
          curl.curl_easy_setopt(handle, curl.CURLOPT_XFERINFOFUNCTION, callback)
        end

        if (args.follow_redirects == nil) then
          curl.curl_easy_setopt(handle, curl.CURLOPT_FOLLOWLOCATION, true)
        else
          curl.curl_easy_setopt(handle, curl.CURLOPT_FOLLOWLOCATION, not not args.follow_redirects)
        end

        if (args.data) then
          if (type(args.data) == "table") then
            local buffer = {}
            for key, value in pairs(args.data) do
              table.insert(buffer, ("%s=%s"):format(url_encode(key), url_encode(value)))
            end

            curl.curl_easy_setopt(handle, curl.CURLOPT_POSTFIELDS, table.concat(buffer, "&"))
          else
            curl.curl_easy_setopt(handle, curl.CURLOPT_POSTFIELDS, tostring(args.data))
          end
        end

        local post
        if (args.files) then
          post = ffi.new("struct curl_httppost*[1]")
          local lastptr = ffi.new("struct curl_httppost*[1]")

          for key, value in pairs(args.files) do
            local file = ffi.new("char[?]", #value, value)

            table.insert(gc_handles, file)

            local res = curl.curl_formadd(
              post, lastptr,
              ffi.new("int", curl.CURLFORM_COPYNAME), key,
              ffi.new("int", curl.CURLFORM_FILE), file,
              ffi.new("int", curl.CURLFORM_END)
            )
          end

          curl.curl_easy_setopt(handle, curl.CURLOPT_HTTPPOST, post[0])
        end

        -- Enable the cookie engine
        curl.curl_easy_setopt(handle, curl.CURLOPT_COOKIEFILE, "")

        if (args.cookies) then
          local cookie_out

          if (type(args.cookies) == "table") then
            local buffer = {}
            for key, value in pairs(args.cookies) do
              table.insert(buffer, ("%s=%s"):format(cookie_encode(key, true), cookie_encode(value)))
            end

            cookie_out = table.concat(buffer, "; ")
          else
            cookie_out = tostring(args.cookies)
          end

          curl.curl_easy_setopt(handle, curl.CURLOPT_COOKIE, cookie_out)
        end

        if (tonumber(args.timeout)) then
          curl.curl_easy_setopt(handle, curl.CURLOPT_CONNECTTIMEOUT, tonumber(args.timeout))
        end

        local code = curl.curl_easy_perform(handle)

        if (code ~= curl.CURLE_OK) then
          local num = tonumber(code)

          if (code_map[num]) then
            return false, code_map[num][1], code_map[num][2]
          end

          return false, request.error.unknown, "Unknown error", num
        end

        local out

        if (out_buffer or headers_buffer) then
          local headers, status, parsed_headers, raw_cookies, set_cookies

          if (headers_buffer) then
            -- In case we got multiple responses (e.g. 100 - Continue or 302 Redirects)
            -- we want to only return the last response
            local start_index = 1
            for i, resp_line in ipairs(headers_buffer) do
              if resp_line:match("^HTTP/(.-)%s+(%d+)%s+(.+)\r\n$") then
                start_index = i
              end
            end
            local last_request_headers = {}
            for i = start_index, #headers_buffer do
              table.insert(last_request_headers, headers_buffer[i])
            end
            headers = table.concat(last_request_headers)
            status = tonumber(headers:match("%s+(%d+)%s+"))

            parsed_headers = {}

            for key, value in headers:gmatch("\n([^:]+): *([^\r\n]*)") do
              parsed_headers[key] = value
            end
          end

          local cookielist = ffi.new("struct curl_slist*[1]")
          curl.curl_easy_getinfo(handle, curl.CURLINFO_COOKIELIST, cookielist)
          if cookielist[0] ~= nil then
            raw_cookies, set_cookies = {}, {}
            local cookielist = ffi.gc(cookielist[0], curl.curl_slist_free_all)
            local cookie = cookielist

            repeat
              local raw = ffi.string(cookie[0].data)
              table.insert(raw_cookies, raw)

              local domain, subdomains, path, secure, expiration, name, value = raw:match("^(.-)\t(.-)\t(.-)\t(.-)\t(.-)\t(.-)\t(.*)$")
              set_cookies[name] = value
              cookie = cookie[0].next
            until cookie == nil
          end

          out = {
            body = table.concat(out_buffer),
            headers = parsed_headers,
            raw_cookies = raw_cookies,
            set_cookies = set_cookies,
            code = status,
            raw_headers = headers
          }
        else
          out = true
        end

        curl.curl_easy_cleanup(handle)
        curl.curl_slist_free_all(header_chunk)

        if (post) then
          curl.curl_formfree(post[0])
        end
        gc_handles = {}

        for i, v in ipairs(callbacks) do
          v:free()
        end

        return out
      end,

      init = function()
        curl.curl_global_init(curl.CURL_GLOBAL_ALL)
      end,

      close = function()
        curl.curl_global_cleanup()
      end
    }

    request.init()

    return request
  luajit-curl.lua: |-
    --[[
    LuaJIT-cURL
    Lucien Greathouse
    LuaJIT FFI cURL binding aimed at cURL version 7.38.0.

    Copyright (c) 2014 lucien Greathouse

    This software is provided 'as-is', without any express
    or implied warranty. In no event will the authors be held
    liable for any damages arising from the use of this software.

    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, andto alter it and redistribute it
    freely, subject to the following restrictions:

    1. The origin of this software must not be misrepresented; you must not
    claim that you wrote the original software. If you use this software
    in a product, an acknowledgment in the product documentation would be
    appreciated but is not required.

    2. Altered source versions must be plainly marked as such, and must
    not be misrepresented as being the original software.

    3. This notice may not be removed or altered from any source distribution.
    ]]

    local ffi = require("ffi")
    local curl = ffi.load("libcurl")

    if (jit.os == "Windows") then
      --Windows!
      ffi.cdef([[
        //windows layering
        enum {
          INVALID_SOCKET = ~0,
          SOCKET_BAD = ~0
        };
      ]])
    else
      --Not Windows!
      ffi.cdef([[
        typedef int socket_t;

        enum {
          SOCKET_BAD = -1
        };
      ]])
    end

    ffi.cdef([[
      typedef int64_t time_t;
      typedef unsigned int size_t;

      typedef size_t (*curl_callback)(char *data, size_t size, size_t nmeb, void *userdata);
    ]])

    --curlver.h
    ffi.cdef([[
    /***************************************************************************
    *                                  _   _ ____  _
    *  Project                     ___| | | |  _ \| |
    *                             / __| | | | |_) | |
    *                            | (__| |_| |  _ <| |___
    *                             \___|\___/|_| \_\_____|
    *
    * Copyright (C) 1998 - 2014, Daniel Stenberg, <daniel@haxx.se>, et al.
    *
    * This software is licensed as described in the file COPYING, which
    * you should have received as part of this distribution. The terms
    * are also available at http://curl.haxx.se/docs/copyright.html.
    *
    * You may opt to use, copy, modify, merge, publish, distribute and/or sell
    * copies of the Software, and permit persons to whom the Software is
    * furnished to do so, under the terms of the COPYING file.
    *
    * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
    * KIND, either express or implied.
    *
    ***************************************************************************/

    enum {
      LIBCURL_VERSION_MAJOR = 7,
      LIBCURL_VERSION_MINOR = 38,
      LIBCURL_VERSION_PATCH = 0,
      LIBCURL_VERSION_NUM = 0x072600
    }
    ]])

    --cURL's type aliasing, built around curlbuild.h
    ffi.cdef([[
      typedef int64_t curl_off_t;
    ]])

    --Constants
    ffi.cdef([[
    enum {
      CURL_GLOBAL_SSL = (1<<0),
      CURL_GLOBAL_WIN32 = (1<<1),
      CURL_GLOBAL_ALL = (CURL_GLOBAL_SSL|CURL_GLOBAL_WIN32),
      CURL_GLOBAL_NOTHING = 0,
      CURL_GLOBAL_DEFAULT = CURL_GLOBAL_ALL,
      CURL_GLOBAL_ACK_EINTR = (1<<2)
    };

    enum {
      CURLAUTH_NONE = 0,
      CURLAUTH_BASIC = 1,
      CURLAUTH_DIGEST = 1<<1,
      CURLAUTH_NEGOTIATE = 1<<2
    };
    ]])

    ffi.cdef([[
    typedef void CURL;
    typedef int curl_socket_t;
    typedef struct curl_httppost {
    struct curl_httppost *next;
    char *name;
    long namelength;
    char *contents;
    long contentslength;
    char *buffer;
    long bufferlength;
    char *contenttype;
    struct curl_slist* contentheader;
    struct curl_httppost *more;
    long flags;
    char *showfilename;
    void *userp;
    };
    typedef int (*curl_progress_callback)(void *clientp,
    double dltotal,
    double dlnow,
    double ultotal,
    double ulnow);
    typedef int (*curl_xferinfo_callback)(void *clientp,
    curl_off_t dltotal,
    curl_off_t dlnow,
    curl_off_t ultotal,
    curl_off_t ulnow);
    typedef size_t (*curl_write_callback)(char *buffer,
    size_t size,
    size_t nitems,
    void *outstream);
    typedef enum {
    CURLFILETYPE_FILE = 0,
    CURLFILETYPE_DIRECTORY,
    CURLFILETYPE_SYMLINK,
    CURLFILETYPE_DEVICE_BLOCK,
    CURLFILETYPE_DEVICE_CHAR,
    CURLFILETYPE_NAMEDPIPE,
    CURLFILETYPE_SOCKET,
    CURLFILETYPE_DOOR,
    CURLFILETYPE_UNKNOWN
    } curlfiletype;
    struct curl_fileinfo {
    char *filename;
    curlfiletype filetype;
    time_t time;
    unsigned int perm;
    int uid;
    int gid;
    curl_off_t size;
    long int hardlinks;
    struct {
    char *time;
    char *perm;
    char *user;
    char *group;
    char *target;
    } strings;
    unsigned int flags;
    char * b_data;
    size_t b_size;
    size_t b_used;
    };
    typedef long (*curl_chunk_bgn_callback)(const void *transfer_info,
    void *ptr,
    int remains);
    typedef long (*curl_chunk_end_callback)(void *ptr);
    typedef int (*curl_fnmatch_callback)(void *ptr,
    const char *pattern,
    const char *string);
    typedef int (*curl_seek_callback)(void *instream,
    curl_off_t offset,
    int origin);
    typedef size_t (*curl_read_callback)(char *buffer,
    size_t size,
    size_t nitems,
    void *instream);
    typedef enum  {
    CURLSOCKTYPE_IPCXN,
    CURLSOCKTYPE_ACCEPT,
    CURLSOCKTYPE_LAST
    } curlsocktype;
    typedef int (*curl_sockopt_callback)(void *clientp,
    curl_socket_t curlfd,
    curlsocktype purpose);
    struct sockaddr {
    uint8_t sa_family;
    char sa_data[14];
    };
    struct curl_sockaddr {
    int family;
    int socktype;
    int protocol;
    unsigned int addrlen;
    struct sockaddr addr;
    };
    typedef curl_socket_t
    (*curl_opensocket_callback)(void *clientp,
    curlsocktype purpose,
    struct curl_sockaddr *address);
    typedef int
    (*curl_closesocket_callback)(void *clientp, curl_socket_t item);
    typedef enum {
    CURLIOE_OK,
    CURLIOE_UNKNOWNCMD,
    CURLIOE_FAILRESTART,
    CURLIOE_LAST
    } curlioerr;
    typedef enum  {
    CURLIOCMD_NOP,
    CURLIOCMD_RESTARTREAD,
    CURLIOCMD_LAST
    } curliocmd;
    typedef curlioerr (*curl_ioctl_callback)(CURL *handle,
    int cmd,
    void *clientp);
    typedef void *(*curl_malloc_callback)(size_t size);
    typedef void (*curl_free_callback)(void *ptr);
    typedef void *(*curl_realloc_callback)(void *ptr, size_t size);
    typedef char *(*curl_strdup_callback)(const char *str);
    typedef void *(*curl_calloc_callback)(size_t nmemb, size_t size);
    typedef enum {
    CURLINFO_TEXT = 0,
    CURLINFO_HEADER_IN,
    CURLINFO_HEADER_OUT,
    CURLINFO_DATA_IN,
    CURLINFO_DATA_OUT,
    CURLINFO_SSL_DATA_IN,
    CURLINFO_SSL_DATA_OUT,
    CURLINFO_END
    } curl_infotype;
    typedef int (*curl_debug_callback)
    (CURL *handle,
    curl_infotype type,
    char *data,
    size_t size,
    void *userptr);
    typedef enum {
    CURLE_OK = 0,
    CURLE_UNSUPPORTED_PROTOCOL,
    CURLE_FAILED_INIT,
    CURLE_URL_MALFORMAT,
    CURLE_NOT_BUILT_IN,
    CURLE_COULDNT_RESOLVE_PROXY,
    CURLE_COULDNT_RESOLVE_HOST,
    CURLE_COULDNT_CONNECT,
    CURLE_FTP_WEIRD_SERVER_REPLY,
    CURLE_REMOTE_ACCESS_DENIED,
    CURLE_FTP_ACCEPT_FAILED,
    CURLE_FTP_WEIRD_PASS_REPLY,
    CURLE_FTP_ACCEPT_TIMEOUT,
    CURLE_FTP_WEIRD_PASV_REPLY,
    CURLE_FTP_WEIRD_227_FORMAT,
    CURLE_FTP_CANT_GET_HOST,
    CURLE_HTTP2,
    CURLE_FTP_COULDNT_SET_TYPE,
    CURLE_PARTIAL_FILE,
    CURLE_FTP_COULDNT_RETR_FILE,
    CURLE_OBSOLETE20,
    CURLE_QUOTE_ERROR,
    CURLE_HTTP_RETURNED_ERROR,
    CURLE_WRITE_ERROR,
    CURLE_OBSOLETE24,
    CURLE_UPLOAD_FAILED,
    CURLE_READ_ERROR,
    CURLE_OUT_OF_MEMORY,
    CURLE_OPERATION_TIMEDOUT,
    CURLE_OBSOLETE29,
    CURLE_FTP_PORT_FAILED,
    CURLE_FTP_COULDNT_USE_REST,
    CURLE_OBSOLETE32,
    CURLE_RANGE_ERROR,
    CURLE_HTTP_POST_ERROR,
    CURLE_SSL_CONNECT_ERROR,
    CURLE_BAD_DOWNLOAD_RESUME,
    CURLE_FILE_COULDNT_READ_FILE,
    CURLE_LDAP_CANNOT_BIND,
    CURLE_LDAP_SEARCH_FAILED,
    CURLE_OBSOLETE40,
    CURLE_FUNCTION_NOT_FOUND,
    CURLE_ABORTED_BY_CALLBACK,
    CURLE_BAD_FUNCTION_ARGUMENT,
    CURLE_OBSOLETE44,
    CURLE_INTERFACE_FAILED,
    CURLE_OBSOLETE46,
    CURLE_TOO_MANY_REDIRECTS ,
    CURLE_UNKNOWN_OPTION,
    CURLE_TELNET_OPTION_SYNTAX ,
    CURLE_OBSOLETE50,
    CURLE_PEER_FAILED_VERIFICATION,
    CURLE_GOT_NOTHING,
    CURLE_SSL_ENGINE_NOTFOUND,
    CURLE_SSL_ENGINE_SETFAILED,
    CURLE_SEND_ERROR,
    CURLE_RECV_ERROR,
    CURLE_OBSOLETE57,
    CURLE_SSL_CERTPROBLEM,
    CURLE_SSL_CIPHER,
    CURLE_SSL_CACERT,
    CURLE_BAD_CONTENT_ENCODING,
    CURLE_LDAP_INVALID_URL,
    CURLE_FILESIZE_EXCEEDED,
    CURLE_USE_SSL_FAILED,
    CURLE_SEND_FAIL_REWIND,
    CURLE_SSL_ENGINE_INITFAILED,
    CURLE_LOGIN_DENIED,
    CURLE_TFTP_NOTFOUND,
    CURLE_TFTP_PERM,
    CURLE_REMOTE_DISK_FULL,
    CURLE_TFTP_ILLEGAL,
    CURLE_TFTP_UNKNOWNID,
    CURLE_REMOTE_FILE_EXISTS,
    CURLE_TFTP_NOSUCHUSER,
    CURLE_CONV_FAILED,
    CURLE_CONV_REQD,
    CURLE_SSL_CACERT_BADFILE,
    CURLE_REMOTE_FILE_NOT_FOUND,
    CURLE_SSH,
    CURLE_SSL_SHUTDOWN_FAILED,
    CURLE_AGAIN,
    CURLE_SSL_CRL_BADFILE,
    CURLE_SSL_ISSUER_ERROR,
    CURLE_FTP_PRET_FAILED,
    CURLE_RTSP_CSEQ_ERROR,
    CURLE_RTSP_SESSION_ERROR,
    CURLE_FTP_BAD_FILE_LIST,
    CURLE_CHUNK_FAILED,
    CURLE_NO_CONNECTION_AVAILABLE,
    CURL_LAST
    } CURLcode;
    typedef CURLcode (*curl_conv_callback)(char *buffer, size_t length);
    typedef CURLcode (*curl_ssl_ctx_callback)(CURL *curl,
    void *ssl_ctx,
    void *userptr);
    typedef enum {
    CURLPROXY_HTTP = 0,
    CURLPROXY_HTTP_1_0 = 1,
    CURLPROXY_SOCKS4 = 4,
    CURLPROXY_SOCKS5 = 5,
    CURLPROXY_SOCKS4A = 6,
    CURLPROXY_SOCKS5_HOSTNAME = 7
    } curl_proxytype;
    enum curl_khtype {
    CURLKHTYPE_UNKNOWN,
    CURLKHTYPE_RSA1,
    CURLKHTYPE_RSA,
    CURLKHTYPE_DSS
    };
    struct curl_khkey {
    const char *key;
    size_t len;
    enum curl_khtype keytype;
    };
    enum curl_khstat {
    CURLKHSTAT_FINE_ADD_TO_FILE,
    CURLKHSTAT_FINE,
    CURLKHSTAT_REJECT,
    CURLKHSTAT_DEFER,
    CURLKHSTAT_LAST
    };
    enum curl_khmatch {
    CURLKHMATCH_OK,
    CURLKHMATCH_MISMATCH,
    CURLKHMATCH_MISSING,
    CURLKHMATCH_LAST
    };
    typedef int
    (*curl_sshkeycallback) (CURL *easy,
    const struct curl_khkey *knownkey,
    const struct curl_khkey *foundkey,
    enum curl_khmatch,
    void *clientp);
    typedef enum {
    CURLUSESSL_NONE,
    CURLUSESSL_TRY,
    CURLUSESSL_CONTROL,
    CURLUSESSL_ALL,
    CURLUSESSL_LAST
    } curl_usessl;
    typedef enum {
    CURLFTPSSL_CCC_NONE,
    CURLFTPSSL_CCC_PASSIVE,
    CURLFTPSSL_CCC_ACTIVE,
    CURLFTPSSL_CCC_LAST
    } curl_ftpccc;
    typedef enum {
    CURLFTPAUTH_DEFAULT,
    CURLFTPAUTH_SSL,
    CURLFTPAUTH_TLS,
    CURLFTPAUTH_LAST
    } curl_ftpauth;
    typedef enum {
    CURLFTP_CREATE_DIR_NONE,
    CURLFTP_CREATE_DIR,
    CURLFTP_CREATE_DIR_RETRY,
    CURLFTP_CREATE_DIR_LAST
    } curl_ftpcreatedir;
    typedef enum {
    CURLFTPMETHOD_DEFAULT,
    CURLFTPMETHOD_MULTICWD,
    CURLFTPMETHOD_NOCWD,
    CURLFTPMETHOD_SINGLECWD,
    CURLFTPMETHOD_LAST
    } curl_ftpmethod;
    typedef enum {
    CURLOPT_WRITEDATA = 10000 + 1,
    CURLOPT_URL = 10000 + 2,
    CURLOPT_PORT = 0 + 3,
    CURLOPT_PROXY = 10000 + 4,
    CURLOPT_USERPWD = 10000 + 5,
    CURLOPT_PROXYUSERPWD = 10000 + 6,
    CURLOPT_RANGE = 10000 + 7,
    CURLOPT_READDATA = 10000 + 9,
    CURLOPT_ERRORBUFFER = 10000 + 10,
    CURLOPT_WRITEFUNCTION = 20000 + 11,
    CURLOPT_READFUNCTION = 20000 + 12,
    CURLOPT_TIMEOUT = 0 + 13,
    CURLOPT_INFILESIZE = 0 + 14,
    CURLOPT_POSTFIELDS = 10000 + 15,
    CURLOPT_REFERER = 10000 + 16,
    CURLOPT_FTPPORT = 10000 + 17,
    CURLOPT_USERAGENT = 10000 + 18,
    CURLOPT_LOW_SPEED_LIMIT = 0 + 19,
    CURLOPT_LOW_SPEED_TIME = 0 + 20,
    CURLOPT_RESUME_FROM = 0 + 21,
    CURLOPT_COOKIE = 10000 + 22,
    CURLOPT_HTTPHEADER = 10000 + 23,
    CURLOPT_HTTPPOST = 10000 + 24,
    CURLOPT_SSLCERT = 10000 + 25,
    CURLOPT_KEYPASSWD = 10000 + 26,
    CURLOPT_CRLF = 0 + 27,
    CURLOPT_QUOTE = 10000 + 28,
    CURLOPT_HEADERDATA = 10000 + 29,
    CURLOPT_COOKIEFILE = 10000 + 31,
    CURLOPT_SSLVERSION = 0 + 32,
    CURLOPT_TIMECONDITION = 0 + 33,
    CURLOPT_TIMEVALUE = 0 + 34,
    CURLOPT_CUSTOMREQUEST = 10000 + 36,
    CURLOPT_STDERR = 10000 + 37,
    CURLOPT_POSTQUOTE = 10000 + 39,
    CURLOPT_OBSOLETE40 = 10000 + 40,
    CURLOPT_VERBOSE = 0 + 41,
    CURLOPT_HEADER = 0 + 42,
    CURLOPT_NOPROGRESS = 0 + 43,
    CURLOPT_NOBODY = 0 + 44,
    CURLOPT_FAILONERROR = 0 + 45,
    CURLOPT_UPLOAD = 0 + 46,
    CURLOPT_POST = 0 + 47,
    CURLOPT_DIRLISTONLY = 0 + 48,
    CURLOPT_APPEND = 0 + 50,
    CURLOPT_NETRC = 0 + 51,
    CURLOPT_FOLLOWLOCATION = 0 + 52,
    CURLOPT_TRANSFERTEXT = 0 + 53,
    CURLOPT_PUT = 0 + 54,
    CURLOPT_PROGRESSFUNCTION = 20000 + 56,
    CURLOPT_PROGRESSDATA = 10000 + 57,
    CURLOPT_AUTOREFERER = 0 + 58,
    CURLOPT_PROXYPORT = 0 + 59,
    CURLOPT_POSTFIELDSIZE = 0 + 60,
    CURLOPT_HTTPPROXYTUNNEL = 0 + 61,
    CURLOPT_INTERFACE = 10000 + 62,
    CURLOPT_KRBLEVEL = 10000 + 63,
    CURLOPT_SSL_VERIFYPEER = 0 + 64,
    CURLOPT_CAINFO = 10000 + 65,
    CURLOPT_MAXREDIRS = 0 + 68,
    CURLOPT_FILETIME = 0 + 69,
    CURLOPT_TELNETOPTIONS = 10000 + 70,
    CURLOPT_MAXCONNECTS = 0 + 71,
    CURLOPT_OBSOLETE72 = 0 + 72,
    CURLOPT_FRESH_CONNECT = 0 + 74,
    CURLOPT_FORBID_REUSE = 0 + 75,
    CURLOPT_RANDOM_FILE = 10000 + 76,
    CURLOPT_EGDSOCKET = 10000 + 77,
    CURLOPT_CONNECTTIMEOUT = 0 + 78,
    CURLOPT_HEADERFUNCTION = 20000 + 79,
    CURLOPT_HTTPGET = 0 + 80,
    CURLOPT_SSL_VERIFYHOST = 0 + 81,
    CURLOPT_COOKIEJAR = 10000 + 82,
    CURLOPT_SSL_CIPHER_LIST = 10000 + 83,
    CURLOPT_HTTP_VERSION = 0 + 84,
    CURLOPT_FTP_USE_EPSV = 0 + 85,
    CURLOPT_SSLCERTTYPE = 10000 + 86,
    CURLOPT_SSLKEY = 10000 + 87,
    CURLOPT_SSLKEYTYPE = 10000 + 88,
    CURLOPT_SSLENGINE = 10000 + 89,
    CURLOPT_SSLENGINE_DEFAULT = 0 + 90,
    CURLOPT_DNS_USE_GLOBAL_CACHE = 0 + 91,
    CURLOPT_DNS_CACHE_TIMEOUT = 0 + 92,
    CURLOPT_PREQUOTE = 10000 + 93,
    CURLOPT_DEBUGFUNCTION = 20000 + 94,
    CURLOPT_DEBUGDATA = 10000 + 95,
    CURLOPT_COOKIESESSION = 0 + 96,
    CURLOPT_CAPATH = 10000 + 97,
    CURLOPT_BUFFERSIZE = 0 + 98,
    CURLOPT_NOSIGNAL = 0 + 99,
    CURLOPT_SHARE = 10000 + 100,
    CURLOPT_PROXYTYPE = 0 + 101,
    CURLOPT_ACCEPT_ENCODING = 10000 + 102,
    CURLOPT_PRIVATE = 10000 + 103,
    CURLOPT_HTTP200ALIASES = 10000 + 104,
    CURLOPT_UNRESTRICTED_AUTH = 0 + 105,
    CURLOPT_FTP_USE_EPRT = 0 + 106,
    CURLOPT_HTTPAUTH = 0 + 107,
    CURLOPT_SSL_CTX_FUNCTION = 20000 + 108,
    CURLOPT_SSL_CTX_DATA = 10000 + 109,
    CURLOPT_FTP_CREATE_MISSING_DIRS = 0 + 110,
    CURLOPT_PROXYAUTH = 0 + 111,
    CURLOPT_FTP_RESPONSE_TIMEOUT = 0 + 112,
    CURLOPT_IPRESOLVE = 0 + 113,
    CURLOPT_MAXFILESIZE = 0 + 114,
    CURLOPT_INFILESIZE_LARGE = 30000 + 115,
    CURLOPT_RESUME_FROM_LARGE = 30000 + 116,
    CURLOPT_MAXFILESIZE_LARGE = 30000 + 117,
    CURLOPT_NETRC_FILE = 10000 + 118,
    CURLOPT_USE_SSL = 0 + 119,
    CURLOPT_POSTFIELDSIZE_LARGE = 30000 + 120,
    CURLOPT_TCP_NODELAY = 0 + 121,
    CURLOPT_FTPSSLAUTH = 0 + 129,
    CURLOPT_IOCTLFUNCTION = 20000 + 130,
    CURLOPT_IOCTLDATA = 10000 + 131,
    CURLOPT_FTP_ACCOUNT = 10000 + 134,
    CURLOPT_COOKIELIST = 10000 + 135,
    CURLOPT_IGNORE_CONTENT_LENGTH = 0 + 136,
    CURLOPT_FTP_SKIP_PASV_IP = 0 + 137,
    CURLOPT_FTP_FILEMETHOD = 0 + 138,
    CURLOPT_LOCALPORT = 0 + 139,
    CURLOPT_LOCALPORTRANGE = 0 + 140,
    CURLOPT_CONNECT_ONLY = 0 + 141,
    CURLOPT_CONV_FROM_NETWORK_FUNCTION = 20000 + 142,
    CURLOPT_CONV_TO_NETWORK_FUNCTION = 20000 + 143,
    CURLOPT_CONV_FROM_UTF8_FUNCTION = 20000 + 144,
    CURLOPT_MAX_SEND_SPEED_LARGE = 30000 + 145,
    CURLOPT_MAX_RECV_SPEED_LARGE = 30000 + 146,
    CURLOPT_FTP_ALTERNATIVE_TO_USER = 10000 + 147,
    CURLOPT_SOCKOPTFUNCTION = 20000 + 148,
    CURLOPT_SOCKOPTDATA = 10000 + 149,
    CURLOPT_SSL_SESSIONID_CACHE = 0 + 150,
    CURLOPT_SSH_AUTH_TYPES = 0 + 151,
    CURLOPT_SSH_PUBLIC_KEYFILE = 10000 + 152,
    CURLOPT_SSH_PRIVATE_KEYFILE = 10000 + 153,
    CURLOPT_FTP_SSL_CCC = 0 + 154,
    CURLOPT_TIMEOUT_MS = 0 + 155,
    CURLOPT_CONNECTTIMEOUT_MS = 0 + 156,
    CURLOPT_HTTP_TRANSFER_DECODING = 0 + 157,
    CURLOPT_HTTP_CONTENT_DECODING = 0 + 158,
    CURLOPT_NEW_FILE_PERMS = 0 + 159,
    CURLOPT_NEW_DIRECTORY_PERMS = 0 + 160,
    CURLOPT_POSTREDIR = 0 + 161,
    CURLOPT_SSH_HOST_PUBLIC_KEY_MD5 = 10000 + 162,
    CURLOPT_OPENSOCKETFUNCTION = 20000 + 163,
    CURLOPT_OPENSOCKETDATA = 10000 + 164,
    CURLOPT_COPYPOSTFIELDS = 10000 + 165,
    CURLOPT_PROXY_TRANSFER_MODE = 0 + 166,
    CURLOPT_SEEKFUNCTION = 20000 + 167,
    CURLOPT_SEEKDATA = 10000 + 168,
    CURLOPT_CRLFILE = 10000 + 169,
    CURLOPT_ISSUERCERT = 10000 + 170,
    CURLOPT_ADDRESS_SCOPE = 0 + 171,
    CURLOPT_CERTINFO = 0 + 172,
    CURLOPT_USERNAME = 10000 + 173,
    CURLOPT_PASSWORD = 10000 + 174,
    CURLOPT_PROXYUSERNAME = 10000 + 175,
    CURLOPT_PROXYPASSWORD = 10000 + 176,
    CURLOPT_NOPROXY = 10000 + 177,
    CURLOPT_TFTP_BLKSIZE = 0 + 178,
    CURLOPT_SOCKS5_GSSAPI_SERVICE = 10000 + 179,
    CURLOPT_SOCKS5_GSSAPI_NEC = 0 + 180,
    CURLOPT_PROTOCOLS = 0 + 181,
    CURLOPT_REDIR_PROTOCOLS = 0 + 182,
    CURLOPT_SSH_KNOWNHOSTS = 10000 + 183,
    CURLOPT_SSH_KEYFUNCTION = 20000 + 184,
    CURLOPT_SSH_KEYDATA = 10000 + 185,
    CURLOPT_MAIL_FROM = 10000 + 186,
    CURLOPT_MAIL_RCPT = 10000 + 187,
    CURLOPT_FTP_USE_PRET = 0 + 188,
    CURLOPT_RTSP_REQUEST = 0 + 189,
    CURLOPT_RTSP_SESSION_ID = 10000 + 190,
    CURLOPT_RTSP_STREAM_URI = 10000 + 191,
    CURLOPT_RTSP_TRANSPORT = 10000 + 192,
    CURLOPT_RTSP_CLIENT_CSEQ = 0 + 193,
    CURLOPT_RTSP_SERVER_CSEQ = 0 + 194,
    CURLOPT_INTERLEAVEDATA = 10000 + 195,
    CURLOPT_INTERLEAVEFUNCTION = 20000 + 196,
    CURLOPT_WILDCARDMATCH = 0 + 197,
    CURLOPT_CHUNK_BGN_FUNCTION = 20000 + 198,
    CURLOPT_CHUNK_END_FUNCTION = 20000 + 199,
    CURLOPT_FNMATCH_FUNCTION = 20000 + 200,
    CURLOPT_CHUNK_DATA = 10000 + 201,
    CURLOPT_FNMATCH_DATA = 10000 + 202,
    CURLOPT_RESOLVE = 10000 + 203,
    CURLOPT_TLSAUTH_USERNAME = 10000 + 204,
    CURLOPT_TLSAUTH_PASSWORD = 10000 + 205,
    CURLOPT_TLSAUTH_TYPE = 10000 + 206,
    CURLOPT_TRANSFER_ENCODING = 0 + 207,
    CURLOPT_CLOSESOCKETFUNCTION = 20000 + 208,
    CURLOPT_CLOSESOCKETDATA = 10000 + 209,
    CURLOPT_GSSAPI_DELEGATION = 0 + 210,
    CURLOPT_DNS_SERVERS = 10000 + 211,
    CURLOPT_ACCEPTTIMEOUT_MS = 0 + 212,
    CURLOPT_TCP_KEEPALIVE = 0 + 213,
    CURLOPT_TCP_KEEPIDLE = 0 + 214,
    CURLOPT_TCP_KEEPINTVL = 0 + 215,
    CURLOPT_SSL_OPTIONS = 0 + 216,
    CURLOPT_MAIL_AUTH = 10000 + 217,
    CURLOPT_SASL_IR = 0 + 218,
    CURLOPT_XFERINFOFUNCTION = 20000 + 219,
    CURLOPT_XOAUTH2_BEARER = 10000 + 220,
    CURLOPT_DNS_INTERFACE = 10000 + 221,
    CURLOPT_DNS_LOCAL_IP4 = 10000 + 222,
    CURLOPT_DNS_LOCAL_IP6 = 10000 + 223,
    CURLOPT_LOGIN_OPTIONS = 10000 + 224,
    CURLOPT_SSL_ENABLE_NPN = 0 + 225,
    CURLOPT_SSL_ENABLE_ALPN = 0 + 226,
    CURLOPT_EXPECT_100_TIMEOUT_MS = 0 + 227,
    CURLOPT_PROXYHEADER = 10000 + 228,
    CURLOPT_HEADEROPT = 0 + 229,
    CURLOPT_LASTENTRY
    } CURLoption;
    enum {
    CURL_HTTP_VERSION_NONE,
    CURL_HTTP_VERSION_1_0,
    CURL_HTTP_VERSION_1_1,
    CURL_HTTP_VERSION_2_0,
    CURL_HTTP_VERSION_LAST
    };
    enum {
    CURL_RTSPREQ_NONE,
    CURL_RTSPREQ_OPTIONS,
    CURL_RTSPREQ_DESCRIBE,
    CURL_RTSPREQ_ANNOUNCE,
    CURL_RTSPREQ_SETUP,
    CURL_RTSPREQ_PLAY,
    CURL_RTSPREQ_PAUSE,
    CURL_RTSPREQ_TEARDOWN,
    CURL_RTSPREQ_GET_PARAMETER,
    CURL_RTSPREQ_SET_PARAMETER,
    CURL_RTSPREQ_RECORD,
    CURL_RTSPREQ_RECEIVE,
    CURL_RTSPREQ_LAST
    };
    enum CURL_NETRC_OPTION {
    CURL_NETRC_IGNORED,
    CURL_NETRC_OPTIONAL,
    CURL_NETRC_REQUIRED,
    CURL_NETRC_LAST
    };
    enum {
    CURL_SSLVERSION_DEFAULT,
    CURL_SSLVERSION_TLSv1,
    CURL_SSLVERSION_SSLv2,
    CURL_SSLVERSION_SSLv3,
    CURL_SSLVERSION_TLSv1_0,
    CURL_SSLVERSION_TLSv1_1,
    CURL_SSLVERSION_TLSv1_2,
    CURL_SSLVERSION_LAST
    };
    enum CURL_TLSAUTH {
    CURL_TLSAUTH_NONE,
    CURL_TLSAUTH_SRP,
    CURL_TLSAUTH_LAST
    };
    typedef enum {
    CURL_TIMECOND_NONE,
    CURL_TIMECOND_IFMODSINCE,
    CURL_TIMECOND_IFUNMODSINCE,
    CURL_TIMECOND_LASTMOD,
    CURL_TIMECOND_LAST
    } curl_TimeCond;
    int (curl_strequal)(const char *s1, const char *s2);
    int (curl_strnequal)(const char *s1, const char *s2, size_t n);
    typedef enum {
    CURLFORM_NOTHING,
    CURLFORM_COPYNAME,
    CURLFORM_PTRNAME,
    CURLFORM_NAMELENGTH,
    CURLFORM_COPYCONTENTS,
    CURLFORM_PTRCONTENTS,
    CURLFORM_CONTENTSLENGTH,
    CURLFORM_FILECONTENT,
    CURLFORM_ARRAY,
    CURLFORM_OBSOLETE,
    CURLFORM_FILE,
    CURLFORM_BUFFER,
    CURLFORM_BUFFERPTR,
    CURLFORM_BUFFERLENGTH,
    CURLFORM_CONTENTTYPE,
    CURLFORM_CONTENTHEADER,
    CURLFORM_FILENAME,
    CURLFORM_END,
    CURLFORM_OBSOLETE2,
    CURLFORM_STREAM,
    CURLFORM_LASTENTRY
    } CURLformoption;
    struct curl_forms {
    CURLformoption option;
    const char     *value;
    };
    typedef enum {
    CURL_FORMADD_OK,
    CURL_FORMADD_MEMORY,
    CURL_FORMADD_OPTION_TWICE,
    CURL_FORMADD_NULL,
    CURL_FORMADD_UNKNOWN_OPTION,
    CURL_FORMADD_INCOMPLETE,
    CURL_FORMADD_ILLEGAL_ARRAY,
    CURL_FORMADD_DISABLED,
    CURL_FORMADD_LAST
    } CURLFORMcode;
    CURLFORMcode curl_formadd(struct curl_httppost **httppost,
    struct curl_httppost **last_post,
    ...);
    typedef size_t (*curl_formget_callback)(void *arg, const char *buf,
    size_t len);
    int curl_formget(struct curl_httppost *form, void *arg,
    curl_formget_callback append);
    void curl_formfree(struct curl_httppost *form);
    char *curl_getenv(const char *variable);
    char *curl_version(void);
    char *curl_easy_escape(CURL *handle,
    const char *string,
    int length);
    char *curl_escape(const char *string,
    int length);
    char *curl_easy_unescape(CURL *handle,
    const char *string,
    int length,
    int *outlength);
    char *curl_unescape(const char *string,
    int length);
    void curl_free(void *p);
    CURLcode curl_global_init(long flags);
    CURLcode curl_global_init_mem(long flags,
    curl_malloc_callback m,
    curl_free_callback f,
    curl_realloc_callback r,
    curl_strdup_callback s,
    curl_calloc_callback c);
    void curl_global_cleanup(void);
    struct curl_slist {
    char *data;
    struct curl_slist *next;
    };
    struct curl_slist *curl_slist_append(struct curl_slist *,
    const char *);
    void curl_slist_free_all(struct curl_slist *);
    time_t curl_getdate(const char *p, const time_t *unused);
    struct curl_certinfo {
    int num_of_certs;
    struct curl_slist **certinfo;
    };
    typedef enum {
    CURLSSLBACKEND_NONE = 0,
    CURLSSLBACKEND_OPENSSL = 1,
    CURLSSLBACKEND_GNUTLS = 2,
    CURLSSLBACKEND_NSS = 3,
    CURLSSLBACKEND_QSOSSL = 4,
    CURLSSLBACKEND_GSKIT = 5,
    CURLSSLBACKEND_POLARSSL = 6,
    CURLSSLBACKEND_CYASSL = 7,
    CURLSSLBACKEND_SCHANNEL = 8,
    CURLSSLBACKEND_DARWINSSL = 9,
    CURLSSLBACKEND_AXTLS = 10
    } curl_sslbackend;
    struct curl_tlssessioninfo {
    curl_sslbackend backend;
    void *internals;
    };
    typedef enum {
    CURLINFO_NONE,
    CURLINFO_EFFECTIVE_URL    =1048576 + 1,
    CURLINFO_RESPONSE_CODE    =2097152   + 2,
    CURLINFO_TOTAL_TIME       =3145728 + 3,
    CURLINFO_NAMELOOKUP_TIME  =3145728 + 4,
    CURLINFO_CONNECT_TIME     =3145728 + 5,
    CURLINFO_PRETRANSFER_TIME =3145728 + 6,
    CURLINFO_SIZE_UPLOAD      =3145728 + 7,
    CURLINFO_SIZE_DOWNLOAD    =3145728 + 8,
    CURLINFO_SPEED_DOWNLOAD   =3145728 + 9,
    CURLINFO_SPEED_UPLOAD     =3145728 + 10,
    CURLINFO_HEADER_SIZE      =2097152   + 11,
    CURLINFO_REQUEST_SIZE     =2097152   + 12,
    CURLINFO_SSL_VERIFYRESULT =2097152   + 13,
    CURLINFO_FILETIME         =2097152   + 14,
    CURLINFO_CONTENT_LENGTH_DOWNLOAD   =3145728 + 15,
    CURLINFO_CONTENT_LENGTH_UPLOAD     =3145728 + 16,
    CURLINFO_STARTTRANSFER_TIME =3145728 + 17,
    CURLINFO_CONTENT_TYPE     =1048576 + 18,
    CURLINFO_REDIRECT_TIME    =3145728 + 19,
    CURLINFO_REDIRECT_COUNT   =2097152   + 20,
    CURLINFO_PRIVATE          =1048576 + 21,
    CURLINFO_HTTP_CONNECTCODE =2097152   + 22,
    CURLINFO_HTTPAUTH_AVAIL   =2097152   + 23,
    CURLINFO_PROXYAUTH_AVAIL  =2097152   + 24,
    CURLINFO_OS_ERRNO         =2097152   + 25,
    CURLINFO_NUM_CONNECTS     =2097152   + 26,
    CURLINFO_SSL_ENGINES      =4194304  + 27,
    CURLINFO_COOKIELIST       =4194304  + 28,
    CURLINFO_LASTSOCKET       =2097152   + 29,
    CURLINFO_FTP_ENTRY_PATH   =1048576 + 30,
    CURLINFO_REDIRECT_URL     =1048576 + 31,
    CURLINFO_PRIMARY_IP       =1048576 + 32,
    CURLINFO_APPCONNECT_TIME  =3145728 + 33,
    CURLINFO_CERTINFO         =4194304  + 34,
    CURLINFO_CONDITION_UNMET  =2097152   + 35,
    CURLINFO_RTSP_SESSION_ID  =1048576 + 36,
    CURLINFO_RTSP_CLIENT_CSEQ =2097152   + 37,
    CURLINFO_RTSP_SERVER_CSEQ =2097152   + 38,
    CURLINFO_RTSP_CSEQ_RECV   =2097152   + 39,
    CURLINFO_PRIMARY_PORT     =2097152   + 40,
    CURLINFO_LOCAL_IP         =1048576 + 41,
    CURLINFO_LOCAL_PORT       =2097152   + 42,
    CURLINFO_TLS_SESSION      =4194304  + 43,
    CURLINFO_LASTONE          = 43
    } CURLINFO;
    typedef enum {
    CURLCLOSEPOLICY_NONE,
    CURLCLOSEPOLICY_OLDEST,
    CURLCLOSEPOLICY_LEAST_RECENTLY_USED,
    CURLCLOSEPOLICY_LEAST_TRAFFIC,
    CURLCLOSEPOLICY_SLOWEST,
    CURLCLOSEPOLICY_CALLBACK,
    CURLCLOSEPOLICY_LAST
    } curl_closepolicy;
    typedef enum {
    CURL_LOCK_DATA_NONE = 0,
    CURL_LOCK_DATA_SHARE,
    CURL_LOCK_DATA_COOKIE,
    CURL_LOCK_DATA_DNS,
    CURL_LOCK_DATA_SSL_SESSION,
    CURL_LOCK_DATA_CONNECT,
    CURL_LOCK_DATA_LAST
    } curl_lock_data;
    typedef enum {
    CURL_LOCK_ACCESS_NONE = 0,
    CURL_LOCK_ACCESS_SHARED = 1,
    CURL_LOCK_ACCESS_SINGLE = 2,
    CURL_LOCK_ACCESS_LAST
    } curl_lock_access;
    typedef void (*curl_lock_function)(CURL *handle,
    curl_lock_data data,
    curl_lock_access locktype,
    void *userptr);
    typedef void (*curl_unlock_function)(CURL *handle,
    curl_lock_data data,
    void *userptr);
    typedef void CURLSH;
    typedef enum {
    CURLSHE_OK,
    CURLSHE_BAD_OPTION,
    CURLSHE_IN_USE,
    CURLSHE_INVALID,
    CURLSHE_NOMEM,
    CURLSHE_NOT_BUILT_IN,
    CURLSHE_LAST
    } CURLSHcode;
    typedef enum {
    CURLSHOPT_NONE,
    CURLSHOPT_SHARE,
    CURLSHOPT_UNSHARE,
    CURLSHOPT_LOCKFUNC,
    CURLSHOPT_UNLOCKFUNC,
    CURLSHOPT_USERDATA,
    CURLSHOPT_LAST
    } CURLSHoption;
    CURLSH *curl_share_init(void);
    CURLSHcode curl_share_setopt(CURLSH *, CURLSHoption option, ...);
    CURLSHcode curl_share_cleanup(CURLSH *);
    typedef enum {
    CURLVERSION_FIRST,
    CURLVERSION_SECOND,
    CURLVERSION_THIRD,
    CURLVERSION_FOURTH,
    CURLVERSION_LAST
    } CURLversion;
    typedef struct {
    CURLversion age;
    const char *version;
    unsigned int version_num;
    const char *host;
    int features;
    const char *ssl_version;
    long ssl_version_num;
    const char *libz_version;
    const char * const *protocols;
    const char *ares;
    int ares_num;
    const char *libidn;
    int iconv_ver_num;
    const char *libssh_version;
    } curl_version_info_data;
    curl_version_info_data *curl_version_info(CURLversion);
    const char *curl_easy_strerror(CURLcode);
    const char *curl_share_strerror(CURLSHcode);
    CURLcode curl_easy_pause(CURL *handle, int bitmask);
    CURL *curl_easy_init(void);
    CURLcode curl_easy_setopt(CURL *curl, CURLoption option, ...);
    CURLcode curl_easy_perform(CURL *curl);
    void curl_easy_cleanup(CURL *curl);
    CURLcode curl_easy_getinfo(CURL *curl, CURLINFO info, ...);
    CURL* curl_easy_duphandle(CURL *curl);
    void curl_easy_reset(CURL *curl);
    CURLcode curl_easy_recv(CURL *curl, void *buffer, size_t buflen,
    size_t *n);
    CURLcode curl_easy_send(CURL *curl, const void *buffer,
    size_t buflen, size_t *n);
    typedef void CURLM;
    typedef enum {
    CURLM_CALL_MULTI_PERFORM = -1,
    CURLM_OK,
    CURLM_BAD_HANDLE,
    CURLM_BAD_EASY_HANDLE,
    CURLM_OUT_OF_MEMORY,
    CURLM_INTERNAL_ERROR,
    CURLM_BAD_SOCKET,
    CURLM_UNKNOWN_OPTION,
    CURLM_ADDED_ALREADY,
    CURLM_LAST
    } CURLMcode;
    typedef enum {
    CURLMSG_NONE,
    CURLMSG_DONE,
    CURLMSG_LAST
    } CURLMSG;
    struct CURLMsg {
    CURLMSG msg;
    CURL *easy_handle;
    union {
    void *whatever;
    CURLcode result;
    } data;
    };
    typedef struct CURLMsg CURLMsg;
    struct curl_waitfd {
    curl_socket_t fd;
    short events;
    short revents;
    };
    typedef struct fd_set {
            unsigned int   fd_count;               /* how many are SET? */
            curl_socket_t  fd_array[64]; //FD_SETSIZE, 64 on my machine, TOFIX
    } fd_set;
    CURLM *curl_multi_init(void);
    CURLMcode curl_multi_add_handle(CURLM *multi_handle,
    CURL *curl_handle);
    CURLMcode curl_multi_remove_handle(CURLM *multi_handle,
    CURL *curl_handle);
    CURLMcode curl_multi_fdset(CURLM *multi_handle,
    fd_set *read_fd_set,
    fd_set *write_fd_set,
    fd_set *exc_fd_set,
    int *max_fd);
    CURLMcode curl_multi_wait(CURLM *multi_handle,
    struct curl_waitfd extra_fds[],
    unsigned int extra_nfds,
    int timeout_ms,
    int *ret);
    CURLMcode curl_multi_perform(CURLM *multi_handle,
    int *running_handles);
    CURLMcode curl_multi_cleanup(CURLM *multi_handle);
    CURLMsg *curl_multi_info_read(CURLM *multi_handle,
    int *msgs_in_queue);
    const char *curl_multi_strerror(CURLMcode);
    typedef int (*curl_socket_callback)(CURL *easy,
    curl_socket_t s,
    int what,
    void *userp,
    void *socketp);
    typedef int (*curl_multi_timer_callback)(CURLM *multi,
    long timeout_ms,
    void *userp);
    CURLMcode curl_multi_socket(CURLM *multi_handle, curl_socket_t s,
    int *running_handles);
    CURLMcode curl_multi_socket_action(CURLM *multi_handle,
    curl_socket_t s,
    int ev_bitmask,
    int *running_handles);
    CURLMcode curl_multi_socket_all(CURLM *multi_handle,
    int *running_handles);
    CURLMcode curl_multi_timeout(CURLM *multi_handle,
    long *milliseconds);
    typedef enum {
    CURLMOPT_SOCKETFUNCTION = 20000 + 1,
    CURLMOPT_SOCKETDATA = 10000 + 2,
    CURLMOPT_PIPELINING = 0 + 3,
    CURLMOPT_TIMERFUNCTION = 20000 + 4,
    CURLMOPT_TIMERDATA = 10000 + 5,
    CURLMOPT_MAXCONNECTS = 0 + 6,
    CURLMOPT_MAX_HOST_CONNECTIONS = 0 + 7,
    CURLMOPT_MAX_PIPELINE_LENGTH = 0 + 8,
    CURLMOPT_CONTENT_LENGTH_PENALTY_SIZE = 30000 + 9,
    CURLMOPT_CHUNK_LENGTH_PENALTY_SIZE = 30000 + 10,
    CURLMOPT_PIPELINING_SITE_BL = 10000 + 11,
    CURLMOPT_PIPELINING_SERVER_BL = 10000 + 12,
    CURLMOPT_MAX_TOTAL_CONNECTIONS = 0 + 13,
    CURLMOPT_LASTENTRY
    } CURLMoption;
    CURLMcode curl_multi_setopt(CURLM *multi_handle,
    CURLMoption option, ...);
    CURLMcode curl_multi_assign(CURLM *multi_handle,
    curl_socket_t sockfd, void *sockp);
    ]])

    return curl
kind: ConfigMap
metadata:
  name: conflua
---
# Source: charlescd/charts/ingress-nginx/templates/controller-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: controller
  name: charlescd-ingress-nginx-controller
data:
---
# Source: charlescd/charts/keycloak/templates/configmap-startup.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: keycloak-startup
  labels:
    helm.sh/chart: keycloak-9.8.1
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "11.0.2"
    app.kubernetes.io/managed-by: Helm
data:
  contextPath.cli: |
    embed-server --server-config=standalone-ha.xml --std-out=echo
    batch
    /subsystem=keycloak-server/:write-attribute(name=web-context,value=keycloak/auth)
    /subsystem=keycloak-server/spi=hostname/provider=default:write-attribute(name=properties.frontendUrl, value="http://charles.info.example/keycloak/auth")
    run-batch
    stop-embedded-server
    
  keycloak.cli: |
    embed-server --server-config=standalone-ha.xml --std-out=echo
    batch
    
    echo Configuring node identifier
    
    ## Sets the node identifier to the node name (= pod name). Node identifiers have to be unique. They can have a
    ## maximum length of 23 characters. Thus, the chart's fullname template truncates its length accordingly.
    /subsystem=transactions:write-attribute(name=node-identifier, value=${jboss.node.name})
    
    echo Finished configuring node identifier
    
    run-batch
    stop-embedded-server
---
# Source: charlescd/charts/redis/templates/configmap-scripts.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: charlescd-redis-scripts
  namespace: "charles"
  labels:
    app: redis
    chart: redis-12.6.0
    heritage: Helm
    release: charlescd
data:
  start-master.sh: |
    #!/bin/bash
    if [[ -n $REDIS_PASSWORD_FILE ]]; then
      password_aux=`cat ${REDIS_PASSWORD_FILE}`
      export REDIS_PASSWORD=$password_aux
    fi
    if [[ ! -f /opt/bitnami/redis/etc/master.conf ]];then
      cp /opt/bitnami/redis/mounted-etc/master.conf /opt/bitnami/redis/etc/master.conf
    fi
    if [[ ! -f /opt/bitnami/redis/etc/redis.conf ]];then
      cp /opt/bitnami/redis/mounted-etc/redis.conf /opt/bitnami/redis/etc/redis.conf
    fi
    ARGS=("--port" "${REDIS_PORT}")
    ARGS+=("--requirepass" "${REDIS_PASSWORD}")
    ARGS+=("--masterauth" "${REDIS_PASSWORD}")
    ARGS+=("--include" "/opt/bitnami/redis/etc/redis.conf")
    ARGS+=("--include" "/opt/bitnami/redis/etc/master.conf")
    exec /run.sh "${ARGS[@]}"
---
# Source: charlescd/charts/redis/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: charlescd-redis
  namespace: "charles"
  labels:
    app: redis
    chart: redis-12.6.0
    heritage: Helm
    release: charlescd
data:
  redis.conf: |-
    # User-supplied configuration:
    # Enable AOF https://redis.io/topics/persistence#append-only-file
    appendonly yes
    # Disable RDB persistence, AOF persistence already enabled.
    save ""
  master.conf: |-
    dir /data
    rename-command FLUSHDB ""
    rename-command FLUSHALL ""
  replica.conf: |-
    dir /data
    slave-read-only yes
    rename-command FLUSHDB ""
    rename-command FLUSHALL ""
---
# Source: charlescd/charts/redis/templates/health-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: charlescd-redis-health
  namespace: "charles"
  labels:
    app: redis
    chart: redis-12.6.0
    heritage: Helm
    release: charlescd
data:
  ping_readiness_local.sh: |-
    #!/bin/bash
    export REDISCLI_AUTH="$REDIS_PASSWORD"
    response=$(
      timeout -s 3 $1 \
      redis-cli \
        -h localhost \
        -p $REDIS_PORT \
        ping
    )
    if [ "$response" != "PONG" ]; then
      echo "$response"
      exit 1
    fi
  ping_liveness_local.sh: |-
    #!/bin/bash
    export REDISCLI_AUTH="$REDIS_PASSWORD"
    response=$(
      timeout -s 3 $1 \
      redis-cli \
        -h localhost \
        -p $REDIS_PORT \
        ping
    )
    if [ "$response" != "PONG" ] && [ "$response" != "LOADING Redis is loading the dataset in memory" ]; then
      echo "$response"
      exit 1
    fi
  ping_readiness_master.sh: |-
    #!/bin/bash
    export REDISCLI_AUTH="$REDIS_MASTER_PASSWORD"
    response=$(
      timeout -s 3 $1 \
      redis-cli \
        -h $REDIS_MASTER_HOST \
        -p $REDIS_MASTER_PORT_NUMBER \
        ping
    )
    if [ "$response" != "PONG" ]; then
      echo "$response"
      exit 1
    fi
  ping_liveness_master.sh: |-
    #!/bin/bash
    export REDISCLI_AUTH="$REDIS_MASTER_PASSWORD"
    response=$(
      timeout -s 3 $1 \
      redis-cli \
        -h $REDIS_MASTER_HOST \
        -p $REDIS_MASTER_PORT_NUMBER \
        ping
    )
    if [ "$response" != "PONG" ] && [ "$response" != "LOADING Redis is loading the dataset in memory" ]; then
      echo "$response"
      exit 1
    fi
  ping_readiness_local_and_master.sh: |-
    script_dir="$(dirname "$0")"
    exit_status=0
    "$script_dir/ping_readiness_local.sh" $1 || exit_status=$?
    "$script_dir/ping_readiness_master.sh" $1 || exit_status=$?
    exit $exit_status
  ping_liveness_local_and_master.sh: |-
    script_dir="$(dirname "$0")"
    exit_status=0
    "$script_dir/ping_liveness_local.sh" $1 || exit_status=$?
    "$script_dir/ping_liveness_master.sh" $1 || exit_status=$?
    exit $exit_status
---
# Source: charlescd/templates/keycloak.yaml
apiVersion: v1
data:
  keycloak.json: |-
    [ {
      "id" : "master",
      "realm" : "master",
      "displayName" : "Keycloak",
      "displayNameHtml" : "<div class=\"kc-logo-text\"><span>Keycloak</span></div>",
      "notBefore" : 0,
      "revokeRefreshToken" : false,
      "refreshTokenMaxReuse" : 0,
      "accessTokenLifespan" : 60,
      "accessTokenLifespanForImplicitFlow" : 900,
      "ssoSessionIdleTimeout" : 1800,
      "ssoSessionMaxLifespan" : 36000,
      "ssoSessionIdleTimeoutRememberMe" : 0,
      "ssoSessionMaxLifespanRememberMe" : 0,
      "offlineSessionIdleTimeout" : 2592000,
      "offlineSessionMaxLifespanEnabled" : false,
      "offlineSessionMaxLifespan" : 5184000,
      "clientSessionIdleTimeout" : 0,
      "clientSessionMaxLifespan" : 0,
      "clientOfflineSessionIdleTimeout" : 0,
      "clientOfflineSessionMaxLifespan" : 0,
      "accessCodeLifespan" : 60,
      "accessCodeLifespanUserAction" : 300,
      "accessCodeLifespanLogin" : 1800,
      "actionTokenGeneratedByAdminLifespan" : 43200,
      "actionTokenGeneratedByUserLifespan" : 300,
      "enabled" : true,
      "sslRequired" : "external",
      "registrationAllowed" : false,
      "registrationEmailAsUsername" : false,
      "rememberMe" : false,
      "verifyEmail" : false,
      "loginWithEmailAllowed" : true,
      "duplicateEmailsAllowed" : false,
      "resetPasswordAllowed" : false,
      "editUsernameAllowed" : false,
      "bruteForceProtected" : false,
      "permanentLockout" : false,
      "maxFailureWaitSeconds" : 900,
      "minimumQuickLoginWaitSeconds" : 60,
      "waitIncrementSeconds" : 60,
      "quickLoginCheckMilliSeconds" : 1000,
      "maxDeltaTimeSeconds" : 43200,
      "failureFactor" : 30,
      "roles" : {
        "realm" : [ {
          "id" : "ad26ec1a-5c41-4578-ba88-0c4b844ecc8c",
          "name" : "create-realm",
          "description" : "${role_create-realm}",
          "composite" : false,
          "clientRole" : false,
          "containerId" : "master",
          "attributes" : { }
        }, {
          "id" : "d4dcd146-0490-4275-9955-fc2c2f57080b",
          "name" : "admin",
          "description" : "${role_admin}",
          "composite" : true,
          "composites" : {
            "realm" : [ "create-realm" ],
            "client" : {
              "charlescd-realm" : [ "query-realms", "query-groups", "view-clients", "manage-clients", "manage-users", "view-authorization", "view-realm", "manage-realm", "query-clients", "view-identity-providers", "manage-authorization", "view-users", "impersonation", "manage-identity-providers", "create-client", "view-events", "query-users", "manage-events" ],
              "master-realm" : [ "impersonation", "query-groups", "query-users", "manage-clients", "view-users", "create-client", "view-realm", "view-clients", "manage-realm", "manage-identity-providers", "view-identity-providers", "view-events", "manage-authorization", "query-realms", "manage-users", "query-clients", "manage-events", "view-authorization" ]
            }
          },
          "clientRole" : false,
          "containerId" : "master",
          "attributes" : { }
        }, {
          "id" : "286515c4-5130-449c-95cf-423d3c36d3d2",
          "name" : "offline_access",
          "description" : "${role_offline-access}",
          "composite" : false,
          "clientRole" : false,
          "containerId" : "master",
          "attributes" : { }
        }, {
          "id" : "79f7010c-cdfc-49d6-9873-1eec59c264fd",
          "name" : "uma_authorization",
          "description" : "${role_uma_authorization}",
          "composite" : false,
          "clientRole" : false,
          "containerId" : "master",
          "attributes" : { }
        } ],
        "client" : {
          "security-admin-console" : [ ],
          "admin-cli" : [ ],
          "account-console" : [ ],
          "broker" : [ {
            "id" : "8bff7b56-fe25-416c-8ce9-778df6fa5e46",
            "name" : "read-token",
            "description" : "${role_read-token}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0b4f9cfd-7320-4635-ac10-c0e0479aa3e4",
            "attributes" : { }
          } ],
          "charlescd-realm" : [ {
            "id" : "0b176a2b-f431-437a-b93a-6add172725a3",
            "name" : "view-users",
            "description" : "${role_view-users}",
            "composite" : true,
            "composites" : {
              "client" : {
                "charlescd-realm" : [ "query-users", "query-groups" ]
              }
            },
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "391a3d0c-2ed9-45bb-b068-3d1e2ef4476a",
            "name" : "query-realms",
            "description" : "${role_query-realms}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "fc168ef3-90fc-42aa-b2c0-321015513942",
            "name" : "impersonation",
            "description" : "${role_impersonation}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "b4ddf0c9-1961-41a5-8214-f9e03356e072",
            "name" : "manage-identity-providers",
            "description" : "${role_manage-identity-providers}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "8f4c47ec-7fbd-4f71-a997-f65bb15b4ca2",
            "name" : "query-groups",
            "description" : "${role_query-groups}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "480b3084-b5c5-4d50-9a83-1c24c544de89",
            "name" : "view-clients",
            "description" : "${role_view-clients}",
            "composite" : true,
            "composites" : {
              "client" : {
                "charlescd-realm" : [ "query-clients" ]
              }
            },
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "61766744-3a69-4e15-94f2-4e7a955aa6d5",
            "name" : "create-client",
            "description" : "${role_create-client}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "a736d0df-3990-40bc-946f-474636c223a4",
            "name" : "manage-clients",
            "description" : "${role_manage-clients}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "ac1919f2-679e-458d-b695-9c5a94c4700c",
            "name" : "manage-users",
            "description" : "${role_manage-users}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "aaa31a71-2576-4d12-bded-a3618fa6ac6b",
            "name" : "view-authorization",
            "description" : "${role_view-authorization}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "254b1a6c-a565-42fd-81f4-793bccff9f6f",
            "name" : "view-events",
            "description" : "${role_view-events}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "b3c5de18-4e78-4196-b83d-2dc167500014",
            "name" : "query-users",
            "description" : "${role_query-users}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "9ca3542f-eefa-4b14-abdb-1658565bcf81",
            "name" : "view-realm",
            "description" : "${role_view-realm}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "5d56f8ec-185f-4f71-b449-31202e4d7437",
            "name" : "manage-realm",
            "description" : "${role_manage-realm}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "9f39d030-458a-4f62-ae72-769f5d37aaa8",
            "name" : "query-clients",
            "description" : "${role_query-clients}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "191393c6-8241-4d16-8651-ada518250b47",
            "name" : "view-identity-providers",
            "description" : "${role_view-identity-providers}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "30303033-5d8c-477d-bcd7-6cef9ccdad11",
            "name" : "manage-authorization",
            "description" : "${role_manage-authorization}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          }, {
            "id" : "0aed23aa-c100-4b27-9ccd-7a90b7291598",
            "name" : "manage-events",
            "description" : "${role_manage-events}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
            "attributes" : { }
          } ],
          "master-realm" : [ {
            "id" : "69a89a9d-bf04-4ce3-b194-bb486acaa37f",
            "name" : "create-client",
            "description" : "${role_create-client}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "f1c9d585-a123-4127-8a7e-5a99a1ae300b",
            "name" : "view-realm",
            "description" : "${role_view-realm}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "a9e0adf6-d8eb-4818-8702-613292216c9e",
            "name" : "view-clients",
            "description" : "${role_view-clients}",
            "composite" : true,
            "composites" : {
              "client" : {
                "master-realm" : [ "query-clients" ]
              }
            },
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "7190791c-2752-4a8d-8615-9f6aa4f0479d",
            "name" : "manage-realm",
            "description" : "${role_manage-realm}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "8c8bfe86-77cc-40bb-84ec-2fd95122b85b",
            "name" : "impersonation",
            "description" : "${role_impersonation}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "ee957cda-a8cf-4f8d-87c0-63287275f0aa",
            "name" : "manage-identity-providers",
            "description" : "${role_manage-identity-providers}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "45d956a0-efcf-4c54-97c0-22434c56a0b2",
            "name" : "view-identity-providers",
            "description" : "${role_view-identity-providers}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "3ba4a84b-4d80-445c-a5ce-6996e170f1c7",
            "name" : "view-events",
            "description" : "${role_view-events}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "7977ddad-3de0-4f26-ac2c-3886eee624f8",
            "name" : "manage-authorization",
            "description" : "${role_manage-authorization}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "c2b67b4d-1dcb-4123-9600-65a360d7366d",
            "name" : "query-groups",
            "description" : "${role_query-groups}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "04a36aae-2ded-4917-9879-779e6db15eac",
            "name" : "query-users",
            "description" : "${role_query-users}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "9e2a6c5a-d393-4efc-acaa-a09742de573b",
            "name" : "manage-clients",
            "description" : "${role_manage-clients}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "a9cbd085-9e2b-4016-84e7-5844ea4b41da",
            "name" : "query-realms",
            "description" : "${role_query-realms}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "f9185ab4-1029-4fcb-b5e8-358b360e5353",
            "name" : "manage-users",
            "description" : "${role_manage-users}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "0cb82fe6-af6f-43df-bc9a-49e189489550",
            "name" : "query-clients",
            "description" : "${role_query-clients}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "2fafb6d1-7812-43f3-a2f6-7b4845e102e4",
            "name" : "manage-events",
            "description" : "${role_manage-events}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "d10df5ca-3a96-4a2e-aeb9-a5d47cdad96f",
            "name" : "view-users",
            "description" : "${role_view-users}",
            "composite" : true,
            "composites" : {
              "client" : {
                "master-realm" : [ "query-groups", "query-users" ]
              }
            },
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          }, {
            "id" : "fdba7d90-05e6-4f50-9425-183acaba13cf",
            "name" : "view-authorization",
            "description" : "${role_view-authorization}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
            "attributes" : { }
          } ],
          "account" : [ {
            "id" : "f40e88d1-05ff-46a9-bf33-6f02f1213423",
            "name" : "view-profile",
            "description" : "${role_view-profile}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "8470e8b1-b788-4a93-8a6e-1226934b5588",
            "attributes" : { }
          }, {
            "id" : "69810ae0-4bf4-46b2-991d-ec647fd76c74",
            "name" : "manage-account-links",
            "description" : "${role_manage-account-links}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "8470e8b1-b788-4a93-8a6e-1226934b5588",
            "attributes" : { }
          }, {
            "id" : "6262fb4a-2966-4e99-a741-728e785af448",
            "name" : "view-consent",
            "description" : "${role_view-consent}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "8470e8b1-b788-4a93-8a6e-1226934b5588",
            "attributes" : { }
          }, {
            "id" : "756657c4-9580-414e-ad58-84db6ace0242",
            "name" : "manage-account",
            "description" : "${role_manage-account}",
            "composite" : true,
            "composites" : {
              "client" : {
                "account" : [ "manage-account-links" ]
              }
            },
            "clientRole" : true,
            "containerId" : "8470e8b1-b788-4a93-8a6e-1226934b5588",
            "attributes" : { }
          }, {
            "id" : "6ba1328f-ebb2-4c78-bb32-6cbb1a389e48",
            "name" : "manage-consent",
            "description" : "${role_manage-consent}",
            "composite" : true,
            "composites" : {
              "client" : {
                "account" : [ "view-consent" ]
              }
            },
            "clientRole" : true,
            "containerId" : "8470e8b1-b788-4a93-8a6e-1226934b5588",
            "attributes" : { }
          }, {
            "id" : "53aee00f-737d-4ad9-87b4-f0a9ffb0eeeb",
            "name" : "view-applications",
            "description" : "${role_view-applications}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "8470e8b1-b788-4a93-8a6e-1226934b5588",
            "attributes" : { }
          } ]
        }
      },
      "groups" : [ ],
      "defaultRoles" : [ "offline_access", "uma_authorization" ],
      "requiredCredentials" : [ "password" ],
      "otpPolicyType" : "totp",
      "otpPolicyAlgorithm" : "HmacSHA1",
      "otpPolicyInitialCounter" : 0,
      "otpPolicyDigits" : 6,
      "otpPolicyLookAheadWindow" : 1,
      "otpPolicyPeriod" : 30,
      "otpSupportedApplications" : [ "FreeOTP", "Google Authenticator" ],
      "webAuthnPolicyRpEntityName" : "keycloak",
      "webAuthnPolicySignatureAlgorithms" : [ "ES256" ],
      "webAuthnPolicyRpId" : "",
      "webAuthnPolicyAttestationConveyancePreference" : "not specified",
      "webAuthnPolicyAuthenticatorAttachment" : "not specified",
      "webAuthnPolicyRequireResidentKey" : "not specified",
      "webAuthnPolicyUserVerificationRequirement" : "not specified",
      "webAuthnPolicyCreateTimeout" : 0,
      "webAuthnPolicyAvoidSameAuthenticatorRegister" : false,
      "webAuthnPolicyAcceptableAaguids" : [ ],
      "webAuthnPolicyPasswordlessRpEntityName" : "keycloak",
      "webAuthnPolicyPasswordlessSignatureAlgorithms" : [ "ES256" ],
      "webAuthnPolicyPasswordlessRpId" : "",
      "webAuthnPolicyPasswordlessAttestationConveyancePreference" : "not specified",
      "webAuthnPolicyPasswordlessAuthenticatorAttachment" : "not specified",
      "webAuthnPolicyPasswordlessRequireResidentKey" : "not specified",
      "webAuthnPolicyPasswordlessUserVerificationRequirement" : "not specified",
      "webAuthnPolicyPasswordlessCreateTimeout" : 0,
      "webAuthnPolicyPasswordlessAvoidSameAuthenticatorRegister" : false,
      "webAuthnPolicyPasswordlessAcceptableAaguids" : [ ],
      "users" : [ {
        "id" : "9a28e515-42a6-442a-b82b-b8e1f1ed357a",
        "createdTimestamp" : 1611249361979,
        "username" : "admin",
        "enabled" : true,
        "totp" : false,
        "emailVerified" : false,
        "credentials" : [ {
          "id" : "714f115e-021c-4ac0-9944-2fcb36df6617",
          "type" : "password",
          "createdDate" : 1611249362341,
          "secretData" : "{\"value\":\"OFaxnwdV9ZkLbKQ4xm1IMNodtNeSv0/sx4/i+g5pbkadVPTF1I3VV6jFSN9k2m1tgDdYarbC0fMWQAoU7Rcj4g==\",\"salt\":\"MEWSvelfGjllXRmEacOk5A==\"}",
          "credentialData" : "{\"hashIterations\":27500,\"algorithm\":\"pbkdf2-sha256\"}"
        } ],
        "disableableCredentialTypes" : [ ],
        "requiredActions" : [ ],
        "realmRoles" : [ "admin", "uma_authorization", "offline_access" ],
        "clientRoles" : {
          "account" : [ "view-profile", "manage-account" ]
        },
        "notBefore" : 0,
        "groups" : [ ]
      } ],
      "scopeMappings" : [ {
        "clientScope" : "offline_access",
        "roles" : [ "offline_access" ]
      } ],
      "clientScopeMappings" : {
        "account" : [ {
          "client" : "account-console",
          "roles" : [ "manage-account" ]
        } ]
      },
      "clients" : [ {
        "id" : "8470e8b1-b788-4a93-8a6e-1226934b5588",
        "clientId" : "account",
        "name" : "${client_account}",
        "rootUrl" : "${authBaseUrl}",
        "baseUrl" : "/realms/master/account/",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "91d3f15a-7117-46a6-84c0-d42eaedae23b",
        "defaultRoles" : [ "view-profile", "manage-account" ],
        "redirectUris" : [ "/realms/master/account/*" ],
        "webOrigins" : [ ],
        "notBefore" : 0,
        "bearerOnly" : false,
        "consentRequired" : false,
        "standardFlowEnabled" : true,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : false,
        "serviceAccountsEnabled" : false,
        "publicClient" : false,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : { },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : false,
        "nodeReRegistrationTimeout" : 0,
        "defaultClientScopes" : [ "web-origins", "role_list", "roles", "profile", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "df046f1c-bfa3-417d-b450-17694298d859",
        "clientId" : "account-console",
        "name" : "${client_account-console}",
        "rootUrl" : "${authBaseUrl}",
        "baseUrl" : "/realms/master/account/",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "541ee418-2049-4b63-b429-fe77e8204879",
        "redirectUris" : [ "/realms/master/account/*" ],
        "webOrigins" : [ ],
        "notBefore" : 0,
        "bearerOnly" : false,
        "consentRequired" : false,
        "standardFlowEnabled" : true,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : false,
        "serviceAccountsEnabled" : false,
        "publicClient" : true,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : {
          "pkce.code.challenge.method" : "S256"
        },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : false,
        "nodeReRegistrationTimeout" : 0,
        "protocolMappers" : [ {
          "id" : "8ca74d78-448b-4a25-abb9-69f1741045c1",
          "name" : "audience resolve",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-audience-resolve-mapper",
          "consentRequired" : false,
          "config" : { }
        } ],
        "defaultClientScopes" : [ "web-origins", "role_list", "roles", "profile", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "5882b0b1-c25c-4bec-b2e1-a55965b40d50",
        "clientId" : "admin-cli",
        "name" : "${client_admin-cli}",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "4ce0e30f-573f-49a7-a61d-046febd6140d",
        "redirectUris" : [ ],
        "webOrigins" : [ ],
        "notBefore" : 0,
        "bearerOnly" : false,
        "consentRequired" : false,
        "standardFlowEnabled" : false,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : true,
        "serviceAccountsEnabled" : false,
        "publicClient" : true,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : { },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : false,
        "nodeReRegistrationTimeout" : 0,
        "defaultClientScopes" : [ "web-origins", "role_list", "roles", "profile", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "0b4f9cfd-7320-4635-ac10-c0e0479aa3e4",
        "clientId" : "broker",
        "name" : "${client_broker}",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "5d7d3bf5-7528-4a35-b645-1719fc421da6",
        "redirectUris" : [ ],
        "webOrigins" : [ ],
        "notBefore" : 0,
        "bearerOnly" : false,
        "consentRequired" : false,
        "standardFlowEnabled" : true,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : false,
        "serviceAccountsEnabled" : false,
        "publicClient" : false,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : { },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : false,
        "nodeReRegistrationTimeout" : 0,
        "defaultClientScopes" : [ "web-origins", "role_list", "roles", "profile", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "74b667e2-e990-4d4b-9258-83184ad5ad47",
        "clientId" : "charlescd-realm",
        "name" : "charlescd Realm",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "4bdfa1cd-52cb-4314-abf7-978b8989bbe9",
        "redirectUris" : [ ],
        "webOrigins" : [ ],
        "notBefore" : 0,
        "bearerOnly" : true,
        "consentRequired" : false,
        "standardFlowEnabled" : true,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : false,
        "serviceAccountsEnabled" : false,
        "publicClient" : false,
        "frontchannelLogout" : false,
        "attributes" : { },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : true,
        "nodeReRegistrationTimeout" : 0,
        "defaultClientScopes" : [ "web-origins", "role_list", "roles", "profile", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "9f076418-a2a5-42d6-9771-236aeac0e30e",
        "clientId" : "master-realm",
        "name" : "master Realm",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "a1a8f9d3-3d59-4237-893f-ada1067234c0",
        "redirectUris" : [ ],
        "webOrigins" : [ ],
        "notBefore" : 0,
        "bearerOnly" : true,
        "consentRequired" : false,
        "standardFlowEnabled" : true,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : false,
        "serviceAccountsEnabled" : false,
        "publicClient" : false,
        "frontchannelLogout" : false,
        "attributes" : { },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : true,
        "nodeReRegistrationTimeout" : 0,
        "defaultClientScopes" : [ "web-origins", "role_list", "roles", "profile", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "34294e7f-1c29-4570-83a1-0f52b07ff2e3",
        "clientId" : "security-admin-console",
        "name" : "${client_security-admin-console}",
        "rootUrl" : "${authAdminUrl}",
        "baseUrl" : "/admin/master/console/",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "22012526-cc95-4210-b722-adbe750ad872",
        "redirectUris" : [ "/admin/master/console/*" ],
        "webOrigins" : [ "+" ],
        "notBefore" : 0,
        "bearerOnly" : false,
        "consentRequired" : false,
        "standardFlowEnabled" : true,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : false,
        "serviceAccountsEnabled" : false,
        "publicClient" : true,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : {
          "pkce.code.challenge.method" : "S256"
        },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : false,
        "nodeReRegistrationTimeout" : 0,
        "protocolMappers" : [ {
          "id" : "5e5489ca-6c67-497c-b3c7-0b98d26b3360",
          "name" : "locale",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "locale",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "locale",
            "jsonType.label" : "String"
          }
        } ],
        "defaultClientScopes" : [ "web-origins", "role_list", "roles", "profile", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      } ],
      "clientScopes" : [ {
        "id" : "ff2259bf-0d83-4103-af90-3fd6399eb0f4",
        "name" : "microprofile-jwt",
        "description" : "Microprofile - JWT built-in scope",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "true",
          "display.on.consent.screen" : "false"
        },
        "protocolMappers" : [ {
          "id" : "b4dfba02-984f-4e26-a763-b9e8fe1e8d5c",
          "name" : "groups",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-realm-role-mapper",
          "consentRequired" : false,
          "config" : {
            "multivalued" : "true",
            "user.attribute" : "foo",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "groups",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "c7f25b40-0586-4014-aecb-39ef7e65ac96",
          "name" : "upn",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-property-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "username",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "upn",
            "jsonType.label" : "String"
          }
        } ]
      }, {
        "id" : "f46c472f-cf7e-445e-87f4-a208276e655c",
        "name" : "web-origins",
        "description" : "OpenID Connect scope for add allowed web origins to the access token",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "false",
          "display.on.consent.screen" : "false",
          "consent.screen.text" : ""
        },
        "protocolMappers" : [ {
          "id" : "2fdf438e-98b2-43ae-bf6a-249fdbde1c18",
          "name" : "allowed web origins",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-allowed-origins-mapper",
          "consentRequired" : false,
          "config" : { }
        } ]
      }, {
        "id" : "11ec931d-3321-4d1a-9bf3-b072c271a025",
        "name" : "roles",
        "description" : "OpenID Connect scope for add user roles to the access token",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "false",
          "display.on.consent.screen" : "true",
          "consent.screen.text" : "${rolesScopeConsentText}"
        },
        "protocolMappers" : [ {
          "id" : "a8f53cd7-e8b6-441b-8a59-19b46f1c1926",
          "name" : "audience resolve",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-audience-resolve-mapper",
          "consentRequired" : false,
          "config" : { }
        }, {
          "id" : "a747c507-0584-4dbd-b0ff-996e4cf146ce",
          "name" : "realm roles",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-realm-role-mapper",
          "consentRequired" : false,
          "config" : {
            "user.attribute" : "foo",
            "access.token.claim" : "true",
            "claim.name" : "realm_access.roles",
            "jsonType.label" : "String",
            "multivalued" : "true"
          }
        }, {
          "id" : "286a9294-6a83-4b72-bd6a-1d17941cf681",
          "name" : "client roles",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-client-role-mapper",
          "consentRequired" : false,
          "config" : {
            "user.attribute" : "foo",
            "access.token.claim" : "true",
            "claim.name" : "resource_access.${client_id}.roles",
            "jsonType.label" : "String",
            "multivalued" : "true"
          }
        } ]
      }, {
        "id" : "56d4b6c4-a3a3-4388-be21-7eed2b1d5abb",
        "name" : "phone",
        "description" : "OpenID Connect built-in scope: phone",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "true",
          "display.on.consent.screen" : "true",
          "consent.screen.text" : "${phoneScopeConsentText}"
        },
        "protocolMappers" : [ {
          "id" : "c299ecaa-3d9a-428a-b858-72e972e5f1b1",
          "name" : "phone number",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "phoneNumber",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "phone_number",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "3c23a9be-f465-42ab-96d1-9eb81cc83943",
          "name" : "phone number verified",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "phoneNumberVerified",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "phone_number_verified",
            "jsonType.label" : "boolean"
          }
        } ]
      }, {
        "id" : "469a334f-3570-4193-a832-b1a143d5a789",
        "name" : "address",
        "description" : "OpenID Connect built-in scope: address",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "true",
          "display.on.consent.screen" : "true",
          "consent.screen.text" : "${addressScopeConsentText}"
        },
        "protocolMappers" : [ {
          "id" : "58a7b365-76b7-48fd-8a2a-aa990b607b70",
          "name" : "address",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-address-mapper",
          "consentRequired" : false,
          "config" : {
            "user.attribute.formatted" : "formatted",
            "user.attribute.country" : "country",
            "user.attribute.postal_code" : "postal_code",
            "userinfo.token.claim" : "true",
            "user.attribute.street" : "street",
            "id.token.claim" : "true",
            "user.attribute.region" : "region",
            "access.token.claim" : "true",
            "user.attribute.locality" : "locality"
          }
        } ]
      }, {
        "id" : "fbb0fcd3-b1c4-4a3e-a914-0812758aa11e",
        "name" : "email",
        "description" : "OpenID Connect built-in scope: email",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "true",
          "display.on.consent.screen" : "true",
          "consent.screen.text" : "${emailScopeConsentText}"
        },
        "protocolMappers" : [ {
          "id" : "4b555be5-f44c-4637-96e4-4043298afc2e",
          "name" : "email verified",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-property-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "emailVerified",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "email_verified",
            "jsonType.label" : "boolean"
          }
        }, {
          "id" : "fcc8063d-abb1-4d17-8044-9a3e517761ee",
          "name" : "email",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-property-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "email",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "email",
            "jsonType.label" : "String"
          }
        } ]
      }, {
        "id" : "9cc7ba49-07b9-4406-bde5-133a9847d746",
        "name" : "profile",
        "description" : "OpenID Connect built-in scope: profile",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "true",
          "display.on.consent.screen" : "true",
          "consent.screen.text" : "${profileScopeConsentText}"
        },
        "protocolMappers" : [ {
          "id" : "0d5f0fa6-42c8-4ac5-81d0-f8ae03981348",
          "name" : "middle name",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "middleName",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "middle_name",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "831d0a37-d347-49b3-b266-ac066d3abb3e",
          "name" : "updated at",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "updatedAt",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "updated_at",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "644de348-90d8-4c78-ae5b-0e8d28519cdb",
          "name" : "family name",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-property-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "lastName",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "family_name",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "f6c9d1bf-587d-4b6b-b744-8a09616683c9",
          "name" : "zoneinfo",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "zoneinfo",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "zoneinfo",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "9c73d343-b272-4a03-af5b-728327ec60f2",
          "name" : "website",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "website",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "website",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "14b4099b-3326-41bb-9241-14b2a5b8ed7e",
          "name" : "nickname",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "nickname",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "nickname",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "1e0dc561-3ffd-47e8-90ef-521aac316aa4",
          "name" : "profile",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "profile",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "profile",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "e9c08fb4-f833-4368-8ae3-e373d383d32c",
          "name" : "birthdate",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "birthdate",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "birthdate",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "85dc3b54-7ea2-40de-af11-1e0c3a098678",
          "name" : "locale",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "locale",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "locale",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "63a399d3-b06b-4b45-b253-6908dc81efdc",
          "name" : "picture",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "picture",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "picture",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "0cd396dc-0bd6-4e49-a6c6-502b3e5e5f0b",
          "name" : "username",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-property-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "username",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "preferred_username",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "becc9f26-40ed-4194-a1e4-b23b5a116643",
          "name" : "gender",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "gender",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "gender",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "da4e8473-3fef-43b9-8666-2e86621ba432",
          "name" : "given name",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-property-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "firstName",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "given_name",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "86ad3dfd-34ad-4f64-89ca-c0a184320336",
          "name" : "full name",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-full-name-mapper",
          "consentRequired" : false,
          "config" : {
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "userinfo.token.claim" : "true"
          }
        } ]
      }, {
        "id" : "3c5349e0-54d0-4378-8ac6-2ca2b5234414",
        "name" : "role_list",
        "description" : "SAML role list",
        "protocol" : "saml",
        "attributes" : {
          "consent.screen.text" : "${samlRoleListScopeConsentText}",
          "display.on.consent.screen" : "true"
        },
        "protocolMappers" : [ {
          "id" : "a3615046-b4f5-4482-8f9f-13631cb97173",
          "name" : "role list",
          "protocol" : "saml",
          "protocolMapper" : "saml-role-list-mapper",
          "consentRequired" : false,
          "config" : {
            "single" : "false",
            "attribute.nameformat" : "Basic",
            "attribute.name" : "Role"
          }
        } ]
      }, {
        "id" : "7127d257-ab2e-43f6-a9af-2e947aab4bed",
        "name" : "offline_access",
        "description" : "OpenID Connect built-in scope: offline_access",
        "protocol" : "openid-connect",
        "attributes" : {
          "consent.screen.text" : "${offlineAccessScopeConsentText}",
          "display.on.consent.screen" : "true"
        }
      } ],
      "defaultDefaultClientScopes" : [ "role_list", "profile", "email", "roles", "web-origins" ],
      "defaultOptionalClientScopes" : [ "offline_access", "address", "phone", "microprofile-jwt" ],
      "browserSecurityHeaders" : {
        "contentSecurityPolicyReportOnly" : "",
        "xContentTypeOptions" : "nosniff",
        "xRobotsTag" : "none",
        "xFrameOptions" : "SAMEORIGIN",
        "xXSSProtection" : "1; mode=block",
        "contentSecurityPolicy" : "frame-src 'self'; frame-ancestors 'self'; object-src 'none';",
        "strictTransportSecurity" : "max-age=31536000; includeSubDomains"
      },
      "smtpServer" : { },
      "eventsEnabled" : false,
      "eventsListeners" : [ "jboss-logging" ],
      "enabledEventTypes" : [ ],
      "adminEventsEnabled" : false,
      "adminEventsDetailsEnabled" : false,
      "components" : {
        "org.keycloak.services.clientregistration.policy.ClientRegistrationPolicy" : [ {
          "id" : "760eb2bf-afd0-4ecd-b571-1c639a260484",
          "name" : "Consent Required",
          "providerId" : "consent-required",
          "subType" : "anonymous",
          "subComponents" : { },
          "config" : { }
        }, {
          "id" : "2e636278-57aa-45a2-938e-c146f61ec885",
          "name" : "Trusted Hosts",
          "providerId" : "trusted-hosts",
          "subType" : "anonymous",
          "subComponents" : { },
          "config" : {
            "host-sending-registration-request-must-match" : [ "true" ],
            "client-uris-must-match" : [ "true" ]
          }
        }, {
          "id" : "10c9657d-75bd-4063-84eb-7c9e8ec91ece",
          "name" : "Allowed Protocol Mapper Types",
          "providerId" : "allowed-protocol-mappers",
          "subType" : "anonymous",
          "subComponents" : { },
          "config" : {
            "allowed-protocol-mapper-types" : [ "oidc-sha256-pairwise-sub-mapper", "oidc-usermodel-property-mapper", "saml-role-list-mapper", "saml-user-property-mapper", "oidc-usermodel-attribute-mapper", "oidc-address-mapper", "oidc-full-name-mapper", "saml-user-attribute-mapper" ]
          }
        }, {
          "id" : "2323118a-bf4d-44dd-90f0-e064cfbf8034",
          "name" : "Allowed Client Scopes",
          "providerId" : "allowed-client-templates",
          "subType" : "authenticated",
          "subComponents" : { },
          "config" : {
            "allow-default-scopes" : [ "true" ]
          }
        }, {
          "id" : "5c28210f-505e-4adb-91fb-c104739a9029",
          "name" : "Max Clients Limit",
          "providerId" : "max-clients",
          "subType" : "anonymous",
          "subComponents" : { },
          "config" : {
            "max-clients" : [ "200" ]
          }
        }, {
          "id" : "7392ff80-b977-4888-96e8-06cb27b219d9",
          "name" : "Full Scope Disabled",
          "providerId" : "scope",
          "subType" : "anonymous",
          "subComponents" : { },
          "config" : { }
        }, {
          "id" : "00f8faf6-7350-4286-801c-b053f9eeb32b",
          "name" : "Allowed Protocol Mapper Types",
          "providerId" : "allowed-protocol-mappers",
          "subType" : "authenticated",
          "subComponents" : { },
          "config" : {
            "allowed-protocol-mapper-types" : [ "oidc-address-mapper", "oidc-sha256-pairwise-sub-mapper", "saml-user-property-mapper", "oidc-full-name-mapper", "saml-user-attribute-mapper", "oidc-usermodel-attribute-mapper", "oidc-usermodel-property-mapper", "saml-role-list-mapper" ]
          }
        }, {
          "id" : "b89c941f-da07-4912-9bd2-b58bae252260",
          "name" : "Allowed Client Scopes",
          "providerId" : "allowed-client-templates",
          "subType" : "anonymous",
          "subComponents" : { },
          "config" : {
            "allow-default-scopes" : [ "true" ]
          }
        } ],
        "org.keycloak.keys.KeyProvider" : [ {
          "id" : "4192b7f4-1b62-4b06-9e4b-b0fb4cf144e5",
          "name" : "fallback-HS256",
          "providerId" : "hmac-generated",
          "subComponents" : { },
          "config" : {
            "kid" : [ "06675031-d2a3-4e0e-ae07-331bb359802e" ],
            "secret" : [ "gSCV0P-mbtKfSoYfIYnux_OR4_y0SpeGpyHx-bPcQhhN5hAJbXWxGYD5AWeoEcmoc6nDGRB8lXcE_dsSZmkNMA" ],
            "priority" : [ "-100" ],
            "algorithm" : [ "HS256" ]
          }
        }, {
          "id" : "f0e26c0b-a2df-45bc-b2cb-a2bce279ebdb",
          "name" : "fallback-RS256",
          "providerId" : "rsa-generated",
          "subComponents" : { },
          "config" : {
            "privateKey" : [ "MIIEowIBAAKCAQEAoDQHgzOPcuP8wSBylmVG1dFfNXc1Nn6fllfDPQZf2Lya8GGRF1tOHUiLpc3fhwzvagXLJDcv/zM/nzPGR2cf478A1tniRHq0ZPIBbtT6d3ThiORpcqwfBmhNOAKmmlheb7S418uw/Qq7fg2PdiSVHdVRuyBBuyRyEP7/0BEb80y1oCtxrYJiXAsoHE7GABj4YJv8ltDnPKxzrMcXmsM625su+/vxk+VFJP3AjO3c/pUMwVQpfcRtuWxX8XJIVnCjwS4CWj3lJelvzxKIiudUyyC4m+fPJg6ciTtj2M8IYRHVl9cGPNxtmEI99OoSB4Pdjxt2Yx66U1yXEFeTEseNpwIDAQABAoIBAB3clOnn2n1X8e0t1y4hgqqodE7LAag+whCMG2Bsp8EGpvrXtOvdoRnkQ+OMFHZf+uCQY+VERDYVn25VgEge+NrC560kwABzvtxyH8JBAM7zgna53M37N21CU+J03Ak5H6FC1pGi7kK8lWZRsMQc3Y7KDIoM4TO4/2obniNyjPs0rZU4lesk8D9qfVmC78fHAULHEucPk4Oiwq+9NLiXqAB3Y8lCWO6l9a6gNe8hMoqvlcEIBSgJR8/5yS501X9PD4pgIlVo8LI5KW+K43HbppUvv48+xuE7ANPYW47cNOF2bhpWPwe5soIWxbf5Hy5U6GASC3fh0Hu7xb3X0x2dNgECgYEA2Y0RDlAUaHxYnP9USZLfq07GklytQx6pwg6uBLRwwHMbXqicK+XWsFW5CQ8WiFUNwfSPGQjHNf1EelMb7TB2fypBGhNU9JAcSwjGJ9MKO/Iktf/2eLeaKbqV8yrcDudRA5YYHjk55fU6UiPqDCDszbholamOigmfiOdF0FOuF+ECgYEAvIRN9U8em2VsiK6o0Fym6/aq4XbxoLJqgPJtebb0FE6xrx4Z0Q8mIQkmx5mFe6SfQbviRe+Sw4clKLhdUH/ou0ag3RiR+DsQdjy8TgJ8haJdpmxdgrDN7g2oTX1V+gcDDQDQ+9bbe9Jy4p87jmDjXoeEiFVdt/erQOyZXmDftocCgYEAxsM48w+9JZ1+RKqPcs0LJ/PIPw8Higxo4xEQcuH9JgfE2N5KGV1boi4f6aPsXVEASdXMK/42LCCiwPRPzox5p0OOyWkiNHO6Nd/lU5tgfVaFrfcXVEHDSx7bQ5lEByXWgeVPUcXNHUnJKCUCAGTQlkBG5X5N6dZS+Pz8bxMVO2ECgYA+W00mLYukP0JNW+i/M0aLmsYfWibGzv1ntcj8j8Xgyb8Ae+ZyPp6QIuTO9TswEN4U8j8AfyR+xL9H3uQO8qBbAhvHxo7SG0dwtNpcu3nRAkoT+Jhd2HnlmmLnbuP3lkYuEO0PwJxNMumJiL48dFQBOrZeGk6rwaLGEP0SON0HFQKBgB3dgvgU9sRakW8ylBFjgGUasE0RGR4XQfW1ED4LIj/MMBT5pdkKEca/kMbzoqcqM8Uoc7bOWLIX9Kiz4Yr7Jo9i36FK6mjnCuRqO4vQ+5ldZYiuaDMOJcCkbfOVMsYM4ya1+vGFO1j2bajkLXRjqfcvwuY2DAjtQIkViJDVGppi" ],
            "certificate" : [ "MIICmzCCAYMCBgF3JWUWBzANBgkqhkiG9w0BAQsFADARMQ8wDQYDVQQDDAZtYXN0ZXIwHhcNMjEwMTIxMTQ0MDE3WhcNMzEwMTIxMTQ0MTU3WjARMQ8wDQYDVQQDDAZtYXN0ZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCgNAeDM49y4/zBIHKWZUbV0V81dzU2fp+WV8M9Bl/YvJrwYZEXW04dSIulzd+HDO9qBcskNy//Mz+fM8ZHZx/jvwDW2eJEerRk8gFu1Pp3dOGI5GlyrB8GaE04AqaaWF5vtLjXy7D9Crt+DY92JJUd1VG7IEG7JHIQ/v/QERvzTLWgK3GtgmJcCygcTsYAGPhgm/yW0Oc8rHOsxxeawzrbmy77+/GT5UUk/cCM7dz+lQzBVCl9xG25bFfxckhWcKPBLgJaPeUl6W/PEoiK51TLILib588mDpyJO2PYzwhhEdWX1wY83G2YQj306hIHg92PG3ZjHrpTXJcQV5MSx42nAgMBAAEwDQYJKoZIhvcNAQELBQADggEBABo77uphq196JR7kQIAJ0bahVdDF5wK+uaMSiCsMRRRYmaXMrlK+LbdmPl8pVkmuWLvvg3Fk9hLXSFCZfQsILacNLJF6mevK4zkQf7r8Q16mRCEJyTMKTVbQlxrnF3YTyPD+LpifQt3uZWRoclWrDjLclFJslJD8uc7n8zAt6aIRv2+KFjISa/Q8m90NUh2SgbSd2Qj4oOY6ukzeOsvNV4KC4ZH/KMm92QOdO4ny5rMgCdNQmQ9X51CZyq+GWfIKO8S3gzuvWNHANqn7dfjfo5p+V3MDa2JYIwD7MPdezZd8MKC3/MC1oznSqp4EYgSnTXfPTeZjLZfq1yU0X17g/Lw=" ],
            "priority" : [ "-100" ],
            "algorithm" : [ "RS256" ]
          }
        } ]
      },
      "internationalizationEnabled" : false,
      "supportedLocales" : [ ],
      "authenticationFlows" : [ {
        "id" : "3389450d-b2f2-4edb-abdc-67f20994bcfd",
        "alias" : "Account verification options",
        "description" : "Method with which to verity the existing account",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "idp-email-verification",
          "requirement" : "ALTERNATIVE",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "ALTERNATIVE",
          "priority" : 20,
          "flowAlias" : "Verify Existing Account by Re-authentication",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "a8d0856c-19f5-4d9d-ab1f-c6eb10415dde",
        "alias" : "Authentication Options",
        "description" : "Authentication options.",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "basic-auth",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "basic-auth-otp",
          "requirement" : "DISABLED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "auth-spnego",
          "requirement" : "DISABLED",
          "priority" : 30,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "3d1e33e1-b0d1-492a-a67e-e4f877ed2f16",
        "alias" : "Browser - Conditional OTP",
        "description" : "Flow to determine if the OTP is required for the authentication",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "conditional-user-configured",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "auth-otp-form",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "ca57543f-6707-4033-8f42-336c1450017d",
        "alias" : "Direct Grant - Conditional OTP",
        "description" : "Flow to determine if the OTP is required for the authentication",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "conditional-user-configured",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "direct-grant-validate-otp",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "1f5222cb-b7da-4b74-939b-3eb76351ab77",
        "alias" : "First broker login - Conditional OTP",
        "description" : "Flow to determine if the OTP is required for the authentication",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "conditional-user-configured",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "auth-otp-form",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "ab2b353e-6a2c-45ae-a6d4-c09a08fab103",
        "alias" : "Handle Existing Account",
        "description" : "Handle what to do if there is existing account with same email/username like authenticated identity provider",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "idp-confirm-link",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "REQUIRED",
          "priority" : 20,
          "flowAlias" : "Account verification options",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "39335936-f87a-4989-8bee-c69265c78840",
        "alias" : "Reset - Conditional OTP",
        "description" : "Flow to determine if the OTP should be reset or not. Set to REQUIRED to force.",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "conditional-user-configured",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "reset-otp",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "d03623dd-182a-48ee-a011-0881ed92a662",
        "alias" : "User creation or linking",
        "description" : "Flow for the existing/non-existing user alternatives",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticatorConfig" : "create unique user config",
          "authenticator" : "idp-create-user-if-unique",
          "requirement" : "ALTERNATIVE",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "ALTERNATIVE",
          "priority" : 20,
          "flowAlias" : "Handle Existing Account",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "ac916b5b-36fe-4ef9-850b-2345ba8ead96",
        "alias" : "Verify Existing Account by Re-authentication",
        "description" : "Reauthentication of existing account",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "idp-username-password-form",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "CONDITIONAL",
          "priority" : 20,
          "flowAlias" : "First broker login - Conditional OTP",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "c59b7ba7-0df4-40ef-88e8-d4d9c0602b10",
        "alias" : "browser",
        "description" : "browser based authentication",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "auth-cookie",
          "requirement" : "ALTERNATIVE",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "auth-spnego",
          "requirement" : "DISABLED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "identity-provider-redirector",
          "requirement" : "ALTERNATIVE",
          "priority" : 25,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "ALTERNATIVE",
          "priority" : 30,
          "flowAlias" : "forms",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "0d7d2bdc-d498-467f-bba2-af95e72c3314",
        "alias" : "clients",
        "description" : "Base authentication for clients",
        "providerId" : "client-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "client-secret",
          "requirement" : "ALTERNATIVE",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "client-jwt",
          "requirement" : "ALTERNATIVE",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "client-secret-jwt",
          "requirement" : "ALTERNATIVE",
          "priority" : 30,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "client-x509",
          "requirement" : "ALTERNATIVE",
          "priority" : 40,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "bb6da9e1-5a8a-4641-850b-a109b40ea1ec",
        "alias" : "direct grant",
        "description" : "OpenID Connect Resource Owner Grant",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "direct-grant-validate-username",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "direct-grant-validate-password",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "CONDITIONAL",
          "priority" : 30,
          "flowAlias" : "Direct Grant - Conditional OTP",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "8cc4fd8e-c032-4ac8-b245-3cb9f9418a66",
        "alias" : "docker auth",
        "description" : "Used by Docker clients to authenticate against the IDP",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "docker-http-basic-authenticator",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "7a8fba58-f5b1-47ae-96e6-9adc46cc0249",
        "alias" : "first broker login",
        "description" : "Actions taken after first broker login with identity provider account, which is not yet linked to any Keycloak account",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticatorConfig" : "review profile config",
          "authenticator" : "idp-review-profile",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "REQUIRED",
          "priority" : 20,
          "flowAlias" : "User creation or linking",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "0b6b4635-542d-4f0d-98a3-0297d102f234",
        "alias" : "forms",
        "description" : "Username, password, otp and other auth forms.",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "auth-username-password-form",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "CONDITIONAL",
          "priority" : 20,
          "flowAlias" : "Browser - Conditional OTP",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "2d288ade-7227-437d-990c-4a153c74fef3",
        "alias" : "http challenge",
        "description" : "An authentication flow based on challenge-response HTTP Authentication Schemes",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "no-cookie-redirect",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "REQUIRED",
          "priority" : 20,
          "flowAlias" : "Authentication Options",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "c8805d1b-f107-4814-a001-d88edc690877",
        "alias" : "registration",
        "description" : "registration flow",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "registration-page-form",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "flowAlias" : "registration form",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "dd26e09f-df92-4752-a34a-5987af3116a4",
        "alias" : "registration form",
        "description" : "registration form",
        "providerId" : "form-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "registration-user-creation",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "registration-profile-action",
          "requirement" : "REQUIRED",
          "priority" : 40,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "registration-password-action",
          "requirement" : "REQUIRED",
          "priority" : 50,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "registration-recaptcha-action",
          "requirement" : "DISABLED",
          "priority" : 60,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "7d1652fa-238d-4b67-8582-7b1c83f987bc",
        "alias" : "reset credentials",
        "description" : "Reset credentials for a user if they forgot their password or something",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "reset-credentials-choose-user",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "reset-credential-email",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "reset-password",
          "requirement" : "REQUIRED",
          "priority" : 30,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "CONDITIONAL",
          "priority" : 40,
          "flowAlias" : "Reset - Conditional OTP",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "8f8278be-2773-4bf4-b664-b402920714ac",
        "alias" : "saml ecp",
        "description" : "SAML ECP Profile Authentication Flow",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "http-basic-authenticator",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      } ],
      "authenticatorConfig" : [ {
        "id" : "5b7229a4-9235-40f0-8e80-5b32b612f554",
        "alias" : "create unique user config",
        "config" : {
          "require.password.update.after.registration" : "false"
        }
      }, {
        "id" : "2eae31bf-0b16-4d06-80e5-96daa8946564",
        "alias" : "review profile config",
        "config" : {
          "update.profile.on.first.login" : "missing"
        }
      } ],
      "requiredActions" : [ {
        "alias" : "CONFIGURE_TOTP",
        "name" : "Configure OTP",
        "providerId" : "CONFIGURE_TOTP",
        "enabled" : true,
        "defaultAction" : false,
        "priority" : 10,
        "config" : { }
      }, {
        "alias" : "terms_and_conditions",
        "name" : "Terms and Conditions",
        "providerId" : "terms_and_conditions",
        "enabled" : false,
        "defaultAction" : false,
        "priority" : 20,
        "config" : { }
      }, {
        "alias" : "UPDATE_PASSWORD",
        "name" : "Update Password",
        "providerId" : "UPDATE_PASSWORD",
        "enabled" : true,
        "defaultAction" : false,
        "priority" : 30,
        "config" : { }
      }, {
        "alias" : "UPDATE_PROFILE",
        "name" : "Update Profile",
        "providerId" : "UPDATE_PROFILE",
        "enabled" : true,
        "defaultAction" : false,
        "priority" : 40,
        "config" : { }
      }, {
        "alias" : "VERIFY_EMAIL",
        "name" : "Verify Email",
        "providerId" : "VERIFY_EMAIL",
        "enabled" : true,
        "defaultAction" : false,
        "priority" : 50,
        "config" : { }
      }, {
        "alias" : "update_user_locale",
        "name" : "Update User Locale",
        "providerId" : "update_user_locale",
        "enabled" : true,
        "defaultAction" : false,
        "priority" : 1000,
        "config" : { }
      } ],
      "browserFlow" : "browser",
      "registrationFlow" : "registration",
      "directGrantFlow" : "direct grant",
      "resetCredentialsFlow" : "reset credentials",
      "clientAuthenticationFlow" : "clients",
      "dockerAuthenticationFlow" : "docker auth",
      "attributes" : { },
      "keycloakVersion" : "11.0.2",
      "userManagedAccessAllowed" : false
    }, {
      "id" : "charlescd",
      "realm" : "charlescd",
      "notBefore" : 0,
      "revokeRefreshToken" : false,
      "refreshTokenMaxReuse" : 0,
      "accessTokenLifespan" : 300,
      "accessTokenLifespanForImplicitFlow" : 900,
      "ssoSessionIdleTimeout" : 1800,
      "ssoSessionMaxLifespan" : 36000,
      "ssoSessionIdleTimeoutRememberMe" : 0,
      "ssoSessionMaxLifespanRememberMe" : 0,
      "offlineSessionIdleTimeout" : 2592000,
      "offlineSessionMaxLifespanEnabled" : false,
      "offlineSessionMaxLifespan" : 5184000,
      "clientSessionIdleTimeout" : 0,
      "clientSessionMaxLifespan" : 0,
      "clientOfflineSessionIdleTimeout" : 0,
      "clientOfflineSessionMaxLifespan" : 0,
      "accessCodeLifespan" : 60,
      "accessCodeLifespanUserAction" : 300,
      "accessCodeLifespanLogin" : 1800,
      "actionTokenGeneratedByAdminLifespan" : 43200,
      "actionTokenGeneratedByUserLifespan" : 300,
      "enabled" : true,
      "sslRequired" : "none",
      "registrationAllowed" : false,
      "registrationEmailAsUsername" : false,
      "rememberMe" : false,
      "verifyEmail" : false,
      "loginWithEmailAllowed" : true,
      "duplicateEmailsAllowed" : false,
      "resetPasswordAllowed" : false,
      "editUsernameAllowed" : false,
      "bruteForceProtected" : false,
      "permanentLockout" : false,
      "maxFailureWaitSeconds" : 900,
      "minimumQuickLoginWaitSeconds" : 60,
      "waitIncrementSeconds" : 60,
      "quickLoginCheckMilliSeconds" : 1000,
      "maxDeltaTimeSeconds" : 43200,
      "failureFactor" : 30,
      "roles" : {
        "realm" : [ {
          "id" : "fd4b244c-d306-4cc2-b6da-a11ac605429f",
          "name" : "offline_access",
          "description" : "${role_offline-access}",
          "composite" : false,
          "clientRole" : false,
          "containerId" : "charlescd",
          "attributes" : { }
        }, {
          "id" : "8d122e4e-d520-447e-b3cd-ba5f0a111796",
          "name" : "admin",
          "description" : "${role_darwin_admin}",
          "composite" : false,
          "clientRole" : false,
          "containerId" : "charlescd",
          "attributes" : { }
        }, {
          "id" : "fbe03515-a8dd-4e77-97b3-e65c6adbd70f",
          "name" : "uma_authorization",
          "description" : "${role_uma_authorization}",
          "composite" : false,
          "clientRole" : false,
          "containerId" : "charlescd",
          "attributes" : { }
        } ],
        "client" : {
          "realm-management" : [ {
            "id" : "061b87d7-0550-43d2-bfe2-57ec0d1e51f7",
            "name" : "view-authorization",
            "description" : "${role_view-authorization}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "4f83267b-cb8c-49eb-a8ab-bb22e3b4e201",
            "name" : "manage-events",
            "description" : "${role_manage-events}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "14085ee7-0284-44fb-94c7-36f167d52918",
            "name" : "realm-admin",
            "description" : "${role_realm-admin}",
            "composite" : true,
            "composites" : {
              "client" : {
                "realm-management" : [ "view-authorization", "manage-events", "query-realms", "query-users", "impersonation", "query-groups", "manage-clients", "view-identity-providers", "manage-authorization", "create-client", "view-events", "manage-identity-providers", "view-users", "manage-users", "manage-realm", "view-realm", "view-clients", "query-clients" ]
              }
            },
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "15576300-c102-41cf-bcd2-930618ef4b58",
            "name" : "query-realms",
            "description" : "${role_query-realms}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "01c81861-7110-48d5-8f33-4bf8e8873181",
            "name" : "query-users",
            "description" : "${role_query-users}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "9f38204a-8c62-484a-9dac-4596106048e7",
            "name" : "impersonation",
            "description" : "${role_impersonation}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "690b8b0f-bff8-468a-aad9-b78b63b4af37",
            "name" : "query-groups",
            "description" : "${role_query-groups}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "72943bc3-37a4-409b-b26d-570f860a61e2",
            "name" : "manage-clients",
            "description" : "${role_manage-clients}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "5a7d0f04-8f70-4024-aa05-983fcdff0ceb",
            "name" : "view-identity-providers",
            "description" : "${role_view-identity-providers}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "f6c9a3b5-f204-45ec-b298-e5f5fef2a25f",
            "name" : "manage-authorization",
            "description" : "${role_manage-authorization}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "c1296af1-79c0-428e-9aa9-3758287047b5",
            "name" : "create-client",
            "description" : "${role_create-client}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "32901d22-efe1-4dee-8d64-9c2e9baaeb1a",
            "name" : "view-events",
            "description" : "${role_view-events}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "c145d10f-200f-4163-93c6-c5eca736036b",
            "name" : "manage-identity-providers",
            "description" : "${role_manage-identity-providers}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "34882e65-6c93-42fb-81ab-5d71353ae169",
            "name" : "view-users",
            "description" : "${role_view-users}",
            "composite" : true,
            "composites" : {
              "client" : {
                "realm-management" : [ "query-users", "query-groups" ]
              }
            },
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "bbb86a5f-a6e1-4547-8567-7217d8de5f4b",
            "name" : "manage-users",
            "description" : "${role_manage-users}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "a5d62515-c396-4d65-a4f0-ac4569375c3f",
            "name" : "manage-realm",
            "description" : "${role_manage-realm}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "21f1fbee-366c-49d2-b749-49836e959ae4",
            "name" : "view-realm",
            "description" : "${role_view-realm}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "e5440b0b-036d-4a74-adb1-64e5d8da59ab",
            "name" : "view-clients",
            "description" : "${role_view-clients}",
            "composite" : true,
            "composites" : {
              "client" : {
                "realm-management" : [ "query-clients" ]
              }
            },
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          }, {
            "id" : "0f04a35d-921c-43b4-bafd-4f9f48373685",
            "name" : "query-clients",
            "description" : "${role_query-clients}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
            "attributes" : { }
          } ],
          "charlescd-client" : [ {
            "id" : "d36b312a-9065-4426-8c74-adecf5c77f19",
            "name" : "test",
            "description" : "tes",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "a83d43a0-654c-41ab-8b0e-2fb00bdf7ba6",
            "attributes" : { }
          }, {
            "id" : "6e4c3f14-a12f-4c6e-9ccb-8c45c7296737",
            "name" : "uma_protection",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "a83d43a0-654c-41ab-8b0e-2fb00bdf7ba6",
            "attributes" : { }
          } ],
          "security-admin-console" : [ ],
          "admin-cli" : [ ],
          "realm-charlescd" : [ {
            "id" : "fba352fe-a302-45a7-a23e-239ab106f47f",
            "name" : "teste",
            "description" : "teste",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "13eefbbe-e918-47e4-8734-8863e3dccdd7",
            "attributes" : { }
          } ],
          "account-console" : [ ],
          "broker" : [ {
            "id" : "3ea546ae-982f-4932-8b61-339eedccd071",
            "name" : "read-token",
            "description" : "${role_read-token}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "acdaf1ba-c45a-46f9-8438-962c5c161850",
            "attributes" : { }
          } ],
          "account" : [ {
            "id" : "0373b35d-59ca-43c4-8919-51597da4ecbb",
            "name" : "manage-account",
            "description" : "${role_manage-account}",
            "composite" : true,
            "composites" : {
              "client" : {
                "account" : [ "manage-account-links" ]
              }
            },
            "clientRole" : true,
            "containerId" : "e16aefc6-c57d-43fe-900f-d915af694c14",
            "attributes" : { }
          }, {
            "id" : "d5e04ef3-7cf2-45c4-866a-31b39a69ffb0",
            "name" : "manage-consent",
            "description" : "${role_manage-consent}",
            "composite" : true,
            "composites" : {
              "client" : {
                "account" : [ "view-consent" ]
              }
            },
            "clientRole" : true,
            "containerId" : "e16aefc6-c57d-43fe-900f-d915af694c14",
            "attributes" : { }
          }, {
            "id" : "d92382f7-cc09-4f9a-8af5-606d89515c99",
            "name" : "view-profile",
            "description" : "${role_view-profile}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "e16aefc6-c57d-43fe-900f-d915af694c14",
            "attributes" : { }
          }, {
            "id" : "5417a5a0-8a1c-4197-96f6-8e8865de12d0",
            "name" : "manage-account-links",
            "description" : "${role_manage-account-links}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "e16aefc6-c57d-43fe-900f-d915af694c14",
            "attributes" : { }
          }, {
            "id" : "9378c1c6-0b6a-4bab-8ea2-2545f60ab8d7",
            "name" : "view-applications",
            "description" : "${role_view-applications}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "e16aefc6-c57d-43fe-900f-d915af694c14",
            "attributes" : { }
          }, {
            "id" : "dd086fca-da62-4057-8d7e-af8289bfca07",
            "name" : "view-consent",
            "description" : "${role_view-consent}",
            "composite" : false,
            "clientRole" : true,
            "containerId" : "e16aefc6-c57d-43fe-900f-d915af694c14",
            "attributes" : { }
          } ]
        }
      },
      "groups" : [ ],
      "requiredCredentials" : [ "password" ],
      "otpPolicyType" : "totp",
      "otpPolicyAlgorithm" : "HmacSHA1",
      "otpPolicyInitialCounter" : 0,
      "otpPolicyDigits" : 6,
      "otpPolicyLookAheadWindow" : 1,
      "otpPolicyPeriod" : 30,
      "otpSupportedApplications" : [ "FreeOTP", "Google Authenticator" ],
      "webAuthnPolicyRpEntityName" : "keycloak",
      "webAuthnPolicySignatureAlgorithms" : [ "ES256" ],
      "webAuthnPolicyRpId" : "",
      "webAuthnPolicyAttestationConveyancePreference" : "not specified",
      "webAuthnPolicyAuthenticatorAttachment" : "not specified",
      "webAuthnPolicyRequireResidentKey" : "not specified",
      "webAuthnPolicyUserVerificationRequirement" : "not specified",
      "webAuthnPolicyCreateTimeout" : 0,
      "webAuthnPolicyAvoidSameAuthenticatorRegister" : false,
      "webAuthnPolicyAcceptableAaguids" : [ ],
      "webAuthnPolicyPasswordlessRpEntityName" : "keycloak",
      "webAuthnPolicyPasswordlessSignatureAlgorithms" : [ "ES256" ],
      "webAuthnPolicyPasswordlessRpId" : "",
      "webAuthnPolicyPasswordlessAttestationConveyancePreference" : "not specified",
      "webAuthnPolicyPasswordlessAuthenticatorAttachment" : "not specified",
      "webAuthnPolicyPasswordlessRequireResidentKey" : "not specified",
      "webAuthnPolicyPasswordlessUserVerificationRequirement" : "not specified",
      "webAuthnPolicyPasswordlessCreateTimeout" : 0,
      "webAuthnPolicyPasswordlessAvoidSameAuthenticatorRegister" : false,
      "webAuthnPolicyPasswordlessAcceptableAaguids" : [ ],
      "users" : [ {
        "id" : "da8ca498-e449-4326-a8dd-4839424cbdd0",
        "createdTimestamp" : 1611249411668,
        "username" : "charlesadmin@admin",
        "enabled" : true,
        "totp" : false,
        "emailVerified" : true,
        "firstName" : "charlesadmin@admin",
        "lastName" : "charlesadmin@admin",
        "email" : "charlesadmin@admin",
        "attributes" : {
          "isRoot" : [ "true" ]
        },
        "credentials" : [ {
          "id" : "df46dd0d-f692-4b63-94cb-cf49932f439b",
          "type" : "password",
          "createdDate" : 1611249427203,
          "secretData" : "{\"value\":\"7pbLs7KLTTY4cw0VP/bsXwkeXVMnRvnCDtIIiMlc+57tIhNkAzxKuwuwuVpCNwNoat7CrYo4CBlUa5IIcUw5zA==\",\"salt\":\"DNOVrZJLVCCHwvgc4GvmkA==\"}",
          "credentialData" : "{\"hashIterations\":27500,\"algorithm\":\"pbkdf2-sha256\"}"
        } ],
        "disableableCredentialTypes" : [ ],
        "requiredActions" : [ ],
        "notBefore" : 0,
        "groups" : [ ]
      }, {
        "id" : "a2c7564f-baaa-4d01-ab54-c2df6f54bb18",
        "createdTimestamp" : 1611249392018,
        "username" : "service-account-charlescd-client",
        "enabled" : true,
        "totp" : false,
        "emailVerified" : false,
        "serviceAccountClientId" : "charlescd-client",
        "credentials" : [ ],
        "disableableCredentialTypes" : [ ],
        "requiredActions" : [ ],
        "notBefore" : 0,
        "groups" : [ ]
      }, {
        "id" : "7282c65a-ac86-4bb9-a94d-e53aae02582f",
        "createdTimestamp" : 1588711806261,
        "username" : "service-account-realm-charlescd",
        "enabled" : true,
        "totp" : false,
        "emailVerified" : false,
        "serviceAccountClientId" : "realm-charlescd",
        "credentials" : [ ],
        "disableableCredentialTypes" : [ ],
        "requiredActions" : [ ],
        "clientRoles" : {
          "realm-management" : [ "manage-events", "realm-admin" ]
        },
        "notBefore" : 0,
        "groups" : [ ]
      } ],
      "clients" : [ {
        "id" : "e16aefc6-c57d-43fe-900f-d915af694c14",
        "clientId" : "account",
        "name" : "${client_account}",
        "rootUrl" : "${authBaseUrl}",
        "baseUrl" : "/realms/charlescd/account/",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "**********",
        "redirectUris" : [ "/realms/charlescd/account/*" ],
        "webOrigins" : [ ],
        "notBefore" : 0,
        "bearerOnly" : false,
        "consentRequired" : false,
        "standardFlowEnabled" : true,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : false,
        "serviceAccountsEnabled" : false,
        "publicClient" : false,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : { },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : false,
        "nodeReRegistrationTimeout" : 0,
        "defaultClientScopes" : [ "web-origins", "role_list", "profile", "roles", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "020d5692-664d-4fcb-8e76-16ac763850b3",
        "clientId" : "account-console",
        "name" : "${client_account-console}",
        "rootUrl" : "${authBaseUrl}",
        "baseUrl" : "/realms/darwin/account/",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "**********",
        "redirectUris" : [ "/realms/darwin/account/*" ],
        "webOrigins" : [ ],
        "notBefore" : 0,
        "bearerOnly" : false,
        "consentRequired" : false,
        "standardFlowEnabled" : true,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : false,
        "serviceAccountsEnabled" : false,
        "publicClient" : true,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : {
          "pkce.code.challenge.method" : "S256"
        },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : false,
        "nodeReRegistrationTimeout" : 0,
        "protocolMappers" : [ {
          "id" : "8069175f-a619-4fae-a3ad-7494609e359f",
          "name" : "audience resolve",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-audience-resolve-mapper",
          "consentRequired" : false,
          "config" : { }
        } ],
        "defaultClientScopes" : [ "web-origins", "role_list", "profile", "roles", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "3805e24d-3c81-424b-a1ba-6bb6702e4dbc",
        "clientId" : "admin-cli",
        "name" : "${client_admin-cli}",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "**********",
        "redirectUris" : [ ],
        "webOrigins" : [ ],
        "notBefore" : 0,
        "bearerOnly" : false,
        "consentRequired" : false,
        "standardFlowEnabled" : false,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : true,
        "serviceAccountsEnabled" : false,
        "publicClient" : true,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : { },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : false,
        "nodeReRegistrationTimeout" : 0,
        "defaultClientScopes" : [ "web-origins", "role_list", "profile", "roles", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "acdaf1ba-c45a-46f9-8438-962c5c161850",
        "clientId" : "broker",
        "name" : "${client_broker}",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "**********",
        "redirectUris" : [ ],
        "webOrigins" : [ ],
        "notBefore" : 0,
        "bearerOnly" : false,
        "consentRequired" : false,
        "standardFlowEnabled" : true,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : false,
        "serviceAccountsEnabled" : false,
        "publicClient" : false,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : { },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : false,
        "nodeReRegistrationTimeout" : 0,
        "defaultClientScopes" : [ "web-origins", "role_list", "profile", "roles", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "a83d43a0-654c-41ab-8b0e-2fb00bdf7ba6",
        "clientId" : "charlescd-client",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "**********",
        "redirectUris" : [ "https://vivo-charles.continuousplatform.com/*" ],
        "webOrigins" : [ "*" ],
        "notBefore" : 0,
        "bearerOnly" : false,
        "consentRequired" : false,
        "standardFlowEnabled" : true,
        "implicitFlowEnabled" : true,
        "directAccessGrantsEnabled" : true,
        "serviceAccountsEnabled" : true,
        "publicClient" : true,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : {
          "saml.assertion.signature" : "false",
          "access.token.lifespan" : "3600",
          "saml.force.post.binding" : "false",
          "saml.multivalued.roles" : "false",
          "saml.encrypt" : "false",
          "saml.server.signature" : "false",
          "saml.server.signature.keyinfo.ext" : "false",
          "exclude.session.state.from.auth.response" : "false",
          "saml_force_name_id_format" : "false",
          "saml.client.signature" : "false",
          "tls.client.certificate.bound.access.tokens" : "false",
          "saml.authnstatement" : "false",
          "display.on.consent.screen" : "false",
          "saml.onetimeuse.condition" : "false"
        },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : true,
        "nodeReRegistrationTimeout" : -1,
        "protocolMappers" : [ {
          "id" : "5fda0ad9-d8d7-46db-96e9-8e0123150534",
          "name" : "Client Host",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usersessionmodel-note-mapper",
          "consentRequired" : false,
          "config" : {
            "user.session.note" : "clientHost",
            "userinfo.token.claim" : "true",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "clientHost",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "ae8cae65-65ac-4d21-91c3-374a36dc6717",
          "name" : "isRoot",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "isRoot",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "isRoot",
            "jsonType.label" : "boolean"
          }
        }, {
          "id" : "479d50c9-f553-4189-8785-124b33972a99",
          "name" : "Client ID",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usersessionmodel-note-mapper",
          "consentRequired" : false,
          "config" : {
            "user.session.note" : "clientId",
            "userinfo.token.claim" : "true",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "clientId",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "22a67ab0-351a-4ed8-8c3f-23c55a460d6c",
          "name" : "workspaces",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "multivalued" : "true",
            "userinfo.token.claim" : "true",
            "user.attribute" : "workspaces",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "workspaces",
            "jsonType.label" : "JSON"
          }
        }, {
          "id" : "9b06e556-8d82-41fc-a3d3-115d1776c428",
          "name" : "Client IP Address",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usersessionmodel-note-mapper",
          "consentRequired" : false,
          "config" : {
            "user.session.note" : "clientAddress",
            "userinfo.token.claim" : "true",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "clientAddress",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "15c049f1-c5f4-48f9-b6b4-1fac49b3a654",
          "name" : "aud",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-audience-mapper",
          "consentRequired" : false,
          "config" : {
            "included.client.audience" : "darwin-client",
            "id.token.claim" : "false",
            "access.token.claim" : "true",
            "included.custom.audience" : "darwin-client",
            "userinfo.token.claim" : "false"
          }
        } ],
        "defaultClientScopes" : [ "web-origins", "role_list", "roles", "profile", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "13eefbbe-e918-47e4-8734-8863e3dccdd7",
        "clientId" : "realm-charlescd",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "441cfd37-8443-4f3d-bf6c-ee9861b04e28",
        "redirectUris" : [ ],
        "webOrigins" : [ ],
        "notBefore" : 0,
        "bearerOnly" : false,
        "consentRequired" : false,
        "standardFlowEnabled" : false,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : false,
        "serviceAccountsEnabled" : true,
        "publicClient" : false,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : {
          "saml.assertion.signature" : "false",
          "saml.force.post.binding" : "false",
          "saml.multivalued.roles" : "false",
          "saml.encrypt" : "false",
          "saml.server.signature" : "false",
          "saml.server.signature.keyinfo.ext" : "false",
          "exclude.session.state.from.auth.response" : "false",
          "saml_force_name_id_format" : "false",
          "saml.client.signature" : "false",
          "tls.client.certificate.bound.access.tokens" : "false",
          "saml.authnstatement" : "false",
          "display.on.consent.screen" : "false",
          "saml.onetimeuse.condition" : "false"
        },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : true,
        "nodeReRegistrationTimeout" : -1,
        "protocolMappers" : [ {
          "id" : "97f7fcb8-3b69-4f0f-bb67-79677027b4ce",
          "name" : "Client IP Address",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usersessionmodel-note-mapper",
          "consentRequired" : false,
          "config" : {
            "user.session.note" : "clientAddress",
            "userinfo.token.claim" : "true",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "clientAddress",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "2bc9a7de-d46a-4ce4-893d-4692ea645848",
          "name" : "Client ID",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usersessionmodel-note-mapper",
          "consentRequired" : false,
          "config" : {
            "user.session.note" : "clientId",
            "userinfo.token.claim" : "true",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "clientId",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "94f843b3-b5fb-443a-b82e-3703a420eaf7",
          "name" : "Client Host",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usersessionmodel-note-mapper",
          "consentRequired" : false,
          "config" : {
            "user.session.note" : "clientHost",
            "userinfo.token.claim" : "true",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "clientHost",
            "jsonType.label" : "String"
          }
        } ],
        "defaultClientScopes" : [ "web-origins", "role_list", "profile", "roles", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "0fa7bcc9-9bea-4070-9bc7-3fdb70d83d6c",
        "clientId" : "realm-management",
        "name" : "${client_realm-management}",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "**********",
        "redirectUris" : [ ],
        "webOrigins" : [ ],
        "notBefore" : 0,
        "bearerOnly" : true,
        "consentRequired" : false,
        "standardFlowEnabled" : true,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : false,
        "serviceAccountsEnabled" : false,
        "publicClient" : false,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : { },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : false,
        "nodeReRegistrationTimeout" : 0,
        "defaultClientScopes" : [ "web-origins", "role_list", "profile", "roles", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      }, {
        "id" : "31a3cf7c-7d64-4141-b2ae-79aaa4c45b85",
        "clientId" : "security-admin-console",
        "name" : "${client_security-admin-console}",
        "rootUrl" : "${authAdminUrl}",
        "baseUrl" : "/admin/charlescd/console/",
        "surrogateAuthRequired" : false,
        "enabled" : true,
        "alwaysDisplayInConsole" : false,
        "clientAuthenticatorType" : "client-secret",
        "secret" : "**********",
        "redirectUris" : [ "/admin/charlescd/console/*" ],
        "webOrigins" : [ "+" ],
        "notBefore" : 0,
        "bearerOnly" : false,
        "consentRequired" : false,
        "standardFlowEnabled" : true,
        "implicitFlowEnabled" : false,
        "directAccessGrantsEnabled" : false,
        "serviceAccountsEnabled" : false,
        "publicClient" : true,
        "frontchannelLogout" : false,
        "protocol" : "openid-connect",
        "attributes" : {
          "pkce.code.challenge.method" : "S256"
        },
        "authenticationFlowBindingOverrides" : { },
        "fullScopeAllowed" : false,
        "nodeReRegistrationTimeout" : 0,
        "protocolMappers" : [ {
          "id" : "b4bc18c9-9276-442f-9c0e-66b7a087f857",
          "name" : "locale",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "locale",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "locale",
            "jsonType.label" : "String"
          }
        } ],
        "defaultClientScopes" : [ "web-origins", "role_list", "profile", "roles", "email" ],
        "optionalClientScopes" : [ "address", "phone", "offline_access", "microprofile-jwt" ]
      } ],
      "clientScopes" : [ {
        "id" : "414f3002-e103-4d1f-8868-0b8260f25734",
        "name" : "offline_access",
        "description" : "OpenID Connect built-in scope: offline_access",
        "protocol" : "openid-connect",
        "attributes" : {
          "consent.screen.text" : "${offlineAccessScopeConsentText}",
          "display.on.consent.screen" : "true"
        }
      }, {
        "id" : "a9c01b63-95b3-4f48-8d67-44e34f9939d0",
        "name" : "role_list",
        "description" : "SAML role list",
        "protocol" : "saml",
        "attributes" : {
          "consent.screen.text" : "${samlRoleListScopeConsentText}",
          "display.on.consent.screen" : "true"
        },
        "protocolMappers" : [ {
          "id" : "4482a33d-2d6b-4b70-b827-803656f1f101",
          "name" : "role list",
          "protocol" : "saml",
          "protocolMapper" : "saml-role-list-mapper",
          "consentRequired" : false,
          "config" : {
            "single" : "false",
            "attribute.nameformat" : "Basic",
            "attribute.name" : "Role"
          }
        } ]
      }, {
        "id" : "ba1093f5-c498-4fc8-a610-1c84d192f3dc",
        "name" : "profile",
        "description" : "OpenID Connect built-in scope: profile",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "true",
          "display.on.consent.screen" : "true",
          "consent.screen.text" : "${profileScopeConsentText}"
        },
        "protocolMappers" : [ {
          "id" : "a4e9ee4d-72d6-4af2-aa0c-c466acd7354c",
          "name" : "locale",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "locale",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "locale",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "0012b1e0-3cfa-431b-925c-ea57260a9ff1",
          "name" : "nickname",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "nickname",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "nickname",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "63e9132e-b01d-417d-9b20-d72b1f2279df",
          "name" : "website",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "website",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "website",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "c88d5545-f5e7-45aa-ad16-c5cc19b2d355",
          "name" : "updated at",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "updatedAt",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "updated_at",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "240b7972-01d2-4d79-9830-2ac8cfc5bfa9",
          "name" : "picture",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "picture",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "picture",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "aa71a11c-ffb7-4098-bcea-6f27570fdf3d",
          "name" : "middle name",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "middleName",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "middle_name",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "09cefe6b-7ade-46bd-a922-1a94dabcc878",
          "name" : "profile",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "profile",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "profile",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "862ae23b-a888-48d6-94dc-d64d9e9496b0",
          "name" : "birthdate",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "birthdate",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "birthdate",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "8fe92248-c751-4434-aef6-6c1e1265a6af",
          "name" : "gender",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "gender",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "gender",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "1f335097-1672-4923-81d2-6c394887fabe",
          "name" : "username",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-property-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "username",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "preferred_username",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "1c0734f5-62eb-41d6-a8b0-2616e93f25f1",
          "name" : "zoneinfo",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "zoneinfo",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "zoneinfo",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "96dbe8f9-7dba-4b67-afd0-8e8f4399f35e",
          "name" : "given name",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-property-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "firstName",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "given_name",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "8fc5423e-decf-411e-a6bb-1f4db1893271",
          "name" : "full name",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-full-name-mapper",
          "consentRequired" : false,
          "config" : {
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "userinfo.token.claim" : "true"
          }
        }, {
          "id" : "f33c09e0-49f4-4614-b227-0ee24c249fb2",
          "name" : "family name",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-property-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "lastName",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "family_name",
            "jsonType.label" : "String"
          }
        } ]
      }, {
        "id" : "b6e794e4-a2ea-4b8d-8c04-64b6ff62ca6e",
        "name" : "email",
        "description" : "OpenID Connect built-in scope: email",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "true",
          "display.on.consent.screen" : "true",
          "consent.screen.text" : "${emailScopeConsentText}"
        },
        "protocolMappers" : [ {
          "id" : "ce3ba982-2517-486a-a7bb-2f57c9fc4a05",
          "name" : "email",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-property-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "email",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "email",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "54ca9c32-f3fa-44b4-8abb-dee47e5b6528",
          "name" : "email verified",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-property-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "emailVerified",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "email_verified",
            "jsonType.label" : "boolean"
          }
        } ]
      }, {
        "id" : "1f9f3ab1-92ec-43c8-b0cd-67c4586c48c2",
        "name" : "address",
        "description" : "OpenID Connect built-in scope: address",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "true",
          "display.on.consent.screen" : "true",
          "consent.screen.text" : "${addressScopeConsentText}"
        },
        "protocolMappers" : [ {
          "id" : "a708f9ea-26b5-4fa1-b53f-77b72de7d12e",
          "name" : "address",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-address-mapper",
          "consentRequired" : false,
          "config" : {
            "user.attribute.formatted" : "formatted",
            "user.attribute.country" : "country",
            "user.attribute.postal_code" : "postal_code",
            "userinfo.token.claim" : "true",
            "user.attribute.street" : "street",
            "id.token.claim" : "true",
            "user.attribute.region" : "region",
            "access.token.claim" : "true",
            "user.attribute.locality" : "locality"
          }
        } ]
      }, {
        "id" : "3fa7d8c3-e111-4d2a-ab10-4401410c4df4",
        "name" : "phone",
        "description" : "OpenID Connect built-in scope: phone",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "true",
          "display.on.consent.screen" : "true",
          "consent.screen.text" : "${phoneScopeConsentText}"
        },
        "protocolMappers" : [ {
          "id" : "8e973cf8-bba6-476d-a7e0-975e1d87cce9",
          "name" : "phone number",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "phoneNumber",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "phone_number",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "47ffca6b-c598-4b3d-b2ad-748cc1c932ab",
          "name" : "phone number verified",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-attribute-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "phoneNumberVerified",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "phone_number_verified",
            "jsonType.label" : "boolean"
          }
        } ]
      }, {
        "id" : "721f5006-c36d-4119-8a8e-923e86c93080",
        "name" : "roles",
        "description" : "OpenID Connect scope for add user roles to the access token",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "false",
          "display.on.consent.screen" : "true",
          "consent.screen.text" : "${rolesScopeConsentText}"
        },
        "protocolMappers" : [ {
          "id" : "46fb1ca1-70b1-4a75-b7af-568e96b4b79a",
          "name" : "client roles",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-client-role-mapper",
          "consentRequired" : false,
          "config" : {
            "user.attribute" : "foo",
            "access.token.claim" : "true",
            "claim.name" : "resource_access.${client_id}.roles",
            "jsonType.label" : "String",
            "multivalued" : "true"
          }
        }, {
          "id" : "1215a66a-70e4-415b-bee8-f6cf44dfaca7",
          "name" : "realm roles",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-realm-role-mapper",
          "consentRequired" : false,
          "config" : {
            "user.attribute" : "foo",
            "access.token.claim" : "true",
            "claim.name" : "realm_access.roles",
            "jsonType.label" : "String",
            "multivalued" : "true"
          }
        }, {
          "id" : "92daef75-7411-4ca2-9e94-f1399c989417",
          "name" : "audience resolve",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-audience-resolve-mapper",
          "consentRequired" : false,
          "config" : { }
        } ]
      }, {
        "id" : "77ab3c88-0dc0-4f87-a158-84cc62bb40c4",
        "name" : "web-origins",
        "description" : "OpenID Connect scope for add allowed web origins to the access token",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "false",
          "display.on.consent.screen" : "false",
          "consent.screen.text" : ""
        },
        "protocolMappers" : [ {
          "id" : "a1262611-a987-4237-9fa3-9fb1e548856a",
          "name" : "allowed web origins",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-allowed-origins-mapper",
          "consentRequired" : false,
          "config" : { }
        } ]
      }, {
        "id" : "db8effba-3f42-496f-8134-6d8e8008b81c",
        "name" : "microprofile-jwt",
        "description" : "Microprofile - JWT built-in scope",
        "protocol" : "openid-connect",
        "attributes" : {
          "include.in.token.scope" : "true",
          "display.on.consent.screen" : "false"
        },
        "protocolMappers" : [ {
          "id" : "a7002f0e-0c87-458f-a1b5-5eea99585948",
          "name" : "groups",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-realm-role-mapper",
          "consentRequired" : false,
          "config" : {
            "multivalued" : "true",
            "userinfo.token.claim" : "true",
            "user.attribute" : "foo",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "groups",
            "jsonType.label" : "String"
          }
        }, {
          "id" : "a9372b66-f51b-4cab-97d7-70fabc0ca00e",
          "name" : "upn",
          "protocol" : "openid-connect",
          "protocolMapper" : "oidc-usermodel-property-mapper",
          "consentRequired" : false,
          "config" : {
            "userinfo.token.claim" : "true",
            "user.attribute" : "username",
            "id.token.claim" : "true",
            "access.token.claim" : "true",
            "claim.name" : "upn",
            "jsonType.label" : "String"
          }
        } ]
      } ],
      "defaultDefaultClientScopes" : [ "role_list", "profile", "email", "roles", "web-origins" ],
      "defaultOptionalClientScopes" : [ "offline_access", "address", "phone", "microprofile-jwt" ],
      "browserSecurityHeaders" : {
        "contentSecurityPolicyReportOnly" : "",
        "xContentTypeOptions" : "nosniff",
        "xRobotsTag" : "none",
        "xFrameOptions" : "SAMEORIGIN",
        "contentSecurityPolicy" : "frame-src 'self'; frame-ancestors 'self'; object-src 'none';",
        "xXSSProtection" : "1; mode=block",
        "strictTransportSecurity" : "max-age=31536000; includeSubDomains"
      },
      "smtpServer" : { },
      "eventsEnabled" : false,
      "eventsListeners" : [ "jboss-logging" ],
      "enabledEventTypes" : [ ],
      "adminEventsEnabled" : false,
      "adminEventsDetailsEnabled" : false,
      "components" : {
        "org.keycloak.services.clientregistration.policy.ClientRegistrationPolicy" : [ {
          "id" : "1a01c5dd-d361-48af-9422-1b5097882840",
          "name" : "Full Scope Disabled",
          "providerId" : "scope",
          "subType" : "anonymous",
          "subComponents" : { },
          "config" : { }
        }, {
          "id" : "cf5905ee-dca3-4b12-ad67-4f57ceabe6b6",
          "name" : "Allowed Protocol Mapper Types",
          "providerId" : "allowed-protocol-mappers",
          "subType" : "authenticated",
          "subComponents" : { },
          "config" : {
            "allowed-protocol-mapper-types" : [ "saml-role-list-mapper", "saml-user-attribute-mapper", "oidc-full-name-mapper", "saml-user-property-mapper", "oidc-address-mapper", "oidc-sha256-pairwise-sub-mapper", "oidc-usermodel-property-mapper", "oidc-usermodel-attribute-mapper" ]
          }
        }, {
          "id" : "ae19ad8d-1e1a-4d13-b4a8-2ee19b7ebe91",
          "name" : "Allowed Client Scopes",
          "providerId" : "allowed-client-templates",
          "subType" : "authenticated",
          "subComponents" : { },
          "config" : {
            "allow-default-scopes" : [ "true" ]
          }
        }, {
          "id" : "c35eaf9c-761f-4660-994e-e4fc1f5d652e",
          "name" : "Max Clients Limit",
          "providerId" : "max-clients",
          "subType" : "anonymous",
          "subComponents" : { },
          "config" : {
            "max-clients" : [ "200" ]
          }
        }, {
          "id" : "80484449-6903-4ecc-958e-48a0e378f0eb",
          "name" : "Allowed Protocol Mapper Types",
          "providerId" : "allowed-protocol-mappers",
          "subType" : "anonymous",
          "subComponents" : { },
          "config" : {
            "allowed-protocol-mapper-types" : [ "oidc-full-name-mapper", "oidc-address-mapper", "saml-role-list-mapper", "saml-user-attribute-mapper", "saml-user-property-mapper", "oidc-sha256-pairwise-sub-mapper", "oidc-usermodel-attribute-mapper", "oidc-usermodel-property-mapper" ]
          }
        }, {
          "id" : "f76f580f-dc7a-471e-8694-4a20446d03dc",
          "name" : "Trusted Hosts",
          "providerId" : "trusted-hosts",
          "subType" : "anonymous",
          "subComponents" : { },
          "config" : {
            "host-sending-registration-request-must-match" : [ "true" ],
            "client-uris-must-match" : [ "true" ]
          }
        }, {
          "id" : "ce3728a7-d6a1-478c-a87e-571fcfe3be2d",
          "name" : "Allowed Client Scopes",
          "providerId" : "allowed-client-templates",
          "subType" : "anonymous",
          "subComponents" : { },
          "config" : {
            "allow-default-scopes" : [ "true" ]
          }
        }, {
          "id" : "ca0c956b-eea3-408b-a4f0-ccc36346a98d",
          "name" : "Consent Required",
          "providerId" : "consent-required",
          "subType" : "anonymous",
          "subComponents" : { },
          "config" : { }
        } ],
        "org.keycloak.keys.KeyProvider" : [ {
          "id" : "c7777de2-a994-41d5-92c3-54b54bf3f6bd",
          "name" : "hmac-generated",
          "providerId" : "hmac-generated",
          "subComponents" : { },
          "config" : {
            "kid" : [ "fcc98da4-42bc-48e7-9313-a4aca11e082f" ],
            "secret" : [ "a4JdqDWQ95r24Os5mFPknMRKgUYtFl5mwfRrhlI23gYPodskjBeq1WScVGk1QcQoL1TWiIWX_SPwhCYL4fAYEw" ],
            "priority" : [ "100" ],
            "algorithm" : [ "HS256" ]
          }
        }, {
          "id" : "598a3b2a-4581-4b0d-aff1-89bc48ea742d",
          "name" : "rsa-generated",
          "providerId" : "rsa-generated",
          "subComponents" : { },
          "config" : {
            "privateKey" : [ "MIIEogIBAAKCAQEAhCEz5YfaBGJIIz9OZiWrjvItpJPXJ+hY9V/vjyhlBbS2iILVDnzD+MgLgYfGtGUBH/6nO0iCXTDwomoHOEgcJbaEj0KFZomRGAIz48bbia5+THpEbM/iWbSV0Ia9YE6ITNu8YVBxhusVofzoe3Oa8HBlDU+wfp7wWCyJS/SH6kRGP6kPGQ8HYkMGIt1dFb2UKVPiB2lZbCJfataB1K64qvPhd4mZDX09PwsRZVejU4PVXGxXtYy4KQtX6UaDRfP7Baeh/Hx6Pf/rWb2OToFkYzmjLGLdMrCtB06yXQ81H9X7l4Qy3LtVEZT74pwcT0EOlwYsyrbtYa2WmSMGixi4yQIDAQABAoIBAEVqqDg7wkexVtLlzIuP2O0VwPMJFO2LfUkUqOgeQczYn1li2wpsdAz9FEZuDe/ybL/havyTYKITNyks6TQhdmA93rDhMvKm7YqehaJydB6GhSYqyk4cfX/Bhz/xugah26v9eZ/qwmoukcPz+jP5jXoqonx21HQBjqXUaCF2i/2ALjyyvFOE/RbVM1+DCyup3xKYmW4sfye5MDTusgT+AaL/JnHYSeGjJ36fVPJocE4JKVkQ5Ll62iiIh+GBrWULPpxbfrnsDzgr4Ri91A2UtnJMJLoWoc+P1WgGo04A6ddJb1pvY856kPB8yqcJKaUwFELaZLf5o1H7cGdL29ZQIDECgYEA83h4MMnYKu7N1wpUIYu88CNA5TlEbqzbxIjzKKk1w2+0M+ZqhvGrPc/0DzSvhq4c7SEFxZW/u0WZTcIvdMvlUTOJxbIFOzNEDnZpUTp3u/oJ8XD80SuLCkC+SHPwvQo6Xx6MeVGe97Pq8GaCUF+uk/+5RXXae0kqO/0CzCbMjMUCgYEAiu3n7eYpG+dr+kshFU1eU2Dlp7gODSmzO7Q42HgyGoazzAsr5+ZaksGAorl7qqlciEHeEfvgj1QZD11NmBxxoL7SVWJdL1oeSZmtSoDNDby3SBs+GyZLqNQzKrqzHxOc+XrbrXRuSD3/+NLkjGKJY8fLit9eOWXmaOMo0ngihDUCgYA2ehYqlH9R2+0i2KTKfMHh2YGDyLSPLw5dg2clCfeFq1De7AeZ+ikew5EQdfFwaTT/ugvYkhE8je4nf/OuZpEBAk8pdRPGk0n/Em+uRS7VWLUw2N84zk1mFeZ9v7N2GPvGnMdBvgmb0x4WfFlcMoyVgPqrmBsyysQweARQOb47IQKBgAFGJz9WQgBAggv8jmQcnoXTOKfuFyrlvAALKg5KI+N8Yr+3RoLM6P25io1zd//bp76UJA40Kh4GXmh2qZSAhkY8Gb+wtDwP7oEsSJuLTNYYafHeVhZ3pm/46jM1HRlm26SqDMOtcql08Bj/Dht/d9UTavluDPYnyhIiKyiq814VAoGAND2/54Ik2GplLlCrb6i5QkF5IeqjUlhMxPGJFkEhbyGN1E7YOTEKvkzzWSJ/kiqO3ueBPi4G1Mzbg2d115uwtwBh6WPUmWzN2po/2mNd5InTKNJZC338KCi3ZlOEnbDpxsXjMV8lMg9oBq0rY6W3e/v/yAKQgTVyUruPY6x3eNQ=" ],
            "certificate" : [ "MIICoTCCAYkCBgF3JfKZTjANBgkqhkiG9w0BAQsFADAUMRIwEAYDVQQDDAljaGFybGVzY2QwHhcNMjEwMTIxMTcxNDUxWhcNMzEwMTIxMTcxNjMxWjAUMRIwEAYDVQQDDAljaGFybGVzY2QwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCEITPlh9oEYkgjP05mJauO8i2kk9cn6Fj1X++PKGUFtLaIgtUOfMP4yAuBh8a0ZQEf/qc7SIJdMPCiagc4SBwltoSPQoVmiZEYAjPjxtuJrn5MekRsz+JZtJXQhr1gTohM27xhUHGG6xWh/Oh7c5rwcGUNT7B+nvBYLIlL9IfqREY/qQ8ZDwdiQwYi3V0VvZQpU+IHaVlsIl9q1oHUrriq8+F3iZkNfT0/CxFlV6NTg9VcbFe1jLgpC1fpRoNF8/sFp6H8fHo9/+tZvY5OgWRjOaMsYt0ysK0HTrJdDzUf1fuXhDLcu1URlPvinBxPQQ6XBizKtu1hrZaZIwaLGLjJAgMBAAEwDQYJKoZIhvcNAQELBQADggEBAE802/2/RtomuyTnFD5KH0uzNIgUxZBQg2S7YgDVcIGRFSyx49xlDjBAKNZgItN7SAamMHIVZI62MhLsAomNIoKzbNH3y+CUFXQC5TJictrRkudmSoNpv3zfMdXSXpkk/AIc56bO5QyFkbn9ar+cbSEVbmCk/BdV23sDP6/V91a/zmp0m+NdUE5WxeDbcrKqrJk+D3sKlL34RyueQj7xLPSD+4PgSOgZe0j3RTgEdBsSLwY/ASoE8IqaWBrIL4OskKrDquCl7VPKz6iGEK8Y5vbvVib9Y6yjO/xim2WxYr73SdeKsDUOirvERZVu6tvqbhenUP7011mHxS8AJ+Goryg=" ],
            "priority" : [ "100" ]
          }
        }, {
          "id" : "08fbc795-2faa-4182-940e-9e0c860c117c",
          "name" : "aes-generated",
          "providerId" : "aes-generated",
          "subComponents" : { },
          "config" : {
            "kid" : [ "6a21c9d0-0248-4a9c-b3cd-c033539e6cd5" ],
            "secret" : [ "lOX7uyHV2YufPXi0OafBAQ" ],
            "priority" : [ "100" ]
          }
        } ]
      },
      "internationalizationEnabled" : false,
      "supportedLocales" : [ ],
      "authenticationFlows" : [ {
        "id" : "034476f7-d5e3-4eb9-9ad1-ba5b02e6cb30",
        "alias" : "Account verification options",
        "description" : "Method with which to verity the existing account",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "idp-email-verification",
          "requirement" : "ALTERNATIVE",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "ALTERNATIVE",
          "priority" : 20,
          "flowAlias" : "Verify Existing Account by Re-authentication",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "868ef088-5342-4474-9e84-bf1195aa84f1",
        "alias" : "Authentication Options",
        "description" : "Authentication options.",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "basic-auth",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "basic-auth-otp",
          "requirement" : "DISABLED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "auth-spnego",
          "requirement" : "DISABLED",
          "priority" : 30,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "99a9f27f-cff3-416a-b815-f858c3e384b5",
        "alias" : "Browser - Conditional OTP",
        "description" : "Flow to determine if the OTP is required for the authentication",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "conditional-user-configured",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "auth-otp-form",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "c34d8997-cd86-4b89-af21-e862b4b8afa5",
        "alias" : "Direct Grant - Conditional OTP",
        "description" : "Flow to determine if the OTP is required for the authentication",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "conditional-user-configured",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "direct-grant-validate-otp",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "8c415cec-7342-4731-9884-8f57794e9141",
        "alias" : "First broker login - Conditional OTP",
        "description" : "Flow to determine if the OTP is required for the authentication",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "conditional-user-configured",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "auth-otp-form",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "8bef6b05-9a5e-4a77-8f99-4ad16d6bf1df",
        "alias" : "Handle Existing Account",
        "description" : "Handle what to do if there is existing account with same email/username like authenticated identity provider",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "idp-confirm-link",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "REQUIRED",
          "priority" : 20,
          "flowAlias" : "Account verification options",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "f7006794-47a5-4f67-985c-041caa06985d",
        "alias" : "Reset - Conditional OTP",
        "description" : "Flow to determine if the OTP should be reset or not. Set to REQUIRED to force.",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "conditional-user-configured",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "reset-otp",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "9ce0be83-cf7d-4f3c-8e5f-e9fb441a616e",
        "alias" : "User creation or linking",
        "description" : "Flow for the existing/non-existing user alternatives",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticatorConfig" : "create unique user config",
          "authenticator" : "idp-create-user-if-unique",
          "requirement" : "ALTERNATIVE",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "ALTERNATIVE",
          "priority" : 20,
          "flowAlias" : "Handle Existing Account",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "d3d27a0d-fbbe-4c94-b86e-a7a1fb3804a6",
        "alias" : "Verify Existing Account by Re-authentication",
        "description" : "Reauthentication of existing account",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "idp-username-password-form",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "CONDITIONAL",
          "priority" : 20,
          "flowAlias" : "First broker login - Conditional OTP",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "1440bc1a-0064-4d39-8d02-8e28f490f3e2",
        "alias" : "browser",
        "description" : "browser based authentication",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "auth-cookie",
          "requirement" : "ALTERNATIVE",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "auth-spnego",
          "requirement" : "DISABLED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "identity-provider-redirector",
          "requirement" : "ALTERNATIVE",
          "priority" : 25,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "ALTERNATIVE",
          "priority" : 30,
          "flowAlias" : "forms",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "6db91b56-fb82-493b-b6de-2f03ffeff99d",
        "alias" : "clients",
        "description" : "Base authentication for clients",
        "providerId" : "client-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "client-secret",
          "requirement" : "ALTERNATIVE",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "client-jwt",
          "requirement" : "ALTERNATIVE",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "client-secret-jwt",
          "requirement" : "ALTERNATIVE",
          "priority" : 30,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "client-x509",
          "requirement" : "ALTERNATIVE",
          "priority" : 40,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "f7555845-d422-410f-bf8b-68b6768c13ae",
        "alias" : "direct grant",
        "description" : "OpenID Connect Resource Owner Grant",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "direct-grant-validate-username",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "direct-grant-validate-password",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "CONDITIONAL",
          "priority" : 30,
          "flowAlias" : "Direct Grant - Conditional OTP",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "082fbabf-9441-4e5a-ae97-4aaaf9c33565",
        "alias" : "docker auth",
        "description" : "Used by Docker clients to authenticate against the IDP",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "docker-http-basic-authenticator",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "f93327e9-a1e5-46b0-a955-1625b2ca024b",
        "alias" : "first broker login",
        "description" : "Actions taken after first broker login with identity provider account, which is not yet linked to any Keycloak account",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticatorConfig" : "review profile config",
          "authenticator" : "idp-review-profile",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "REQUIRED",
          "priority" : 20,
          "flowAlias" : "User creation or linking",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "bd56254e-d650-44a5-8de0-ea1b254a104b",
        "alias" : "forms",
        "description" : "Username, password, otp and other auth forms.",
        "providerId" : "basic-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "auth-username-password-form",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "CONDITIONAL",
          "priority" : 20,
          "flowAlias" : "Browser - Conditional OTP",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "9fca1f6b-efae-4471-9a6d-f1e08261ad5e",
        "alias" : "http challenge",
        "description" : "An authentication flow based on challenge-response HTTP Authentication Schemes",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "no-cookie-redirect",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "REQUIRED",
          "priority" : 20,
          "flowAlias" : "Authentication Options",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "46385f2b-e539-4c81-b308-965162eabfdd",
        "alias" : "registration",
        "description" : "registration flow",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "registration-page-form",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "flowAlias" : "registration form",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "06f677a4-f5b9-40a4-ae48-c21b807898af",
        "alias" : "registration form",
        "description" : "registration form",
        "providerId" : "form-flow",
        "topLevel" : false,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "registration-user-creation",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "registration-profile-action",
          "requirement" : "REQUIRED",
          "priority" : 40,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "registration-password-action",
          "requirement" : "REQUIRED",
          "priority" : 50,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "registration-recaptcha-action",
          "requirement" : "DISABLED",
          "priority" : 60,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      }, {
        "id" : "6a4a292d-18fc-4098-a6c0-eda3d69d84ed",
        "alias" : "reset credentials",
        "description" : "Reset credentials for a user if they forgot their password or something",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "reset-credentials-choose-user",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "reset-credential-email",
          "requirement" : "REQUIRED",
          "priority" : 20,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "authenticator" : "reset-password",
          "requirement" : "REQUIRED",
          "priority" : 30,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        }, {
          "requirement" : "CONDITIONAL",
          "priority" : 40,
          "flowAlias" : "Reset - Conditional OTP",
          "userSetupAllowed" : false,
          "autheticatorFlow" : true
        } ]
      }, {
        "id" : "e0951a6c-6c1b-4d94-8f5e-3d70ab3fbbc3",
        "alias" : "saml ecp",
        "description" : "SAML ECP Profile Authentication Flow",
        "providerId" : "basic-flow",
        "topLevel" : true,
        "builtIn" : true,
        "authenticationExecutions" : [ {
          "authenticator" : "http-basic-authenticator",
          "requirement" : "REQUIRED",
          "priority" : 10,
          "userSetupAllowed" : false,
          "autheticatorFlow" : false
        } ]
      } ],
      "authenticatorConfig" : [ {
        "id" : "9abed47e-81e6-4a08-a987-3ea1e047cb9a",
        "alias" : "create unique user config",
        "config" : {
          "require.password.update.after.registration" : "false"
        }
      }, {
        "id" : "024f08bf-ad69-4f00-b727-3314f52ce66e",
        "alias" : "review profile config",
        "config" : {
          "update.profile.on.first.login" : "missing"
        }
      } ],
      "requiredActions" : [ {
        "alias" : "CONFIGURE_TOTP",
        "name" : "Configure OTP",
        "providerId" : "CONFIGURE_TOTP",
        "enabled" : true,
        "defaultAction" : false,
        "priority" : 10,
        "config" : { }
      }, {
        "alias" : "terms_and_conditions",
        "name" : "Terms and Conditions",
        "providerId" : "terms_and_conditions",
        "enabled" : false,
        "defaultAction" : false,
        "priority" : 20,
        "config" : { }
      }, {
        "alias" : "UPDATE_PASSWORD",
        "name" : "Update Password",
        "providerId" : "UPDATE_PASSWORD",
        "enabled" : true,
        "defaultAction" : false,
        "priority" : 30,
        "config" : { }
      }, {
        "alias" : "UPDATE_PROFILE",
        "name" : "Update Profile",
        "providerId" : "UPDATE_PROFILE",
        "enabled" : true,
        "defaultAction" : false,
        "priority" : 40,
        "config" : { }
      }, {
        "alias" : "VERIFY_EMAIL",
        "name" : "Verify Email",
        "providerId" : "VERIFY_EMAIL",
        "enabled" : true,
        "defaultAction" : false,
        "priority" : 50,
        "config" : { }
      }, {
        "alias" : "update_user_locale",
        "name" : "Update User Locale",
        "providerId" : "update_user_locale",
        "enabled" : true,
        "defaultAction" : false,
        "priority" : 1000,
        "config" : { }
      } ],
      "browserFlow" : "browser",
      "registrationFlow" : "registration",
      "directGrantFlow" : "direct grant",
      "resetCredentialsFlow" : "reset credentials",
      "clientAuthenticationFlow" : "clients",
      "dockerAuthenticationFlow" : "docker auth",
      "attributes" : { },
      "keycloakVersion" : "11.0.2",
      "userManagedAccessAllowed" : false
    } ]
kind: ConfigMap
metadata:
  name: keycloak-realm
---
# Source: charlescd/templates/postgres-cm.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: charles-postgres
data:
  charles-init.sh: |
    #!/bin/bash
    export PGUSER=postgres
    export PGPASSWORD=firstpassword
    psql -c "CREATE DATABASE charlescd_butler"
    psql -c "CREATE USER charlescd_butler WITH PASSWORD '3f2Yq8R4HhDCnefR'"
    psql -c "ALTER DATABASE charlescd_butler OWNER TO charlescd_butler"
    psql -d charlescd_butler -c "CREATE EXTENSION IF NOT EXISTS pgcrypto"
    psql -c "CREATE DATABASE charlescd_moove"
    psql -c "CREATE USER charlescd_moove WITH PASSWORD '7Qs2KuM9gYzw48BS'"
    psql -c "ALTER DATABASE charlescd_moove OWNER TO charlescd_moove"
    psql -d charlescd_moove -c "CREATE EXTENSION IF NOT EXISTS pgcrypto"
    psql -c "CREATE DATABASE charlescd_villager"
    psql -c "CREATE USER charlescd_villager WITH PASSWORD 'ZkQ67Lnhs2bM3MPN'"
    psql -c "ALTER DATABASE charlescd_villager OWNER TO charlescd_villager"
    psql -d charlescd_villager -c "CREATE EXTENSION IF NOT EXISTS pgcrypto"
    psql -c "CREATE DATABASE keycloak"
    psql -c "CREATE USER keycloak WITH PASSWORD 'DCWYW66Mq2ca6w8u'"
    psql -c "ALTER DATABASE keycloak OWNER TO keycloak"

    psql -c "CREATE DATABASE charlescd_compass"
    psql -c "CREATE USER charlescd_compass WITH PASSWORD 'C1UinUu6N0vc'"
    psql -c "ALTER DATABASE charlescd_compass OWNER TO charlescd_compass"
    psql -d charlescd_compass -c "CREATE EXTENSION IF NOT EXISTS pgcrypto"
---
# Source: charlescd/charts/ingress-nginx/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
  name: charlescd-ingress-nginx
rules:
  - apiGroups:
      - ""
    resources:
      - configmaps
      - endpoints
      - nodes
      - pods
      - secrets
    verbs:
      - list
      - watch
  - apiGroups:
      - ""
    resources:
      - nodes
    verbs:
      - get
  - apiGroups:
      - ""
    resources:
      - services
    verbs:
      - get
      - list
      - update
      - watch
  - apiGroups:
      - extensions
      - "networking.k8s.io" # k8s 1.14+
    resources:
      - ingresses
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - ""
    resources:
      - events
    verbs:
      - create
      - patch
  - apiGroups:
      - extensions
      - "networking.k8s.io" # k8s 1.14+
    resources:
      - ingresses/status
    verbs:
      - update
  - apiGroups:
      - "networking.k8s.io" # k8s 1.14+
    resources:
      - ingressclasses
    verbs:
      - get
      - list
      - watch
---
# Source: charlescd/templates/cluster-role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: charlescd-octopipe-role-charles
rules:
- apiGroups:
  - "*"
  resources:
  - "*"
  verbs:
  - "*"
---
# Source: charlescd/charts/ingress-nginx/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
  name: charlescd-ingress-nginx
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: charlescd-ingress-nginx
subjects:
  - kind: ServiceAccount
    name: charlescd-ingress-nginx
    namespace: charles
---
# Source: charlescd/templates/cluster-role-binding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  annotations:
  name: charlescd-octopipe-role-binding-charles
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: charlescd-octopipe-role-charles
subjects:
- kind: ServiceAccount
  name: charlescd-octopipe
  namespace: charles
---
# Source: charlescd/charts/ingress-nginx/templates/controller-role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: controller
  name: charlescd-ingress-nginx
rules:
  - apiGroups:
      - ""
    resources:
      - namespaces
    verbs:
      - get
  - apiGroups:
      - ""
    resources:
      - configmaps
      - pods
      - secrets
      - endpoints
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - ""
    resources:
      - services
    verbs:
      - get
      - list
      - update
      - watch
  - apiGroups:
      - extensions
      - "networking.k8s.io" # k8s 1.14+
    resources:
      - ingresses
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - extensions
      - "networking.k8s.io" # k8s 1.14+
    resources:
      - ingresses/status
    verbs:
      - update
  - apiGroups:
      - "networking.k8s.io" # k8s 1.14+
    resources:
      - ingressclasses
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - ""
    resources:
      - configmaps
    resourceNames:
      - ingress-controller-leader-nginx
    verbs:
      - get
      - update
  - apiGroups:
      - ""
    resources:
      - configmaps
    verbs:
      - create
  - apiGroups:
      - ""
    resources:
      - endpoints
    verbs:
      - create
      - get
      - update
  - apiGroups:
      - ""
    resources:
      - events
    verbs:
      - create
      - patch
---
# Source: charlescd/charts/ingress-nginx/templates/controller-rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: controller
  name: charlescd-ingress-nginx
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: charlescd-ingress-nginx
subjects:
  - kind: ServiceAccount
    name: charlescd-ingress-nginx
    namespace: charles
---
# Source: charlescd/charts/envoy/templates/envoy-service.yml
apiVersion: v1
kind: Service
metadata:
  labels:
    app: envoy-proxy
  name: envoy-proxy
spec:
  ports:
  - port: 80
    protocol: TCP
    targetPort: 80
  selector:
    app: envoy-proxy
  sessionAffinity: None
  type: ClusterIP
---
# Source: charlescd/charts/ingress-nginx/templates/controller-service-webhook.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: controller
  name: charlescd-ingress-nginx-controller-admission
spec:
  type: ClusterIP
  ports:
    - name: https-webhook
      port: 443
      targetPort: webhook
  selector:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/component: controller
---
# Source: charlescd/charts/ingress-nginx/templates/controller-service.yaml
apiVersion: v1
kind: Service
metadata:
  annotations:
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: controller
  name: charlescd-ingress-nginx-controller
spec:
  type: LoadBalancer
  ports:
    - name: http
      port: 80
      protocol: TCP
      targetPort: http
    - name: https
      port: 443
      protocol: TCP
      targetPort: https
  selector:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/component: controller
---
# Source: charlescd/charts/keycloak/templates/service-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: keycloak-headless
  labels:
    helm.sh/chart: keycloak-9.8.1
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "11.0.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: headless
spec:
  type: ClusterIP
  clusterIP: None
  ports:
    - name: http
      port: 80
      targetPort: http
      protocol: TCP
  selector:
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: charlescd
---
# Source: charlescd/charts/keycloak/templates/service-http.yaml
apiVersion: v1
kind: Service
metadata:
  name: keycloak-http
  labels:
    helm.sh/chart: keycloak-9.8.1
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "11.0.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: http
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 80
      targetPort: http
      protocol: TCP
    - name: https
      port: 8443
      targetPort: https
      protocol: TCP
    - name: http-management
      port: 9990
      targetPort: http-management
      protocol: TCP
  selector:
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: charlescd
---
# Source: charlescd/charts/postgresql/templates/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: charlescd-postgresql-headless
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-10.2.2
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/managed-by: Helm
    # Use this annotation in addition to the actual publishNotReadyAddresses
    # field below because the annotation will stop being respected soon but the
    # field is broken in some versions of Kubernetes:
    # https://github.com/kubernetes/kubernetes/issues/58662
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/instance: charlescd
---
# Source: charlescd/charts/postgresql/templates/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: charlescd-postgresql
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-10.2.2
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/managed-by: Helm
  annotations:
spec:
  type: ClusterIP
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/instance: charlescd
    role: primary
---
# Source: charlescd/charts/redis/templates/headless-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: charlescd-redis-headless
  namespace: "charles"
  labels:
    app: redis
    chart: redis-12.6.0
    release: charlescd
    heritage: Helm
spec:
  type: ClusterIP
  clusterIP: None
  ports:
    - name: redis
      port: 6379
      targetPort: redis
  selector:
    app: redis
    release: charlescd
---
# Source: charlescd/charts/redis/templates/redis-master-svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: charlescd-redis-master
  namespace: "charles"
  labels:
    app: redis
    chart: redis-12.6.0
    release: charlescd
    heritage: Helm
spec:
  type: ClusterIP
  
  ports:
    - name: redis
      port: 6379
      targetPort: redis
  selector:
    app: redis
    release: charlescd
    role: master
---
# Source: charlescd/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: charlescd-butler
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 3000
      targetPort: 3000
    
  selector:
    app: charlescd-butler
---
# Source: charlescd/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: charlescd-circle-matcher
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8080
      targetPort: 8080
    
  selector:
    app: charlescd-circle-matcher
---
# Source: charlescd/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: charlescd-compass
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8080
      targetPort: 8080
    
  selector:
    app: charlescd-compass
---
# Source: charlescd/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: charlescd-moove
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8080
      targetPort: 8080
    
  selector:
    app: charlescd-moove
---
# Source: charlescd/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: charlescd-octopipe
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8080
      targetPort: 8080
    
  selector:
    app: charlescd-octopipe
---
# Source: charlescd/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: charlescd-ui
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 3000
      targetPort: 3000
    
  selector:
    app: charlescd-ui
---
# Source: charlescd/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: charlescd-villager
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8080
      targetPort: 8080
    
  selector:
    app: charlescd-villager
---
# Source: charlescd/charts/envoy/templates/envoy-deployment.yml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: envoy-proxy
  labels:
    app: envoy-proxy
spec:
  selector:
    matchLabels:
      app: envoy-proxy
  replicas: 1
  template: 
    metadata:
      annotations:
        sidecar.istio.io/inject: "false" 
      labels:
        app: envoy-proxy     
    spec:
      containers:
        - name: envoy-proxy
          image: envoyproxy/envoy-dev:latest
          lifecycle:
            postStart:
              exec:
                command: ["/bin/sh", "-c", "apt update && apt install libcurl4-openssl-dev -y"]
          ports:
          - containerPort: 80
          env:
            - name: ENVOY_UID
              value: "0"
          volumeMounts:
            - name: lua-config
              mountPath: /usr/local/share/lua/5.1/luajit-init.lua
              subPath: luajit-init.lua
            - name: lua-config
              mountPath: /usr/local/share/lua/5.1/luajit-curl.lua
              subPath: luajit-curl.lua
            - name: envoy-config
              mountPath: /etc/envoy/envoy.yaml
              subPath: envoy.yaml
      volumes:
        - name: envoy-config
          configMap:
            name: confenvoy
        - name: lua-config
          configMap:
            name: conflua
---
# Source: charlescd/charts/ingress-nginx/templates/controller-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: controller
  name: charlescd-ingress-nginx-controller
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: ingress-nginx
      app.kubernetes.io/instance: charlescd
      app.kubernetes.io/component: controller
  replicas: 1
  revisionHistoryLimit: 10
  minReadySeconds: 0
  template:
    metadata:
      labels:
        app.kubernetes.io/name: ingress-nginx
        app.kubernetes.io/instance: charlescd
        app.kubernetes.io/component: controller
    spec:
      dnsPolicy: ClusterFirst
      containers:
        - name: controller
          image: "k8s.gcr.io/ingress-nginx/controller:v0.41.2@sha256:1f4f402b9c14f3ae92b11ada1dfe9893a88f0faeb0b2f4b903e2c67a0c3bf0de"
          imagePullPolicy: IfNotPresent
          lifecycle: 
            preStop:
              exec:
                command:
                - /wait-shutdown
          args:
            - /nginx-ingress-controller
            - --publish-service=$(POD_NAMESPACE)/charlescd-ingress-nginx-controller
            - --election-id=ingress-controller-leader
            - --ingress-class=nginx
            - --configmap=$(POD_NAMESPACE)/charlescd-ingress-nginx-controller
            - --validating-webhook=:8443
            - --validating-webhook-certificate=/usr/local/certificates/cert
            - --validating-webhook-key=/usr/local/certificates/key
          securityContext:
            capabilities:
                drop:
                - ALL
                add:
                - NET_BIND_SERVICE
            runAsUser: 101
            allowPrivilegeEscalation: true
          env:
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: LD_PRELOAD
              value: /usr/local/lib/libmimalloc.so
          livenessProbe:
            httpGet:
              path: /healthz
              port: 10254
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            timeoutSeconds: 1
            successThreshold: 1
            failureThreshold: 5
          readinessProbe:
            httpGet:
              path: /healthz
              port: 10254
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            timeoutSeconds: 1
            successThreshold: 1
            failureThreshold: 3
          ports:
            - name: http
              containerPort: 80
              protocol: TCP
            - name: https
              containerPort: 443
              protocol: TCP
            - name: webhook
              containerPort: 8443
              protocol: TCP
          volumeMounts:
            - name: webhook-cert
              mountPath: /usr/local/certificates/
              readOnly: true
          resources: 
            requests:
              cpu: 100m
              memory: 90Mi
      nodeSelector: 
        kubernetes.io/os: linux
      serviceAccountName: charlescd-ingress-nginx
      terminationGracePeriodSeconds: 300
      volumes:
        - name: webhook-cert
          secret:
            secretName: charlescd-ingress-nginx-admission
---
# Source: charlescd/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: charlescd-butler
  namespace: charles
  labels:
    app: charlescd-butler
    version: charlescd-butler
spec:
  replicas: 1
  selector:
    matchLabels:
      app: charlescd-butler
      version: charlescd-butler
  template:
    metadata:
      annotations:
        sidecar.istio.io/inject: 'true' 
      labels:
        app: charlescd-butler
        version: charlescd-butler
    spec:
      initContainers:
        - name: check-db-ready
          image: postgres:9.6.5
          command: ['sh', '-c', 
            'until pg_isready -h charlescd-postgresql -p 5432; 
            do echo waiting for database; sleep 2; done;']
      containers:
        - name: charlescd-butler
                    
          env:
          - name: DATABASE_HOST
            value: charlescd-postgresql
          - name: DATABASE_PORT
            value: "5432"
          - name: DATABASE_USER
            value: charlescd_butler
          - name: DATABASE_PASS
            value: "3f2Yq8R4HhDCnefR"
          - name: DATABASE_NAME
            value: charlescd_butler
          
          - name: MOOVE_URL
            value: "http://charlescd-moove:8080"
          - name: DARWIN_NOTIFICATION_URL
            value: "http://charlescd-butler.charles.svc.cluster.local:3000/notifications"
          - name: DARWIN_CALLBACK
            value: "http://charlescd-butler.charles.svc.cluster.local:3000/notifications"
          - name: OCTOPIPE_URL
            value: "http://charlescd-octopipe:8080"
          - name: BUTLER_URL
            value: "http://charlescd-butler.charles.svc.cluster.local:3000"
          - name: ENCRYPTION_KEY
            valueFrom:
              secretKeyRef:
                name: deploy-aes256-key
                key: encryption-key
          image: zupcharles/charlescd-butler:0.6.1
          imagePullPolicy: Always
          ports:
            - name: http
              containerPort: 80
              protocol: TCP
          livenessProbe:
              httpGet:
                path: /healthcheck
                port: 3000
              initialDelaySeconds: 60
          readinessProbe:
            httpGet:
              path: /healthcheck
              port: 3000
            initialDelaySeconds: 60
          resources:
              {}
---
# Source: charlescd/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: charlescd-circle-matcher
  namespace: charles
  labels:
    app: charlescd-circle-matcher
    version: charlescd-circle-matcher
spec:
  replicas: 1
  selector:
    matchLabels:
      app: charlescd-circle-matcher
      version: charlescd-circle-matcher
  template:
    metadata:
      annotations:
        sidecar.istio.io/inject: 'true' 
      labels:
        app: charlescd-circle-matcher
        version: charlescd-circle-matcher
    spec:
      containers:
        - name: charlescd-circle-matcher
                    
          env:
          - name: SPRING_PROFILES_ACTIVE
            value: redis-standalone
          - name: SPRING_REDIS_HOST
            value: charlescd-redis-master
          - name: SPRING_REDIS_PORT
            value: "6379"
          - name: SPRING_REDIS_PASSWORD
            value: hb2Fj9MGKjBkZ6zV
          - name: SPRING_REDIS_SSL
            value: "false"
          - name: ALLOWED_ORIGINS
            value: http://charles.info.example
          image: zupcharles/charlescd-circle-matcher:0.6.1
          imagePullPolicy: Always
          ports:
            - name: http
              containerPort: 80
              protocol: TCP
          livenessProbe:
              httpGet:
                path: /actuator/health
                port: 8080
              initialDelaySeconds: 120
          readinessProbe:
            httpGet:
              path: /actuator/health
              port: 8080
            initialDelaySeconds: 120
          resources:
              limits:
                cpu: 500m
                memory: 384Mi
              requests:
                cpu: 500m
                memory: 384Mi
---
# Source: charlescd/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: charlescd-compass
  namespace: charles
  labels:
    app: charlescd-compass
    version: charlescd-compass
spec:
  replicas: 1
  selector:
    matchLabels:
      app: charlescd-compass
      version: charlescd-compass
  template:
    metadata:
      annotations:
        sidecar.istio.io/inject: 'true' 
      labels:
        app: charlescd-compass
        version: charlescd-compass
    spec:
      initContainers:
        - name: check-db-ready
          image: postgres:9.6.5
          command: ['sh', '-c', 
            'until pg_isready -h charlescd-postgresql -p 5432; 
            do echo waiting for database; sleep 2; done;']
      containers:
        - name: charlescd-compass
                    
          env:
            - name: DB_HOST
              value: "charlescd-postgresql"
            - name: DB_PORT
              value: "5432"
            - name: DB_USER
              value: "charlescd_compass"
            - name: DB_PASSWORD
              value: "C1UinUu6N0vc"
            - name: DB_NAME
              value: "charlescd_compass"
            - name: MOOVE_DB_HOST
              value: "charlescd-postgresql"
            - name: MOOVE_DB_NAME
              value: "charlescd_moove"
            - name: MOOVE_DB_PORT
              value: "5432"
            - name: MOOVE_DB_USER
              value: "charlescd_moove"
            - name: MOOVE_DB_PASSWORD
              value: "7Qs2KuM9gYzw48BS"
            - name: DB_SSL
              value: "disable"
            - name: PLUGINS_DIR
              value: ./plugins
            - name: ENV
              value: "PROD"
            - name: DISPATCHER_INTERVAL
              value: "15s"
            - name: MOOVE_USER
              value: "Y2hhcmxlc2FkbWluQGFkbWlu"
            - name: MOOVE_PATH
              value: "http://charlescd--moove:8080"
            - name: MOOVE_AUTH
              value: "Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJrcXkydE1XY2E1VVhaYjdONXZNSEE0b25NRkZqNkVLandSV0tnaTJvQkhNIn0.eyJleHAiOjE2MTEyNTMzMzcsImlhdCI6MTYxMTI0OTczNywianRpIjoiNmU5OWYyZjUtOTBlMS00OGFjLWFlN2QtYWJkMjIyODIwY2FmIiwiaXNzIjoiaHR0cDovL2NoYXJsZXMuaW5mby5leGFtcGxlL2tleWNsb2FrL2F1dGgvcmVhbG1zL2NoYXJsZXNjZCIsImF1ZCI6ImRhcndpbi1jbGllbnQiLCJzdWIiOiJkYThjYTQ5OC1lNDQ5LTQzMjYtYThkZC00ODM5NDI0Y2JkZDAiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJjaGFybGVzY2QtY2xpZW50Iiwic2Vzc2lvbl9zdGF0ZSI6IjI5Mzk2ZDZlLWI4ZDctNGU0ZC1hYTI2LWVlYWVlM2M5ODRjNSIsImFjciI6IjEiLCJhbGxvd2VkLW9yaWdpbnMiOlsiKiJdLCJzY29wZSI6InByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNSb290Ijp0cnVlLCJuYW1lIjoiY2hhcmxlc2FkbWluQGFkbWluIGNoYXJsZXNhZG1pbkBhZG1pbiIsInByZWZlcnJlZF91c2VybmFtZSI6ImNoYXJsZXNhZG1pbkBhZG1pbiIsImdpdmVuX25hbWUiOiJjaGFybGVzYWRtaW5AYWRtaW4iLCJmYW1pbHlfbmFtZSI6ImNoYXJsZXNhZG1pbkBhZG1pbiIsImVtYWlsIjoiY2hhcmxlc2FkbWluQGFkbWluIn0.NLzu9222nMb-eyIiKwbznPzSTXe26QQp5cYGWw4MhfTW43gl6bXFAd-YMSXMEz5mmRy73NlW8WWnMKfQpC2FR-3wSKajVTB5_Y2CJC8PTLjXUpcZS2UxvBuV_ANZiINNovGiX87XFNhm9bHZxXzYUhDKqGh2C72G18fZKUTGMCfcTFHhFjxWDx1MEm5AN5JzPNbtcYWmrCMufgTsaQD9pQrHWxr9-8kNgKYff6wMVJLR6YIVpNVy7eHWTTOKwa59BFpw-w45clA3dtcs5cbMQo6GoA52_f5XdyvCZ-llYfvYpT09iPMsekWjG0TTbo2hCA59VKnMZA0r7JtPan9wrQ"
            - name: REQUESTS_PER_SECOND_LIMIT
              value: ""
            - name: LIMITER_TOKEN_TTL
              value: "5"
            - name: LIMITER_HEADERS_TTL
              value: "5"
            - name: ENCRYPTION_KEY
              valueFrom:
                secretKeyRef:
                  name: "compass-aes256-key"
                  key: "encryption-key"
          image: zupcharles/charlescd-compass:0.6.1
          imagePullPolicy: Always
          ports:
            - name: http
              containerPort: 80
              protocol: TCP
          livenessProbe:
              httpGet:
                path: /health
                port: 8080
              initialDelaySeconds: 60
          readinessProbe:
            httpGet:
              path: /health
              port: 8080
            initialDelaySeconds: 60
          resources:
              {}
---
# Source: charlescd/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: charlescd-moove
  namespace: charles
  labels:
    app: charlescd-moove
    version: charlescd-moove
spec:
  replicas: 1
  selector:
    matchLabels:
      app: charlescd-moove
      version: charlescd-moove
  template:
    metadata:
      annotations:
        sidecar.istio.io/inject: 'true' 
      labels:
        app: charlescd-moove
        version: charlescd-moove
    spec:
      initContainers:
        - name: check-db-ready
          image: postgres:9.6.5
          command: ['sh', '-c', 
            'until pg_isready -h charlescd-postgresql -p 5432; 
            do echo waiting for database; sleep 2; done;']
      containers:
        - name: charlescd-moove
                    
          env:
          - name: SPRING_PROFILES_ACTIVE
            value: "k8s"
          - name: DB_URL
            value: "jdbc:postgresql://charlescd-postgresql:5432/charlescd_moove"
          - name: DB_USERNAME
            value: "charlescd_moove"
          - name: DB_PASSWORD
            value: "7Qs2KuM9gYzw48BS"
          - name: KEYCLOCK_REALM
            value: "charlescd"
          
          - name: KEYCLOAK_SERVER_URL
            value: "http://keycloak-http/keycloak/auth"
          
          - name: KEYCLOAK_PUBLIC_CLIENT_ID
            value: "charlescd-client"
          - name: KEYCLOAK_CLIENT_ID
            value: "realm-charlescd"
          - name: RATELIMIT_CAPACITY
            value: "4"
          - name: RATELIMIT_TOKENS
            value: "4"
          - name: RATELIMIT_SECONDS
            value: "1"
          - name: KEYCLOAK_CLIENT_SECRET
            value: "441cfd37-8443-4f3d-bf6c-ee9861b04e28"
          - name: INTERNAL_IDM_ENABLED
            value: "true"
          - name: ORIGIN_HOSTS
            value: "http://localhost:3000,http://localhost:3001,http://localhost:8081,http://localhost:8080,http://charles.info.example"
          - name: ENCRYPTION_KEY
            valueFrom:
              secretKeyRef:
                name: "application-aes256-key"
                key: "encryption-key"
          image: zupcharles/charlescd-moove:0.6.1
          imagePullPolicy: Always
          ports:
            - name: http
              containerPort: 80
              protocol: TCP
          livenessProbe:
              httpGet:
                path: /actuator/health
                port: 8080
              initialDelaySeconds: 180
          readinessProbe:
            httpGet:
              path: /actuator/health
              port: 8080
            initialDelaySeconds: 180
          resources:
              {}
---
# Source: charlescd/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: charlescd-octopipe
  namespace: charles
  labels:
    app: charlescd-octopipe
    version: charlescd-octopipe
spec:
  replicas: 1
  selector:
    matchLabels:
      app: charlescd-octopipe
      version: charlescd-octopipe
  template:
    metadata:
      annotations:
        sidecar.istio.io/inject: 'true' 
      labels:
        app: charlescd-octopipe
        version: charlescd-octopipe
    spec:
      serviceAccountName: charlescd-octopipe
      containers:
        - name: charlescd-octopipe
                    
          env:
            - name: APP_PORT
              value: "8080"
            - name: KUBECONFIG
              value: "IN_CLUSTER"
            - name: TIMEOUT_RESOURCE_VERIFICATION
              value: "300"
            - name: LIMIT_REQUESTS_BY_SECOND
              value: "10"
          image: zupcharles/charlescd-octopipe:0.6.1
          imagePullPolicy: Always
          ports:
            - name: http
              containerPort: 80
              protocol: TCP
          livenessProbe:
              httpGet:
                path: /api/v1/health
                port: 8080
              initialDelaySeconds: 60
          readinessProbe:
            httpGet:
              path: /api/v1/health
              port: 8080
            initialDelaySeconds: 60
          resources:
              {}
---
# Source: charlescd/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: charlescd-ui
  namespace: charles
  labels:
    app: charlescd-ui
    version: charlescd-ui
spec:
  replicas: 1
  selector:
    matchLabels:
      app: charlescd-ui
      version: charlescd-ui
  template:
    metadata:
      annotations:
        sidecar.istio.io/inject: 'true' 
      labels:
        app: charlescd-ui
        version: charlescd-ui
    spec:
      containers:
        - name: charlescd-ui
                    
          env:
            - name: REACT_APP_API_URI
              value: http://charles.info.example
            - name: REACT_APP_AUTH_URI
              value: http://charles.info.example/keycloak
            - name: REACT_APP_AUTH_REALM
              value: charlescd
            - name: REACT_APP_AUTH_CLIENT_ID
              value: charlescd-client
            - name: REACT_APP_IDM
              value: "0"
            - name: REACT_APP_IDM_LOGIN_URI
              value: /protocol/openid-connect/auth
            - name: REACT_APP_IDM_LOGOUT_URI
              value: /protocol/openid-connect/logout
            - name: REACT_APP_IDM_REDIRECT_URI
              value: http://charles.info.example
          image: zupcharles/charlescd-ui:0.6.1
          imagePullPolicy: Always
          ports:
            - name: http
              containerPort: 80
              protocol: TCP
          livenessProbe:
              httpGet:
                path: /
                port: 3000
              initialDelaySeconds: 20
          readinessProbe:
            httpGet:
              path: /
              port: 3000
            initialDelaySeconds: 20
          resources:
              {}
---
# Source: charlescd/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: charlescd-villager
  namespace: charles
  labels:
    app: charlescd-villager
    version: charlescd-villager
spec:
  replicas: 1
  selector:
    matchLabels:
      app: charlescd-villager
      version: charlescd-villager
  template:
    metadata:
      annotations:
        sidecar.istio.io/inject: 'true' 
      labels:
        app: charlescd-villager
        version: charlescd-villager
    spec:
      initContainers:
        - name: check-db-ready
          image: postgres:9.6.5
          command: ['sh', '-c', 
            'until pg_isready -h charlescd-postgresql -p 5432; 
            do echo waiting for database; sleep 2; done;']
      containers:
        - name: charlescd-villager
                    
          env:
            - name: SPRING_PROFILES_ACTIVE
              value: "k8s"
            - name: CHARLES_VILLAGER_DB_URI
              value: "jdbc:postgresql://charlescd-postgresql:5432/charlescd_villager"
            - name: CHARLES_VILLAGER_DB_USERNAME
              value: "charlescd_villager"
            - name: CHARLES_VILLAGER_DB_PASSWORD
              value: "ZkQ67Lnhs2bM3MPN"
            - name: CHARLES_BUILD_TIMEOUT
              value: "15"
            - name: CHARLES_villager_ORGANIZATION
              value: zup
            - name: CRYPT_KEY
              value: pvMPbPPNNB
          image: zupcharles/charlescd-villager:0.6.1
          imagePullPolicy: Always
          ports:
            - name: http
              containerPort: 80
              protocol: TCP
          livenessProbe:
              httpGet:
                path: /health
                port: 8080
              initialDelaySeconds: 60
          readinessProbe:
            httpGet:
              path: /health
              port: 8080
            initialDelaySeconds: 60
          resources:
              {}
---
# Source: charlescd/templates/hpa.yaml
apiVersion: autoscaling/v2beta2
kind: HorizontalPodAutoscaler
metadata:
  name: charlescd-circle-matcher
  labels:
    app: charlescd-circle-matcher
    version: charlescd-circle-matcher
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: charlescd-circle-matcher
  minReplicas: 3
  maxReplicas: 10
  metrics:
    - type: Resource
      resource:
        name: memory
        target:
          type: Utilization
          averageUtilization: 80
---
# Source: charlescd/charts/keycloak/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: keycloak
  labels:
    helm.sh/chart: keycloak-9.8.1
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "11.0.2"
    app.kubernetes.io/managed-by: Helm
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: keycloak
      app.kubernetes.io/instance: charlescd
  replicas: 1
  serviceName: keycloak-headless
  podManagementPolicy: Parallel
  updateStrategy:
    type: RollingUpdate
  template:
    metadata:
      annotations:
        checksum/config-startup: a09cd3a55fe67454f509ec623db5505a7f5a26a87f77b5235e70e02cc86a45da
        checksum/secrets: 44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
      labels:
        app.kubernetes.io/name: keycloak
        app.kubernetes.io/instance: charlescd
    spec:
      initContainers:
        - name: check-db-ready
          image: postgres:9.6.5
          command: ['sh', '-c', 
            'until pg_isready -h charlescd-postgresql -p 5432; 
            do echo waiting for database; sleep 2; done;']
        
      containers:
        - name: keycloak
          securityContext:
            runAsNonRoot: false
            runAsUser: 0
          image: "docker.io/jboss/keycloak:11.0.2"
          imagePullPolicy: IfNotPresent
          command:
            []
          args:
            []
          env:
            - name: PROXY_ADDRESS_FORWARDING
              value: "true"
            - name: DB_USER
              value: "keycloak"
            - name: DB_PASSWORD
              value: "DCWYW66Mq2ca6w8u"
            - name: DB_VENDOR
              value: "POSTGRES"
            - name: DB_PORT
              value: "5432"
            - name: DB_ADDR
              value: "charlescd-postgresql"
            - name: DB_DATABASE
              value: "keycloak"
            - name: DB_SCHEMA
              value: "public"
            - name: JAVA_OPTS
              value: >-
                -Dkeycloak.migration.action=import
                -Dkeycloak.migration.provider=singleFile
                -Dkeycloak.migration.file=/realm/keycloak.json
                -Dkeycloak.migration.strategy=IGNORE_EXISTING
            
          envFrom:
          ports:
            - name: http
              containerPort: 8080
              protocol: TCP
            - name: https
              containerPort: 8443
              protocol: TCP
            - name: http-management
              containerPort: 9990
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /keycloak/auth/
              port: http
            initialDelaySeconds: 300
            timeoutSeconds: 5
            
          readinessProbe:
            httpGet:
              path: /keycloak/auth/realms/master
              port: http
            initialDelaySeconds: 30
            timeoutSeconds: 1
            
          resources:
            {}
          volumeMounts:
            - name: startup
              mountPath: "/opt/jboss/startup-scripts/contextPath.cli"
              subPath: "contextPath.cli"
              readOnly: true
            - name: startup
              mountPath: "/opt/jboss/startup-scripts/keycloak.cli"
              subPath: "keycloak.cli"
              readOnly: true
            - name: realm-secret
              mountPath: "/realm/"
              readOnly: false
            
      serviceAccountName: keycloak
      securityContext:
        fsGroup: 1000
      enableServiceLinks: true
      restartPolicy: Always
      affinity:
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchLabels:
                  app.kubernetes.io/name: keycloak
                  app.kubernetes.io/instance: charlescd
                matchExpressions:
                  - key: app.kubernetes.io/component
                    operator: NotIn
                    values:
                      - test
              topologyKey: kubernetes.io/hostname
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 100
              podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/name: keycloak
                    app.kubernetes.io/instance: charlescd
                  matchExpressions:
                    - key: app.kubernetes.io/component
                      operator: NotIn
                      values:
                        - test
                topologyKey: failure-domain.beta.kubernetes.io/zone
        
      terminationGracePeriodSeconds: 60
      volumes:
        - name: startup
          configMap:
            name: keycloak-startup
            defaultMode: 0555
            items:
              - key: contextPath.cli
                path: contextPath.cli
              - key: keycloak.cli
                path: keycloak.cli
        - name: realm-secret
          configMap:
            name: keycloak-realm
---
# Source: charlescd/charts/postgresql/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: charlescd-postgresql
  labels:
    app.kubernetes.io/name: postgresql
    helm.sh/chart: postgresql-10.2.2
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: primary
  annotations:
spec:
  serviceName: charlescd-postgresql-headless
  replicas: 1
  updateStrategy:
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: postgresql
      app.kubernetes.io/instance: charlescd
      role: primary
  template:
    metadata:
      name: charlescd-postgresql
      labels:
        app.kubernetes.io/name: postgresql
        helm.sh/chart: postgresql-10.2.2
        app.kubernetes.io/instance: charlescd
        app.kubernetes.io/managed-by: Helm
        role: primary
        app.kubernetes.io/component: primary
    spec:      
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/name: postgresql
                    app.kubernetes.io/instance: charlescd
                    app.kubernetes.io/component: primary
                namespaces:
                  - charles
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
      containers:
        - name: charlescd-postgresql
          image: docker.io/bitnami/postgresql:11.10.0-debian-10-r60
          imagePullPolicy: "IfNotPresent"
          resources:
            requests:
              cpu: 250m
              memory: 256Mi
          securityContext:
            runAsUser: 1001
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            - name: POSTGRES_USER
              value: "postgres"
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: charlescd-postgresql
                  key: postgresql-password
            - name: POSTGRESQL_ENABLE_LDAP
              value: "no"
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "postgres" -h 127.0.0.1 -p 5432
            initialDelaySeconds: 30
            periodSeconds: 10
            timeoutSeconds: 5
            successThreshold: 1
            failureThreshold: 6
          readinessProbe:
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                - |
                  exec pg_isready -U "postgres" -h 127.0.0.1 -p 5432
                  [ -f /opt/bitnami/postgresql/tmp/.initialized ] || [ -f /bitnami/postgresql/.initialized ]
            initialDelaySeconds: 5
            periodSeconds: 10
            timeoutSeconds: 5
            successThreshold: 1
            failureThreshold: 6
          volumeMounts:
            - name: custom-init-scripts
              mountPath: /docker-entrypoint-initdb.d/
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
              subPath: 
      volumes:
        - name: custom-init-scripts
          configMap:
            name: charles-postgres
        - name: dshm
          emptyDir:
            medium: Memory
            sizeLimit: 1Gi
  volumeClaimTemplates:
    - metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: charlescd/charts/redis/templates/redis-master-statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: charlescd-redis-master
  namespace: "charles"
  labels:
    app: redis
    chart: redis-12.6.0
    release: charlescd
    heritage: Helm
spec:
  selector:
    matchLabels:
      app: redis
      release: charlescd
      role: master
  serviceName: charlescd-redis-headless
  template:
    metadata:
      labels:
        app: redis
        chart: redis-12.6.0
        release: charlescd
        role: master
      annotations:
        checksum/health: de4b56cd06533ea0212330f08974c4a88c2af28012401bdc4f465a98e3d22f79
        checksum/configmap: 82bd7784b1b3d4c09a0ca0731226e3c773fdffef6da3a1255b025b83506b342b
        checksum/secret: b250dfc5d956ed4a8c05d5f818c114b96b8e809b91551f0151e9ce197a5e6585
    spec:
      
      securityContext:
        fsGroup: 1001
      serviceAccountName: default
      containers:
        - name: redis
          image: docker.io/bitnami/redis:6.0.10-debian-10-r1
          imagePullPolicy: "IfNotPresent"
          securityContext:
            runAsUser: 1001
          command:
            - /bin/bash
            - -c
            - /opt/bitnami/scripts/start-scripts/start-master.sh
          env:
            - name: REDIS_REPLICATION_MODE
              value: master
            - name: REDIS_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: charlescd-redis
                  key: redis-password
            - name: REDIS_TLS_ENABLED
              value: "no"
            - name: REDIS_PORT
              value: "6379"
          ports:
            - name: redis
              containerPort: 6379
          livenessProbe:
            initialDelaySeconds: 5
            periodSeconds: 5
            # One second longer than command timeout should prevent generation of zombie processes.
            timeoutSeconds: 6
            successThreshold: 1
            failureThreshold: 5
            exec:
              command:
                - sh
                - -c
                - /health/ping_liveness_local.sh 5
          readinessProbe:
            initialDelaySeconds: 5
            periodSeconds: 5
            timeoutSeconds: 2
            successThreshold: 1
            failureThreshold: 5
            exec:
              command:
                - sh
                - -c
                - /health/ping_readiness_local.sh 1
          resources:
            null
          volumeMounts:
            - name: start-scripts
              mountPath: /opt/bitnami/scripts/start-scripts
            - name: health
              mountPath: /health
            - name: redis-data
              mountPath: /data
              subPath: 
            - name: config
              mountPath: /opt/bitnami/redis/mounted-etc
            - name: redis-tmp-conf
              mountPath: /opt/bitnami/redis/etc/
      volumes:
        - name: start-scripts
          configMap:
            name: charlescd-redis-scripts
            defaultMode: 0755
        - name: health
          configMap:
            name: charlescd-redis-health
            defaultMode: 0755
        - name: config
          configMap:
            name: charlescd-redis
        - name: redis-tmp-conf
          emptyDir: {}
  volumeClaimTemplates:
    - metadata:
        name: redis-data
        labels:
          app: redis
          release: charlescd
          heritage: Helm
          component: master
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
        
        selector:
  updateStrategy:
    type: RollingUpdate
---
# Source: charlescd/templates/ingress.yaml
apiVersion: networking.k8s.io/v1beta1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    
    nginx.ingress.kubernetes.io/rewrite-target: /$1
  name: charlescd-ingress
spec:
  rules:
  - host: charles.info.example
    http:
      paths:
      - path: /(.*)
        backend:
          serviceName: envoy-proxy
          servicePort: 80
---
# Source: charlescd/charts/ingress-nginx/templates/admission-webhooks/validating-webhook.yaml
# before changing this value, check the required kubernetes version
# https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#prerequisites
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: admission-webhook
  name: charlescd-ingress-nginx-admission
webhooks:
  - name: validate.nginx.ingress.kubernetes.io
    matchPolicy: Equivalent
    rules:
      - apiGroups:
          - networking.k8s.io
        apiVersions:
          - v1beta1
        operations:
          - CREATE
          - UPDATE
        resources:
          - ingresses
    failurePolicy: Fail
    sideEffects: None
    admissionReviewVersions:
      - v1
      - v1beta1
    clientConfig:
      service:
        namespace: charles
        name: charlescd-ingress-nginx-controller-admission
        path: /networking/v1beta1/ingresses
---
# Source: charlescd/charts/ingress-nginx/templates/admission-webhooks/job-patch/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: charlescd-ingress-nginx-admission
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: admission-webhook
---
# Source: charlescd/charts/ingress-nginx/templates/admission-webhooks/job-patch/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: charlescd-ingress-nginx-admission
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: admission-webhook
rules:
  - apiGroups:
      - admissionregistration.k8s.io
    resources:
      - validatingwebhookconfigurations
    verbs:
      - get
      - update
---
# Source: charlescd/charts/ingress-nginx/templates/admission-webhooks/job-patch/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name:  charlescd-ingress-nginx-admission
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: admission-webhook
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: charlescd-ingress-nginx-admission
subjects:
  - kind: ServiceAccount
    name: charlescd-ingress-nginx-admission
    namespace: charles
---
# Source: charlescd/charts/ingress-nginx/templates/admission-webhooks/job-patch/role.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name:  charlescd-ingress-nginx-admission
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: admission-webhook
rules:
  - apiGroups:
      - ""
    resources:
      - secrets
    verbs:
      - get
      - create
---
# Source: charlescd/charts/ingress-nginx/templates/admission-webhooks/job-patch/rolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: charlescd-ingress-nginx-admission
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade,post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: admission-webhook
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: charlescd-ingress-nginx-admission
subjects:
  - kind: ServiceAccount
    name: charlescd-ingress-nginx-admission
    namespace: charles
---
# Source: charlescd/charts/ingress-nginx/templates/admission-webhooks/job-patch/job-createSecret.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: charlescd-ingress-nginx-admission-create
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: admission-webhook
spec:
  template:
    metadata:
      name: charlescd-ingress-nginx-admission-create
      labels:
        helm.sh/chart: ingress-nginx-3.15.2
        app.kubernetes.io/name: ingress-nginx
        app.kubernetes.io/instance: charlescd
        app.kubernetes.io/version: "0.41.2"
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/component: admission-webhook
    spec:
      containers:
        - name: create
          image: "docker.io/jettech/kube-webhook-certgen:v1.5.0"
          imagePullPolicy: IfNotPresent
          args:
            - create
            - --host=charlescd-ingress-nginx-controller-admission,charlescd-ingress-nginx-controller-admission.$(POD_NAMESPACE).svc
            - --namespace=$(POD_NAMESPACE)
            - --secret-name=charlescd-ingress-nginx-admission
          env:
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
      restartPolicy: OnFailure
      serviceAccountName: charlescd-ingress-nginx-admission
      securityContext:
        runAsNonRoot: true
        runAsUser: 2000
---
# Source: charlescd/charts/ingress-nginx/templates/admission-webhooks/job-patch/job-patchWebhook.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: charlescd-ingress-nginx-admission-patch
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
  labels:
    helm.sh/chart: ingress-nginx-3.15.2
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/instance: charlescd
    app.kubernetes.io/version: "0.41.2"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: admission-webhook
spec:
  template:
    metadata:
      name: charlescd-ingress-nginx-admission-patch
      labels:
        helm.sh/chart: ingress-nginx-3.15.2
        app.kubernetes.io/name: ingress-nginx
        app.kubernetes.io/instance: charlescd
        app.kubernetes.io/version: "0.41.2"
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/component: admission-webhook
    spec:
      containers:
        - name: patch
          image: "docker.io/jettech/kube-webhook-certgen:v1.5.0"
          imagePullPolicy: IfNotPresent
          args:
            - patch
            - --webhook-name=charlescd-ingress-nginx-admission
            - --namespace=$(POD_NAMESPACE)
            - --patch-mutating=false
            - --secret-name=charlescd-ingress-nginx-admission
            - --patch-failure-policy=Fail
          env:
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
      restartPolicy: OnFailure
      serviceAccountName: charlescd-ingress-nginx-admission
      securityContext:
        runAsNonRoot: true
        runAsUser: 2000
